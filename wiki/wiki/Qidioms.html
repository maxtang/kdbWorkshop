<!DOCTYPE html>
<html lang="en" dir="ltr">

<!-- Mirrored from code.kx.com/wiki/Qidioms by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 05 Apr 2013 19:29:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<title>Qidioms - Kx Wiki</title>
<meta name="generator" content="MediaWiki 1.17.0" />
<link rel="shortcut icon" href="http://code.kx.com/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="../mediawiki/opensearch_desc.php" title="Kx Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="../mediawiki/api251f.php?action=rsd" />
<link rel="copyright" href="TermsAndConditions.html" />
<link rel="alternate" type="application/atom+xml" title="Kx Wiki Atom feed" href="http://code.kx.com/mediawiki/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="../mediawiki/loadeb8e.css?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cskins.vector&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" /><link rel="stylesheet" href="../mediawiki/loadc6d2.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<link rel="stylesheet" href="../mediawiki/loadc6d2.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<link rel="stylesheet" href="../mediawiki/loadc6d2.css?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />

<!--[if lt IE 7]><style type="text/css">body{behavior:url("/mediawiki/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr ns-0 ns-subject page-Qidioms skin-vector">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<!-- content -->
		<div id="content">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<!-- firstHeading -->
			<h1 id="firstHeading" class="firstHeading">Qidioms</h1>
			<!-- /firstHeading -->
			<!-- bodyContent -->
			<div id="bodyContent">
				<!-- tagline -->
				<div id="siteSub">From Kx Wiki</div>
				<!-- /tagline -->
				<!-- subtitle -->
				<div id="contentSub"></div>
				<!-- /subtitle -->
																<!-- jumpto -->
				<div id="jump-to-nav">
					Jump to: <a href="#mw-head">navigation</a>,
					<a href="#p-search">search</a>
				</div>
				<!-- /jumpto -->
								<!-- bodytext -->
				<h2> <span class="mw-headline" id="q_idioms"> q idioms </span></h2>
<p>after <a href="http://en.wikipedia.org/wiki/Eugene_McDonnell" class="extiw" title="wikipedia:Eugene McDonnell">Eugene McDonnell's</a> k idiom list for k2 - the original version can be found <a href="http://kx.com/technical/contribs/eugene/kidioms.html" class="external text" rel="nofollow">here</a>.
</p><p>within the text for each idiom the layout is first the original k code is displayed, followed by the equivalent q code (prefixed by <tt>q</tt>) ).
</p><p>1. ascending ordinals (ranking, shareable)
</p>
<pre>
   x:11 17 12 13 13 13 13 18
   x[&lt;x]?/:x
0 6 1 2 2 2 2 7
</pre>
<pre>
q)x[iasc x]&#160;?/: x
0 6 1 2 2 2 2 7
q)x[iasc x]?x
0 6 1 2 2 2 2 7
q)asc[x]?x
0 6 1 2 2 2 2 7
/k)&lt;x
/q)iasc x
/?/: find eachright
</pre>
<p>2. max scan x partition y
</p>
<pre>
   x:1 1 0 0 0 1 0 0 1 1
   y:3 4 8 2 5 6 9 4 5 4
   ,/|\'(&amp;x)_ y
3 4 8 8 8 6 9 9 5 4
</pre>
<pre>
q)x:1 1 0 0 0 1 0 0 1 1
q)y:3 4 8 2 5 6 9 4 5 4
q)raze maxs each (where x)_y
3 4 8 8 8 6 9 9 5 4
</pre>
<p>3. min scan x partitions y
</p>
<pre>
   x:1 1 0 0 0 1 0 0 1 1
   y:3 4 8 2 5 6 9 4 5 4
   ,/&amp;\'(&amp;x)_ y
3 4 4 2 2 6 6 4 5 4
</pre>
<pre>
q)x:1 1 0 0 0 1 0 0 1 1
q)y:3 4 8 2 5 6 9 4 5 4
q)raze mins each (where x)_y
3 4 4 2 2 6 6 4 5 4
</pre>
<p>4. are x and y permutations of each other
</p>
<pre>
   x:15 16 13 18 14 11 12
   y:15 16 13 19 14 11 12
   x[&lt;x]~y[&lt;y]
0
   y:15 16 13 14 18 12 11
   x[&lt;x]~y[&lt;y]
1
</pre>
<pre>
q)x:15 16 13 18 14 11 12
q)y:15 16 13 19 14 11 12
q)(asc x)~asc y
0b
q)y:15 16 13 14 18 12 11
q)(asc x)~asc y
1b
</pre>
<p>5. sort subvectors ascending
5a. sort ascending
</p>
<pre>
   sa:{x[&lt;x]}
   sa 30 10 40 20
10 20 30 40
   sa&quot;popfly&quot;
&quot;floppy&quot;
</pre>
<pre>
q)sa:{asc x}
q)sa 30 10 40 20
`s#10 20 30 40
q)sa&quot;popfly&quot;
`s#&quot;floppy&quot;
</pre>
<p>5b. indices from lengths
</p>
<pre>
   il:{(#x)#+\0,x}
   il 4 3
0 4
   x:10 30 20 50 60 40 5
   y:4 3
   ,/sa'(il y)_ x
10 20 30 50 5 40 60
</pre>
<pre>
q)x:10 30 20 50 60 40 5
q)y:4 3
q)il:{(count x)#sums 0,x}
q)il 4 3
0 4
q)raze sa each (il y) _ x
10 20 30 50 5 40 60
</pre>
<p>6. subvector minima
</p>
<pre>
   x:1 1 0 0 0 1 1 0 0 1
   y:3 4 8 2 5 6 9 4 5 4
   &amp;/'(&amp;x)_ y
3 2 6 4 4
</pre>
<pre>
q)x:1 1 0 0 0 1 1 0 0 1
q)y:3 4 8 2 5 6 9 4 5 4
q)min each (where x)_y
3 2 6 4 4
</pre>
<p>7. subvector grade up (see 15 for down)
</p>
<pre>
   x:1 0 0 1 0 0 1 0
   y:14 12 18 16 13 15 11 17
   {,/x+'&lt;:'x _ y}[&amp;x;y]
1 0 2 4 3 5 6 7
</pre>
<pre>
q)x:1 0 0 1 0 0 1 0
q)y:14 12 18 16 13 15 11 17
q){raze x +' iasc each x _ y}[where x; y]
1 0 2 4 5 3 6 7
</pre>
<p>8. sort rows ascending
</p>
<pre>
   x: 3 5 _draw 10
   x
(6 3 3 9 7
9 4 4 7 9
9 4 7 8 9)
   sa'x
(3 3 6 7 9
4 4 7 9 9
4 7 8 9 9)
</pre>
<pre>
q)sa:{asc x}
q)x:(6 3 3 9 7;9 4 4 7 9;9 4 7 8 9)
q)sa each x
3 3 6 7 9
4 4 7 9 9
4 7 8 9 9
</pre>
<p>9. see 8
</p><p>10. Replicate at depth; add new dimension y-fold after dimension x of array z
10a. depth (n is depth at which to apply f)
</p>
<pre>
   d:{[n;f]:[n;_f[n-1;f]';f]}
   h:{d[x;y#,:]z}
   z:2 5#&quot;abcdefghij&quot;
   z
(&quot;abcde&quot;
&quot;fghij&quot;)
   q:h[0;3;z]
   ^q
3 2 5
   q
((&quot;abcde&quot;
&quot;fghij&quot;)
(&quot;abcde&quot;
&quot;fghij&quot;)
(&quot;abcde&quot;
&quot;fghij&quot;))
   r:h[1;3;z]
   ^r
2 3 5
   r
((&quot;abcde&quot;
&quot;abcde&quot;
&quot;abcde&quot;)
(&quot;fghij&quot;
&quot;fghij&quot;
&quot;fghij&quot;))
   s:h[2;3;z]
   ^s
2 5 3
   s
((&quot;aaa&quot;
&quot;bbb&quot;
&quot;ccc&quot;
&quot;ddd&quot;
&quot;eee&quot;)
(&quot;fff&quot;
&quot;ggg&quot;
&quot;hhh&quot;
&quot;iii&quot;
&quot;jjj&quot;))
</pre>
<pre>
q)d:{[n;f] $[n;d[n-1;f]';f]}
q)h:{d[x;y#,:]z}
q)z:2 5#&quot;abcdefghij&quot;
q)z
&quot;abcde&quot;
&quot;fghij&quot;
q)q:h[0;3;z]
&quot;abcde&quot; &quot;fghij&quot;
&quot;abcde&quot; &quot;fghij&quot;
&quot;abcde&quot; &quot;fghij&quot;
q)r:h[1;3;z]
q)r
&quot;abcde&quot; &quot;abcde&quot; &quot;abcde&quot;
&quot;fghij&quot; &quot;fghij&quot; &quot;fghij&quot;
q)s:h[2;3;z]
q)s
&quot;aaa&quot; &quot;bbb&quot; &quot;ccc&quot; &quot;ddd&quot; &quot;eee&quot;
&quot;fff&quot; &quot;ggg&quot; &quot;hhh&quot; &quot;iii&quot; &quot;jjj&quot;
</pre>
<p>11. merge x, y, z, under control of g (mesh)
</p>
<pre>
   x:&quot;abcd&quot;
   y:&quot;123456789&quot;
   z:&quot;zz&quot;
   g:15 _draw 3
   g
1 0 1 1 2 1 2 1 1 0 1 0 1 0 1
   (x,y,z)[&lt;&lt;g]
&quot;1a23z4z56b7c8d9&quot;
</pre>
<pre>
q)x:&quot;abcd&quot;
q)y:&quot;123456789&quot;
q)z:&quot;zz&quot;
q)g:1 0 1 1 2 1 2 1 1 0 1 0 1 0 1
q)(x,y,z)rank g
&quot;1a23z4z56b7c8d9&quot;
q)k)(x,y,z)[&lt;&lt;g]
&quot;1a23z4z56b7c8d9&quot;
/Note k's ^ or shape is missing in q?
</pre>
<p>12. see 11
</p><p>13. ascending ordinals (ranking, all different)
</p>
<pre>
   x:15 16 13 18 15 12 13
   &lt;&lt;x
3 5 1 6 4 0 2
</pre>
<pre>
q)x:15 16 13 18 15 12 13
q)rank x
3 5 1 6 4 0 2
</pre>
<p>14. subvector maxima
</p>
<pre>
   x:1 1 0 0 0 1 1 0 0 1
   y:3 4 8 2 5 6 9 4 5 4
   |/'(&amp;x)_ y
3 8 6 9 4
</pre>
<pre>
q)x:1 1 0 0 0 1 1 0 0 1
q)y:3 4 8 2 5 6 9 4 5 4
q)max each (where x) _ y
3 8 6 9 4
</pre>
<p>15. subvector grade down (see 7 for up)
</p>
<pre>
   x:1 0 0 1 0 0 1 0
   y:14 12 18 15 13 16 11 17
   {,/x+'&gt;:'x _ y}[&amp;x;y]
2 0 1 5 3 4 7 6
</pre>
<pre>
q)x:1 0 0 1 0 0 1 0
q)y:14 12 18 15 13 16 11 17
q){raze x +' idesc each x _ y}[where x;y]
2 0 1 5 3 4 7 6
</pre>
<p>16. merge x and y by g
</p>
<pre>
   x:5 9 8 7 4 3
   y:10 20 30 40
   g:1 0 1 1 0 0 1 0 1 1
   (x,y)[&lt;&gt;g]
5 10 9 8 20 30 7 40 4 3
</pre>
<pre>
q)x:5 9 8 7 4 3
q)y:10 20 30 40
q)g:1 0 1 1 0 0 1 0 1 1
q)(x,y)[iasc idesc g]
5 10 9 8 20 30 7 40 4 3
</pre>
<p>17. descending ordinals (ranking, all different)
</p>
<pre>
   x:15 16 13 18 14 11 12
   &lt;&gt;x
2 1 4 0 3 6 5
</pre>
<pre>
q)x:15 16 13 18 14 11 12
q)iasc idesc x
2 1 4 0 3 6 5
</pre>
<p>18. sort ascending by internal alphabet
</p>
<pre>
   w:(&quot;once&quot;;&quot;more&quot;;&quot;into&quot;)
   w
(&quot;once&quot;
&quot;more&quot;
&quot;into&quot;&quot;)
   w[&lt;`$w]
(&quot;into&quot;
&quot;more&quot;
&quot;once&quot;)
</pre>
<pre>
q)w:(&quot;once&quot;;&quot;more&quot;;&quot;into&quot;)
q)w[iasc `$w]
&quot;into&quot;
&quot;more&quot;
&quot;once&quot;
q)string asc `$w
&quot;into&quot;
&quot;more&quot;
&quot;once&quot;
</pre>
<p>19. sort character matrix ascending
</p>
<pre>
   m:(&quot;scion&quot;;&quot;icons&quot;;&quot;coins&quot;)
   m
(&quot;scion&quot;
&quot;icons&quot;
&quot;coins&quot;)
   m[&lt;m]
(&quot;coins&quot;
&quot;icons&quot;
&quot;scion&quot;)
</pre>
<pre>
q)m:(&quot;scion&quot;;&quot;icons&quot;;&quot;coins&quot;)
q)m[iasc m]
&quot;coins&quot;
&quot;icons&quot;
&quot;scion&quot;
</pre>
<p>20. is x a permutation
</p>
<pre>
   x:7 _draw -7
   x
0 5 1 6 4 3 2
   x~&lt;&lt;x
1
   x:7 _draw 7
   x
4 3 3 6 0 5 4
   x~&lt;&lt;x
0
</pre>
<pre>
q)x:4 0 2 1 5 3 6
q)x~rank x
1b
q)x:4 3 3 6 0 5 4
q)x~rank x
0b
</pre>
<p>21. rotate infixes of y determined by boolean x to the left one place
</p>
<pre>
   y:&quot;abcdefghij&quot;
   x:1 0 1 0 0 1 1 0 0 0
   y[&lt;x++\x]
&quot;badecfhijg&quot;
</pre>
<pre>
q)y[iasc x + sums x]
&quot;badecfhijg&quot;
</pre>
<p>22. index of first occurrence of minimum of x
</p>
<pre>
   x:5+13 _draw 10
   x
14 12 10 9 6 12 6 11 8 12 6 13 6
   *&lt;x
4
   x?&amp;/x
4
</pre>
<pre>
q)first iasc x
4
q)x?min x
4
</pre>
<p>23. index of first occurrence of maximum of x
</p>
<pre>
   x:5+13 _draw 10
   x
11 10 8 8 8 7 5 9 12 12 10 12 8
   x?|/x
8
   *&gt;x
8
</pre>
<pre>
q)x?max x
8
q)first idesc x
8
</pre>
<p>24. median
</p>
<pre>
   x:10 _draw 100
   x
61 20 51 12 31 51 29 35 17 89
   x@&lt;x
12 17 20 29 31 35 51 51 61 89
   .5*+/x@(&lt;x)@(-_t;_-t:.5*1-#x)
33f
</pre>
<pre>
q).5*sum over x[(iasc x) (neg floor t;floor neg t:.5*1-count x)]
33f
</pre>
<p>25. Doubling quotes
</p>
<pre>
   f:{_ssr[x;&quot;\&quot;&quot;;&quot;\&quot;\&quot;&quot;]}
   a:&quot;Did he say, \&quot;Hello\&quot;?&quot;
   f a
&quot;Did he say, \&quot;\&quot;Hello\&quot;\&quot;?&quot;
</pre>
<pre>
q)f:{ssr[x;&quot;\&quot;&quot;;&quot;\&quot;\&quot;&quot;]}
q)a:&quot;Did he say, \&quot;Hello\&quot;?&quot;
q)f a
&quot;Did he say, \&quot;\&quot;Hello\&quot;\&quot;?&quot;
q)ssr[a;&quot;\&quot;&quot;;2#] /alternative solution emphasizing doubling
&quot;Did he say, \&quot;\&quot;Hello\&quot;\&quot;?&quot;
</pre>
<p>26. insert y "*" after "=" in x
</p>
<pre>
   x:&quot;abc=,d=,fgh=&quot;
   g:&amp;x=&quot;=&quot;
   g
3 6 11
   y:5
   (x,&quot;*&quot;)[(#x)&amp;&lt;(!#x),(y*#g)#g]
&quot;abc=*****,d=*****,fgh=*****&quot;
</pre>
<pre>
q)(x,&quot;*&quot;)[(count x)&amp;iasc (til count x),(y*count g)#g]
&quot;abc=*****,d=*****,fgh=*****&quot;
</pre>
<p>27. insert 0 after indices y of x
</p>
<pre>
   x:&quot;abc,def,gh&quot;
   y:(&amp;x=&quot;,&quot;),#x
   y
3 7 10
   &lt;(!#x),y
0 1 2 3 10 4 5 6 7 11 8 9 12
   #x
10
   (#x)&gt;&lt;(!#x),y
1 1 1 1 0 1 1 1 1 0 1 1 0
</pre>
<pre>
q)(count x)&gt;(iasc (til count x),y)
1111011110110b
</pre>
<p>28. insert g elements h after indices y of x
</p>
<pre>
   x:&quot;abcd=,def=,gh=&quot;
   y:&amp;x=&quot;=&quot;
   y
4 9 13
   g:4
   h:&quot;x&quot;
   a:g*#y
   a
12
   a#y
4 9 13 4 9 13 4 9 13 4 9 13
   (x,a#h)[&lt;(!#x),a#y]
&quot;abcd=xxxx,def=xxxx,gh=xxxx&quot;
</pre>
<pre>
q)(x,a#h)[iasc (til count x),a#y]
&quot;abcd=xxxx,def=xxxx,gh=xxxx&quot;
</pre>
<p>29. insert g elements h before indices y of x
</p>
<pre>
   x:&quot;1234,234,34&quot;
   y:0 5 9
   g:5
   h:&quot;*&quot;
   a:g*#y
   ((a#h),x)[&lt;(a#y),!#x]
&quot;*****1234,*****234,*****34&quot;
</pre>
<pre>
q)((a#h),x)[iasc (a#y),til count x]
&quot;*****1234,*****234,*****34&quot;
</pre>
<p>30. grade up x according to key y
</p>
<pre>
   x:&quot;fig lime&quot;
   y:&quot; abcdefghijklmn&quot;
   y?/:x
6 9 7 0 12 9 13 5
   &lt;y?/:x
3 7 0 2 1 5 4 6
   x[3 7 0 2 1 5 4 6]
&quot; efgiilm&quot;
</pre>
<pre>
q)x[iasc y?/:x]
&quot; efgiilm&quot;
</pre>
<p>31. merge
</p>
<pre>
   x:&quot;egg&quot;
   y:&quot;mrin&quot;
   g:1 0 1 0 1 1 0
   (x,y)[&lt;&lt;g]
&quot;merging&quot;
</pre>
<pre>
q)(x,y)[rank g]
&quot;merging&quot;
</pre>
<p>32. sort ascending indices x according to data y
</p>
<pre>
   x:2 3 4 5 0 1 8 7 6
   y:79 74 78 76 77 75 73 72 71
   x[&lt;y[x]]
8 7 6 1 5 3 4 2 0
</pre>
<pre>
q)x[iasc y[x]]
8 7 6 1 5 3 4 2 0
</pre>
<p>33. sort matrix x on column y
</p>
<pre>
   x:5 6 _draw 100
   x
(37 41 41 72 60 0
91 59 5 19 17 26
24 90 28 63 42 56
75 67 45 14 38 49
85 11 23 61 64 44)
   y:2
   x[;y]
41 5 28 45 23
   &lt;x[;y]
1 4 2 0 3
   x[&lt;x[;y];]
(91 59 5 19 17 26
85 11 23 61 64 44
24 90 28 63 42 56
37 41 41 72 60 0
75 67 45 14 38 49)
</pre>
<pre>
q)x[iasc x[;y]]
91 59 5  19 17 26
85 11 23 61 64 44
24 90 28 63 42 56
37 41 41 72 60 0
75 67 45 14 38 49
</pre>
<p>34. choose grading direction
</p>
<pre>
   x:10 _draw 100
   x
30 45 97 77 35 49 87 82 79 8
   y:1
   &lt;x*1 -1[y]
2 6 7 8 3 5 1 4 0 9
   y:0
   &lt;x*1 -1[y]
9 0 4 1 5 3 8 7 6 2
</pre>
<pre>
q)iasc x*1 -1[1]
2 6 7 8 3 5 1 4 0 9
q)iasc x*1 -1[0]
9 0 4 1 5 3 8 7 6 2
/q)parse &quot;x*1 -1[1]&quot;
/*
/`x
/(1 -1;1)
/q)parse &quot;iasc x*1 -1[0]&quot;
/&lt;:
/(*;`x;(1 -1;0))
/
/1 -1[0] is 1 and 1 -1[1] is -1 or (1;-1)[0] and (1;-1)[1]
</pre>
<p>35. sort ascending
</p>
<pre>
   x:10 _draw 100
   x
84 63 31 42 95 58 9 37 84 39
   &lt;x
6 2 7 9 3 5 1 0 8 4
   x[&lt;x]
9 31 37 39 42 58 63 84 84 95
</pre>
<pre>
q)iasc x
6 2 7 9 3 5 1 0 8 4
q)x[iasc x]
9 31 37 39 42 58 63 84 84 95
q)asc x
`s#9 31 37 39 42 58 63 84 84 95
</pre>
<p>36. sort y on x
</p>
<pre>
   x:6 _draw 10
   y:6 _draw 20
   x
9 2 3 1 9 3
   y
7 8 17 11 16 6
   y[&lt;x]
11 8 17 6 7 16
</pre>
<pre>
q)y[iasc x]
11 8 17 6 7 16
</pre>
<p>37. invert permutation (the inverse puts y in ascending order)
</p>
<pre>
   x: 7 _draw -7
   x
5 3 2 0 6 4 1
   &lt;x
3 6 2 1 5 0 4
check:
   x[&lt;x]
0 1 2 3 4 5 6
</pre>
<pre>
q)iasc x
3 6 2 1 5 0 4
q)x[iasc x]
0 1 2 3 4 5 6
</pre>
<p>38. sort matrix descending
</p>
<pre>
   x:5 6 _draw 3
   x
(0 0 0 1 0 1
1 0 2 2 0 1
0 2 1 1 1 1
0 0 0 1 1 2
1 2 2 0 2 1)
   x[&lt;x]
(0 0 0 1 0 1
0 0 0 1 1 2
0 2 1 1 1 1
1 0 2 2 0 1
1 2 2 0 2 1)
</pre>
<pre>
q)x[iasc x]
0 0 0 1 0 1
0 0 0 1 1 2
0 2 1 1 1 1
1 0 2 2 0 1
1 2 2 0 2 1
   y:&quot;abcde&quot;[5 6 _draw 5]
   y
(&quot;dcdbed&quot;
&quot;aaaaab&quot;
&quot;dcdbdc&quot;
&quot;baaace&quot;
&quot;eedbec&quot;)
   y[&lt;y]
(&quot;aaaaab&quot;
&quot;baaace&quot;
&quot;dcdbdc&quot;
&quot;dcdbed&quot;
&quot;eedbec&quot;)
</pre>
<p>39. reverse infixes in x of lengths y
</p>
<pre>
   x:11+!8
   x
11 12 13 14 15 16 17 18
   y:3 3 2
   x[|&gt;+\(!#x)_lin il y]
13 12 11 16 15 14 18 17
</pre>
<pre>
q)il:{(count x)#sums 0,x}
q)x:11+til 8
q)y:3 3 2
q)x[reverse idesc  sums(til count x) in il y]
13 12 11 16 15 14 18 17
</pre>
<p>40. reverse infixes in x starting at indices y
</p>
<pre>
   x:1 0 1 0 0 1 0 0 0 1
   y:1 2 3 4 5 6 7 8 9 10
   +\x
1 1 2 2 2 3 3 3 3 4
   &gt;+\x
9 5 6 7 8 2 3 4 0 1
   |&gt;+\x
1 0 4 3 2 8 7 6 5 9
   y[|&gt;+\x]
2 1 5 4 3 9 8 7 6 10
</pre>
<pre>
q)y[reverse idesc sums x]
2 1 5 4 3 9 8 7 6 10
</pre>
<p>41. indices of ones in boolean vector x
</p>
<pre>
   x:0 0 1 0 1 0 0 0 1 0
   &amp;x
2 4 8
</pre>
<pre>
q)where x
2 4 8
</pre>
<p>42. move all blanks to end of text
</p>
<pre>
   x:&quot; sign if i cant &quot;
   x[&lt;&quot; &quot;=x]
&quot;significant &quot;
</pre>
<pre>
q)x[iasc &quot; &quot;=x]
&quot;significant     &quot;
</pre>
<p>43. move elements of x with characteristic y to beginning
</p>
<pre>
   x:&quot;mjinase&quot;
   y:0 1 0 0 1 1 0
   x[&gt;y]
&quot;jasmine&quot;
</pre>
<pre>
q)x[idesc y]
&quot;jasmine&quot;
</pre>
<p>44. sort descending
</p>
<pre>
   x:8 _draw 10
   x
3 5 0 4 5 2 4 5
   x[&gt;x]
5 5 5 4 4 3 2 0
</pre>
<pre>
q)x[idesc x]
5 5 5 4 4 3 2 0
q)desc x
5 5 5 4 4 3 2 0
</pre>
<p>45. binary representation of positive integer
</p>
<pre>
   x:16
   2 _vs x
1 0 0 0 0
   x:20
   2 _vs x
1 0 1 0 0
</pre>
<pre>
/q has sv but not vs?
/q)2 sv 1 0 0 0 0
/16
/not quite the same
q)0b vs 16
00000000000000000000000000010000b
q)0b vs 16h
0000000000010000b
q)0x0 vs 16
0x00000010
q)0x0 vs 16h
0x0010
</pre>
<p>46. transposed formatted integers 1 through x
</p>
<pre>
   x:15
   q:10 _vs 1+!x
   q
(0 0 0 0 0 0 0 0 0 1 1 1 1 1 1
1 2 3 4 5 6 7 8 9 0 1 2 3 4 5)
   &quot;0123456789&quot;[q]
(&quot;000000000111111&quot;
&quot;123456789012345&quot;)
</pre>
<p>47. polynomial with roots x
</p>
<pre>
   x:1 -6 8
   {(x,0)-y*0,x}/1,x
1 -3 -46 48
</pre>
<pre>
q){(x,0)-y*0,x} over 1,x
1 -3 -46 48
</pre>
<pre>
   x:2 4
   {(x,0)-y*0,x}/1,x
1 -6 8
   x:1 2
   {(x,0)-y*0,x}/1,x
1 -3 2
   x:1 2 3
   {(x,0)-y*0,x}/1,x
1 -6 11 -6
</pre>
<pre>
q)x:2 4
q){(x,0)-y*0,x} over 1,x
1 -6 8
q)x:1 2
q){(x,0)-y*0,x} over 1,x
1 -3 2
q)x:1 2 3
q){(x,0)-y*0,x} over 1,x
1 -6 11 -6
/monadic adverb '/' should be spelled out as 'over'
</pre>
<p>48. saddle point indices
</p>
<pre>
   x:(4 2 4 4 2 4
&gt; 5 3 5 5 3 5
&gt; 4 2 4 4 2 4
&gt; 1 2 4 4 2 4
&gt; 5 3 5 5 3 5
&gt; 4 2 4 4 2 4)
</pre>
<p>48a. row minimum
</p>
<pre>
   rn:{x='&amp;/'x}
   rn x
(0 1 0 0 1 0
0 1 0 0 1 0
0 1 0 0 1 0
1 0 0 0 0 0
0 1 0 0 1 0
0 1 0 0 1 0)
</pre>
<pre>
q)rn:{x=' min each x}
q)rn x
010010b
010010b
010010b
100000b
010010b
010010b
</pre>
<p>48b. column maximum
</p>
<pre>
   cx:{x=\:|/x}
   cx x
(0 0 0 0 0 0
1 1 1 1 1 1
0 0 0 0 0 0
0 0 0 0 0 0
1 1 1 1 1 1
0 0 0 0 0 0)
</pre>
<pre>
q)cx:{x=\:max x}
q)cx x
000000b
111111b
000000b
000000b
111111b
000000b
</pre>
<p>48c. minmax of rows and columns
</p>
<pre>
   minmax:{(rn x)&amp;(cx x)}
   minmax x
(0 0 0 0 0 0
0 1 0 0 1 0
0 0 0 0 0 0
0 0 0 0 0 0
0 1 0 0 1 0
0 0 0 0 0 0)
</pre>
<pre>
q)minmax:{(rn x)&amp;(cx x)}
q)minmax x
000000b
010010b
000000b
000000b
010010b
000000b
</pre>
<p>48d. locate 1s in ravel of Boolean matrix
</p>
<pre>
   ones:{&amp;,/minmax x}
   ones x
7 10 25 28
</pre>
<pre>
q)ones:{where raze minmax x}
q)ones x
7 10 25 28
</pre>
<p>48e. saddle point indices
</p>
<pre>
   sp:{(^x) _vs ones x}
   sp x
(1 1 4 4
1 4 1 4)
/vs is missing (see above)
</pre>
<p>49. hexadecimal from decimal
</p>
<pre>
   hex:&quot;0123456789abcdef&quot;
   hd:{+hex[16 _vs x]}
   x:10 12 19 1 28 100
   hd x
(&quot;0a&quot;
&quot;0c&quot;
&quot;13&quot;
&quot;01&quot;
&quot;1c&quot;
&quot;64&quot;)
   y:10 12 19 1 28 300
   hd y
(&quot;00a&quot;
&quot;00c&quot;
&quot;013&quot;
&quot;001&quot;
&quot;01c&quot;
&quot;12c&quot;)
</pre>
<pre>
/not quite the same
q)hd:{hex[16 vs/:x]}
q)hd 10
,&quot;a&quot;
q)hd 20
&quot;14&quot;
q)x:10 12 19 1 28 100
q)hd x
,&quot;a&quot;
,&quot;c&quot;
&quot;13&quot;
,&quot;1&quot;
&quot;1c&quot;
&quot;64&quot;
q)y:10 12 19 1 28 300
q)hd y
,&quot;a&quot;
,&quot;c&quot;
&quot;13&quot;
,&quot;1&quot;
&quot;1c&quot;
&quot;12c&quot;
</pre>
<p>50. connectivity list from connectivity matrix
</p>
<pre>
   m:(1 0 1;1 0 1)
   m
(1 0 1
1 0 1)
   ,/m
1 0 1 1 0 1
   &amp;,/m
0 2 3 5
   (^m)_vs &amp;,/m
(0 0 1 1
0 2 0 2)
   lm:{(^x)_vs &amp;,/x}
   lm m
(0 0 1 1
0 2 0 2)
</pre>
<p>51. indices
</p>
<pre>
   ix:{(^x)_vs!*/^x}
   ix[!6]
,0 1 2 3 4 5
   ix[2 3#!6]
(0 0 0 1 1 1
0 1 2 0 1 2)
   ix[2 3 2#!12]
(0 0 0 0 0 0 1 1 1 1 1 1
0 0 1 1 2 2 0 0 1 1 2 2
0 1 0 1 0 1 0 1 0 1 0 1)
</pre>
<p>52. truth table of order x
</p>
<pre>
   tt:{2 _vs&#160;!_2^x}
   tt 1
,0 1
   tt 2
(0 0 1 1
0 1 0 1)
   tt 3
(0 0 0 0 1 1 1 1
0 0 1 1 0 0 1 1
0 1 0 1 0 1 0 1)
</pre>
<p>53. decimal digits from integer
</p>
<pre>
   dd:{10 _vs x}
   dd 2001
2 0 0 1
   dd 123456789
1 2 3 4 5 6 7 8 9
</pre>
<pre>
/not quite the same
q){(&quot;i&quot;$string x)-48} 2001	/C. Skelton.
2 0 0 1
q){(&quot;i&quot;$string x)-48} 1234567890
1 2 3 4 5 6 7 8 9 0
</pre>
<p>54. represent x in base y
</p>
<pre>
   x:256
   y:16
   y _vs x
1 0 0
   x:36
   y:2
   y _vs x
1 0 0 1 0 0
   x:123
   y:10
   y _vs x
1 2 3
</pre>
<pre>
q)0x0 vs 256
0x00000100
q)0b vs 36
00000000000000000000000000100100b
q)0b vs 36h
0000000000100100b
</pre>
<p>55. indices in x containing elements in y
</p>
<pre>
   x:(3 7 8;2 5 9)
   y:(3 1 6;8 9 2)
   (^x)_vs &amp;(,/x) _lin\: ,/y
(0 0 1 1
0 2 0 2)
</pre>
<p>56. hexadecimal from decimal characters
</p>
<pre>
   hex:&quot;0123456789abcdef&quot;
   x:&quot; abcdef&quot;
   _ic x
32 97 98 99 100 101 102
q)&quot;i&quot;$x
32 97 98 99 100 101 102
   16 _vs _ic x
(2 6 6 6 6 6 6
0 1 2 3 4 5 6)
   hex[16 _vs _ic x]
(&quot;2666666&quot;
&quot;0123456&quot;)
   +hex[16 _vs _ic x]
(&quot;20&quot;
&quot;61&quot;
&quot;62&quot;
&quot;63&quot;
&quot;64&quot;
&quot;65&quot;
&quot;66&quot;)
   &quot; &quot;,'+hex[16 _vs _ic x]
(&quot; 20&quot;
&quot; 61&quot;
&quot; 62&quot;
&quot; 63&quot;
&quot; 64&quot;
&quot; 65&quot;
&quot; 66&quot;)
   ,/&quot; &quot;,'+hex[16 _vs _ic x]
&quot; 20 61 62 63 64 65 66&quot;
</pre>
<pre>
q)16 vs/: &quot;i&quot;$x
2 0
6 1
6 2
6 3
6 4
6 5
6 6
q)hex[16 vs/: &quot;i&quot;$x]
&quot;20&quot;
&quot;61&quot;
&quot;62&quot;
&quot;63&quot;
&quot;64&quot;
&quot;65&quot;
&quot;66&quot;
q)&quot; &quot;,'hex[16 vs/: &quot;i&quot;$x]
&quot; 20&quot;
&quot; 61&quot;
&quot; 62&quot;
&quot; 63&quot;
&quot; 64&quot;
&quot; 65&quot;
&quot; 66&quot;
q)raze &quot; &quot;,'hex[16 vs/: &quot;i&quot;$x]
&quot; 20 61 62 63 64 65 66&quot;
   x:&quot;GOLDEN&quot;
   ,/&quot; &quot;,'+hex[16 _vs _ic x]
&quot;47 4f 4c 44 45 4e&quot;
q)raze &quot; &quot;,'hex[16 vs/: &quot;i&quot;$x]
&quot; 47 4f 4c 44 45 4e&quot;
</pre>
<p>57. vector from date
</p>
<pre>
   _t
-1155413254
   _gtime _t
19980522 35236
   *_gtime _t
19980522
   100000 100 100 _vs *_gtime _t
1998 5 22
</pre>
<pre>
/not quite the same as above
q)dt:gtime .z.Z
q)(dt.year;dt.mm;dt.dd)
2007 7 21
</pre>
<p>58. pair each element of&#160;!x with each element of&#160;!y
</p>
<pre>
   x:3
   y:4
(x,y)_vs&#160;!x*y
(0 0 0 0 1 1 1 1 2 2 2 2
0 1 2 3 0 1 2 3 0 1 2 3)
</pre>
<p>59. truth table of order x (see 52)
</p><p>60. truth table of order x (see 52)
</p><p>61. cyclic counter, repeating 1 through n
</p>
<pre>
   x:1+!10
   y:8
   1+x!y
2 3 4 5 6 7 8 1 2 3
</pre>
<pre>
q)x:1+til 10
q)y:8
q)1+x mod y
2 3 4 5 6 7 8 1 2 3
</pre>
<p>62. integer and fractional parts of positive x
</p>
<pre>
   x:12.3 23.4 5.33 8.999
   if:{(_ x),'x-_ x}
   if x
((12;0.3)
(23;0.4)
(5;0.33)
(8;0.999))
</pre>
<pre>
q)iif:{(floor x),'x-floor x}
q)iif x
12 0.3
23 0.4
5  0.33
8  0.999
/if is an iffy name
</pre>
<p>63. represent x in radix 10 100 1000
</p>
<pre>
   x:123456
   10 100 1000 _vs x
1 23 456
   x:123456789
   10 100 1000 _vs x
4 56 789
</pre>
<p>64. represent integer time hhmmss as character time, items separated by colons
64a. local time as integer of form hhmmss
</p>
<pre>
   x:_ltime _t
   x
45628
   q:2 _ $ 1000 _sv 100 _vs 1000000 + x
   q
&quot;04056028&quot;
   @[q;2 5;:;&quot;:&quot;]
&quot;04:56:28&quot;
</pre>
<pre>
/not quite the same as above
q)dt:.z.Z                                                                       q)dt.time
00:38:25.148
q)string dt.time
&quot;00:38:25.148&quot;
</pre>
<p>65. represent integer date in form yyyymmdd as character date, parts separated by "/"
</p>
<pre>
   x:*_ltime _t
   x
19980521
   1000 _sv 10000 100 100 _vs x
1998005021
   q:$1000 _sv 10000 100 100 _vs x
   q
&quot;1998005021&quot;
   @[q;4 7;:;&quot;/&quot;]
&quot;1998/05/21&quot;
</pre>
<pre>
/not quite the same as above
q)@[s;(s:string &quot;d&quot;$.z.Z)ss&quot;.&quot;;:;&quot;/&quot;]
&quot;2007/07/21&quot;
q)s
&quot;2007.07.21&quot;
</pre>
<p>66. selection by encoded list
</p>
<pre>
   x:1 0 1
   &quot;abcdefgh&quot;[2 _sv x]
&quot;f&quot;
   x:0 0 0
   &quot;abcdefgh&quot;[2 _sv x]
&quot;a&quot;
   x:1 1 1
   &quot;abcdefgh&quot;[2 _sv x]
&quot;h&quot;
</pre>
<pre>
q)&quot;abcdefgh&quot;[2 sv x]
</pre>
<p>67. Extrapolated value of abscissa x and ordinate y at g
</p>
<pre>
   x:-1 0 1
   y:1 0 1.0 / y ~ x^2
   g:10
   |!#x
2 1 0
   x^/:|!#x
(1 0 1.0
-1 0 1.0
1 1 1.0)
   y _lsq x^/:|!#x
1 0 4.440892e-016
   g _sv y _lsq x^/:|!#x
100.0
   g:5
   g _sv y _lsq x^/:|!#x
25.0
</pre>
<pre>
q)x:-1 0 1
q)y:1 0 1.0 / y ~ x^2
q)g:10
q)reverse key count x
2 1 0
q)x xexp/: reverse key count x
1  0 1
-1 0 1
1  1 1
q)(enlist y) lsq x xexp/: reverse key count x
1 0 4.440892e-16
q)g sv raze(enlist y) lsq x xexp/: reverse key count x
100f
q)g:5
q)g sv raze(enlist y) lsq x xexp/: reverse key count x
25f
</pre>
<p>68. not relevant
</p><p>69. value of ascending polynomial coefficients y at points x
</p>
<pre>
   x:-1 0 2
   y: 4 0 5 1
   x _sv\: y
-8 1 43
</pre>
<pre>
q)x sv\:y
-8 1 43
</pre>
<p>70. remove duplicate rows
</p>
<pre>
   x:(&quot;to&quot;
&quot;be&quot;
&quot;or&quot;
&quot;not&quot;
&quot;to&quot;
&quot;be&quot;)
  &#160;?x
(&quot;to&quot;
&quot;be&quot;
&quot;or&quot;
&quot;not&quot;)
</pre>
<pre>
q)distinct x
&quot;to&quot;
&quot;be&quot;
&quot;or&quot;
&quot;not&quot;
</pre>
<p>71. connectivity matrix from connectivity list
</p>
<pre>
   y
(0 1
0 2
1 0
1 2
2 2)
   x
3
   x _sv/:y
1 2 3 5 8
   (!9)_lin x _sv/:y
0 1 1 1 0 1 0 0 1
   (x,x)#(!x*x)_lin x _sv/:y
(0 1 1
1 0 1
0 0 1)
</pre>
<pre>
q)y:(0 1;0 2;1 0;1 2;2 2)
q)x:3
q)x sv/:y
1 2 3 5 8
q)(til 9)in x sv/:y
011101001b
</pre>
<p>72. encode date as integer
</p>
<pre>
   x:*_ltime _t
   x
19980522
</pre>
<pre>
q)s:string &quot;d&quot;$.z.Z
q)s
&quot;2007.07.21&quot;
q)s[where not s=&quot;.&quot;]
&quot;20070721&quot;
q)&quot;i&quot;$s[where not s=&quot;.&quot;]
50 48 48 55 48 55 50 49
q)&quot;I&quot;$s[where not s=&quot;.&quot;]
20070721
</pre>
<p>73. remove trailing blanks
</p>
<pre>
   x:&quot;trailing blanks &quot;
</pre>
<p>73a. negative count of trailing blanks
</p>
<pre>
   nctb:{-+/&amp;\|&quot; &quot;=x}
   nctb x
-4
   rtb:{(nctb x)_ x}
   rtb x
&quot;trailing blanks&quot;
</pre>
<pre>
q)x:&quot;trailing blanks    &quot;
q)nctb:{neg sum mins reverse &quot; &quot;=x}
q)nctb x
-4
q)rtb:{(nctb x)_x}
q)rtb x
&quot;trailing blanks&quot;
</pre>
<p>74. number of days in month x of Gregorian year y (ly from 463)
</p>
<pre>
   x:1
  &#160;:[2=x
&gt; 28+ly y
&gt; (0,12#7#31 30)[x]]
31
   x:2
  &#160;:[2=x
&gt; 28+ly y
&gt; (0,12#7#31 30)[x]]
29
</pre>
<pre>
q)ly:{(sum 0=x mod/:4 100 400)mod 2}
q)x:1
q)$[2=x;28+ly y;(0,12#7#31 30)[x]]
31
q)x:2
q)$[2=x;28+ly y;(0,12#7#31 30)[x]]
29
</pre>
<p>75. decimal from hexadecimal
</p>
<pre>
   x:(&quot;ff&quot;;&quot;a9&quot;;&quot;8ac&quot;;&quot;ffff&quot;)
   x
(&quot;ff&quot;
&quot;a9&quot;
&quot;8ac&quot;
&quot;ffff&quot;)
   &quot;0123456789abcdef&quot;?/:&quot;ff&quot;
15 15
   &quot;0123456789abcdef&quot;?/:/:x
(15 15
10 9
8 10 12
15 15 15 15)
   16 _sv/: &quot;0123456789abcdef&quot;?/:/:x
255 169 2220 65535
</pre>
<pre>
/not quite the same
q)16 sv'hex?/:x
255 169 2220 65535
</pre>
<p>76. justify right
</p>
<pre>
  x:&quot;trailing blanks &quot;
</pre>
<p>76a. negative count of trailing blanks
</p>
<pre>
   nctb:{-+/&amp;\|&quot; &quot;=x}
   nctb x
-4
   rj:{(nctb x)!x}
   rj x
&quot; trailing blanks&quot;
   x:(&quot;a &quot;;&quot;bc &quot;;&quot;d e &quot;;&quot;fg h &quot;;&quot;ij kl &quot;;&quot;mnopqr&quot;)
   x
(&quot;a &quot;
&quot;bc &quot;
&quot;d e &quot;
&quot;fg h &quot;
&quot;ij kl &quot;
&quot;mnopqr&quot;)
   rj'x
(&quot; a&quot;
&quot; bc&quot;
&quot; d e&quot;
&quot; fg h&quot;
&quot; ij kl&quot;
&quot;mnopqr&quot;)
</pre>
<pre>
q)nctb:{neg sum mins reverse &quot; &quot;=x}
q)rj:{(nctb x)rotate x}
q)x:&quot;trailing blanks    &quot;
q)rj x
&quot;    trailing blanks&quot;
q)x:(&quot;a &quot;;&quot;bc &quot;;&quot;d e &quot;;&quot;fg h &quot;;&quot;ij kl &quot;;&quot;mnopqr&quot;)
q)x
&quot;a &quot;
&quot;bc &quot;
&quot;d e &quot;
&quot;fg h &quot;
&quot;ij kl &quot;
&quot;mnopqr&quot;
q)rj'x
''
q)rj'[x]
&quot; a&quot;
&quot; bc&quot;
&quot; d e&quot;
&quot; fg h&quot;
&quot; ij kl&quot;
&quot;mnopqr&quot;
</pre>
<p>77. present value of cash flows c at times t and discount rate d
Example: a 3-year bond with an annual 10% coupon and discount rate of 0.9
</p>
<pre>
   pv:{[c;t;d]+/c*d^t}
   c:0.1 0.1 1.1
   t:1 2 3
   d:0.9
   pv[c;t;d]
0.9729
It is better to use current prices to derive a discount function
   pv:{[c;t;d]+/c*d[t]}
   pv[c;t;{[t] 0.9^t}]
0.9729
It is even more efficient to use the discount values directly
   d: 0.9^0 1 2 3
   d
1 0.9 0.81 0.729
   pv[c;t;d]
0.9729
</pre>
<pre>
q)c:0.1 0.1 1.1
q)t:1 2 3
q)d:0.9
q){[c;t;d]sum c*d xexp t}
q)pv[c;t;d]
0.9729
</pre>
<p>78. number from alphanumeric
</p>
<pre>
   x:&quot;1998 51&quot;
   . x
1998 51
   3 + . x
2001 54
</pre>
<pre>
q)parse x
1998 51
q)3+parse x
2001 54
</pre>
<p>79. index (1-origin) of first non-blank, counting from rear
</p>
<pre>
   x:&quot;blanks at end &quot;
   (&quot; &quot;=x)
0 0 0 0 0 0 1 0 0 1 0 0 0 1 1 1
   (&quot; &quot;=x) _sv 1
4
</pre>
<p>80. scattered indexing
</p>
<pre>
   x:2 3 4# _ci 97+!24
   x
((&quot;abcd&quot;
&quot;efgh&quot;
&quot;ijkl&quot;)
(&quot;mnop&quot;
&quot;qrst&quot;
&quot;uvwx&quot;))
   x ./:(0 0 0;1 1 3;1 2 2)
&quot;atw&quot;
</pre>
<p>81. raveled index from general index
</p>
<pre>
   x:2 3 4# _ci 97+!24
   x[1;1;3]
&quot;t&quot;
   x
2 3 4
   2 3 4 _sv 1 1 3
19
   ,//x
&quot;abcdefghijklmnopqrstuvwx&quot;
   (,//x)[19]
&quot;t&quot;
</pre>
<p>82. future value of cash flows x at interest rate y
</p>
<pre>
   x:10 15 20 25
   y:5
   +/x*(1+y%100)^|!#x
74.11375
   fv:{+/x*(1+y%100)^|!#x}
   fv[x;y]
74.11375
</pre>
<pre>
q)sum x*xexp[1+y%100;reverse til count x]
74.11375
q)sum x*(1+y%100)xexp(reverse til count x)
74.11375
q)fv:{sum x*(1+y%100)xexp(reverse til count x)}
q)fv[x;y]
74.11375
</pre>
<p>83. see 69
</p><p>84. scalar from boolean vector
</p>
<pre>
   x:1 0 0 1 1 1 0 1
   2 _sv x
157
</pre>
<pre>
q)2 sv x
157
</pre>
<p>85. is matrix x antisymmetric
</p>
<pre>
   x:( 0 -7 1
7 0 -4
-1 4 0)
   x~-+x
1
</pre>
<pre>
q)x~neg flip x
1b
</pre>
<p>86. is matrix x symmetric
</p>
<pre>
   x:(0 4 7 1
4 8 6 4
7 6 2 0
1 4 0 6)
   x~+x
1
</pre>
<pre>
q)x~flip x
1b
</pre>
<pre>
   x:4 4 _draw 10
   x
(6 6 3 3
9 7 9 4
4 7 9 9
4 7 8 9)
   x~+x
0
</pre>
<pre>
q)x~flip x
0b
</pre>
<p>87. number of decimals (maximum 7)
</p>
<pre>
   nd:{:[1=#x;0;-2+#x]}
   ff:{$x-_ x}
   ff 6.567
&quot;0.567&quot;
   nd ff 1.234
3
   nd ff 1234
0
nd ff 78.1234567
7
nd ff 78.12345678
7
&quot;0.1234568&quot;
</pre>
<pre>
q)nd:{$[1=count x;0;-2+count x]}
q)ff:{string x-floor x}
q)ff 6.567
&quot;0.567&quot;
q)nd ff 1.234
3
q)nd ff 1234
0
q)nd ff 78.1234567
7
q)nd ff 78.12345678
7
</pre>
<p>88. name variable according to x
</p>
<pre>
   x:&quot;test&quot;
   y:2 3#!6
. &quot;var&quot;,($x),&quot;:y&quot;
vartest
(0 1 2
3 4 5)
</pre>
<pre>
q)eval parse &quot;var&quot;,x,&quot;:y&quot;
0 1 2
3 4 5
</pre>
<pre>
   x:123
. &quot;var&quot;,($x),&quot;:y&quot;
var123
(0 1 2
3 4 5)
</pre>
<pre>
q)eval parse &quot;var&quot;,(string x),&quot;:y&quot;
0 1 2
3 4 5
</pre>
<p>93. numbers from alphanumeric matrix
</p>
<pre>
   x:4 3#&quot; 1 12 0.5&quot;
   x
(&quot; 1&quot;
&quot; 12&quot;
&quot; &quot;
&quot;0.5&quot;)
   x=&quot; &quot;
(1 1 0
1 0 0
1 1 1
0 0 0)
&amp;/'x=&quot; &quot;
0 0 1 0
&amp;&amp;/'x=&quot; &quot;
,2
   z:.:'x
   z
(1;12;;0.5)
   @[z;,2;:;0]
(1;12;0;0.5)
Putting it all together
   @[.:'x;&amp;&amp;/'x=&quot; &quot;;:;0]
(1;12;0;0.5)
q)x:4 3#&quot;  1 12   0.5&quot;
q)x
&quot;  1&quot;
&quot; 12&quot;
&quot;   &quot;
&quot;0.5&quot;
</pre>
<pre>
q)x=&quot; &quot;
110b
100b
111b
000b
q)min each x=&quot; &quot;
0010b
q)
q)where min each x=&quot; &quot;
,2
q)z:.:'x
''
q)z:parse x
'type
q)z:parse each x
q)z
1
12
::
0.5
q)@[z;,2;:;0]
',
q)@[z;enlist 2;:;0]
1
12
0
0.5
q)@[parse each x;where min each x=&quot; &quot;;:;0]
1
12
0
0.5
But there may be no all-blank rows
   y=:4 3#&quot; 1 123450.5&quot;
   y
(&quot; 1&quot;
&quot; 12&quot;
&quot;345&quot;
&quot;0.5&quot;)
@[.:'y;&amp;&amp;/'y=&quot; &quot;;:;0]
(1;12;345;0.5)
na:{@[.:'x;&amp;&amp;/'x=&quot; &quot;;:;0]}
q)y:4 3#&quot;  1 123450.5&quot;
q)y
&quot;  1&quot;
&quot; 12&quot;
&quot;345&quot;
&quot;0.5&quot;
q)@[parse each y;where min each y=&quot; &quot;;:;0]
1
12
345
0.5
q)na:{@[parse each x;where min each x=&quot; &quot;;:;0]}
q)na y
1
12
345
0.5
</pre>
<p>94. number from alphanumeric x, default y
</p>
<pre>
   x:&quot;&quot;
   y:&quot;-1&quot;
   .((x~&quot;&quot;)#&quot;y&quot;),x
&quot;-1&quot;
   x:&quot;234.5&quot;
   .((x~&quot;&quot;)#&quot;y&quot;),x
234.5
</pre>
<pre>
q)na:{[x;y]$[x~&quot;&quot;;parse y;parse x]}
q)na[&quot;&quot;;&quot;-1&quot;]
-1
q)na[&quot;123&quot;;&quot;-1&quot;]
123
</pre>
<p>95. numeric from proper alphanumeric nonnegative integer
</p>
<pre>
   x:&quot;123 438&quot;
   d:&quot;0123456789&quot;
   1 _ . &quot;0 &quot;,((#x)*&amp;/x _lin d)#x
123 438
   x:&quot;123 45a 789&quot;
   1 _ . &quot;0 &quot;,((#x)*&amp;/x _lin d)#x
0
</pre>
<pre>
q)x:&quot;123 438&quot;
q)eval parse each  &quot; &quot;vs x
123 438
</pre>
<p>96. conditional execution
</p>
<pre>
   @[+/;!6;:]
0 15
</pre>
<pre>
q)@[sum;til 6;:]
15
q)@[+/;til 6;:]
15
</pre>
<pre>
/XXX difference between k4/q and older k?
@[+/;&quot;abc&quot;;:]
(1;&quot;type&quot;)
</pre>
<p>98. execute rows of character matrix
</p>
<pre>
   x1:4
   x2:9
   x:2 5#&quot;y1:x1y2:x2&quot;
   x
(&quot;y1:x1&quot;
&quot;y2:x2&quot;)
   .:'x
(;)
   y1
4
   y2
9
</pre>
<pre>
q)x1:4
q)x2:9
q)x:2 5#&quot;y1:x1y2:x2&quot;
q)x
&quot;y1:x1&quot;
&quot;y2:x2&quot;
q)parse each x
: `y1 `x1
: `y2 `x2
q)eval parse each x
': Bad file descriptor
q)eval each parse each x
4 9
</pre>
<p>99. numeric vector from evaluating rows of character matrix
</p>
<pre>
   x:2 5#&quot;1+2 41+3 6&quot;
   x
(&quot;1+2 4&quot;
&quot;1+3 6&quot;)
   .:'x
(3 5
4 7)
</pre>
<pre>
q)parse each x
+ 1 2 4
+ 1 3 6
q)eval each parse each x
3 5
4 7
,/.:'x
3 5 4 7
q)raze eval each parse each x
3 5 4 7
</pre>
<p>100. indexing arbitrary rank array
</p>
<pre>
   x:2 3 4 5#&#160;! 120
   x[1]
((60 61 62 63 64
65 66 67 68 69
70 71 72 73 74
75 76 77 78 79)
(80 81 82 83 84
85 86 87 88 89
90 91 92 93 94
95 96 97 98 99)
(100 101 102 103 104
105 106 107 108 109
110 111 112 113 114
115 116 117 118 119))
   x[0;0]
(0 1 2 3 4
5 6 7 8 9
10 11 12 13 14
15 16 17 18 19)
   x[0;0;0]
0 1 2 3 4
   x[0;0;0;0]
0
</pre>
<p>101. sum numbers in character matrix
</p>
<pre>
   x:$!5
   x
(,&quot;0&quot;
,&quot;1&quot;
,&quot;2&quot;
,&quot;3&quot;
,&quot;4&quot;)
+/ .:' x
10
</pre>
<pre>
q)sum parse each x
10
</pre>
<p>104. date ascending format
</p>
<pre>
1 _ ,/&quot;.&quot;,/:$|.:'0 4 6 _ $* _ltime _t
&quot;25.5.1998&quot;
</pre>
<pre>
/not quite the same as above
q)raze string each(dt.dd;&quot;.&quot;;dt.mm;&quot;.&quot;;dt.year)
&quot;21.7.2007&quot;
q)raze string each(dt.year;&quot;.&quot;;dt.mm;&quot;.&quot;;dt.dd)
&quot;2007.7.21&quot;
</pre>
<p>105. current time of 12-hour clock (AM &amp; PM)
</p>
<pre>
   y:_t
   y
-1155069892
   x:*|_ltime y
   x
201508
hms:{1 _,/&quot;:&quot;,/:1 _'$100+100 _vs x!120000}
hms x
&quot;08:15:08&quot;
ap:{&quot;AP&quot;[115959&lt;x],&quot;M&quot;}
ap x
&quot;PM&quot;
hm:{{(hms x),&quot; &quot;,ap x}[*|_ltime x]}
Ordinarily one would use _t as the argument to hm
hm x
&quot;08:15:08 PM&quot;
</pre>
<pre>
q)a:01:58:57
q)p:13:59:59
q)hm:{raze string (x;x-12*3600)[11:59:59&lt;x],&quot; &quot;,(&quot;AP&quot;[11:59:59&lt;x],&quot;M&quot;)}
q)hm a
&quot;01:58:57 AM&quot;
q)hm p
&quot;01:59:59 PM&quot;
</pre>
<p>106. leading zeros for positive integers x in field width y
</p>
<pre>
   x:10 _draw 40
   x
37 36 17 38 29 4 31 12 35 25
   z:$:'x+(y-1){x*10}/10
   z
(&quot;1037&quot;
&quot;1036&quot;
&quot;1017&quot;
&quot;1038&quot;
&quot;1029&quot;
&quot;1004&quot;
&quot;1031&quot;
&quot;1012&quot;
&quot;1035&quot;
&quot;1025&quot;)
u:1 _/: z
u
(&quot;037&quot;
&quot;036&quot;
&quot;017&quot;
&quot;038&quot;
&quot;029&quot;
&quot;004&quot;
&quot;031&quot;
&quot;012&quot;
&quot;035&quot;
&quot;025&quot;)
</pre>
<pre>
q)x:37 36 17 38 29 4 31 12 35 25
q)z:string each x+(y-1){x*10}/10
q)u:1_/:z
q)u
&quot;037&quot;
&quot;036&quot;
&quot;017&quot;
&quot;038&quot;
&quot;029&quot;
&quot;004&quot;
&quot;031&quot;
&quot;012&quot;
&quot;035&quot;
&quot;025&quot;
</pre>
<p>107. current date, American
</p>
<pre>
   x:*_ltime _t
   x
19980526
   10000 100 100 _vs x
1998 5 26
   1!10000 100 100 _vs x
5 26 1998
   $1!10000 100 100 _vs x
(,&quot;5&quot;
&quot;26&quot;
&quot;1998&quot;)
   &quot; &quot;,/:$1!10000 100 100 _vs x
(&quot; 5&quot;
&quot; 26&quot;
&quot; 1998&quot;)
   ,/&quot; &quot;,/:$1!10000 100 100 _vs x
&quot; 5 26 1998&quot;
   1 _ ,/&quot; &quot;,/:$1!10000 100 100 _vs x
&quot;5 26 1998&quot;
   &quot;0123456789 &quot;?/:1 _ ,/&quot; &quot;,/:$1!10000 100 100 _vs x
5 10 2 6 10 1 9 9 8
   d:&quot;0123456789&quot;
   e:d,&quot;/&quot;
   b:10000 100 100
   k:{1 _ x}
   s:&quot; &quot;
   e[d?/:k ,/s,/:$1!b _vs x]
&quot;5/26/1998&quot;
   da:{e[d?/:k,/s,/:$1!b _vs x]}
   da[*_ltime _t]
&quot;5/26/1998&quot;
</pre>
<pre>
/not quite the same as above
q)raze string (dt.mm;&quot;/&quot;;dt.dd;&quot;/&quot;;dt.year)
&quot;7/21/2007&quot;
</pre>
<p>111. count of format of x
</p>
<pre>
   cf:{#$x}
   cf 12.345
6
   cf -1
2
   cf 1e-12
6
   $1e-12
&quot;1e-012&quot;
</pre>
<pre>
q)cf:{count string x}
q)cf 12.345
6
q)cf -1
2
q)cf 1e-12
5
q)string 1e-12
&quot;1e-12&quot;
</pre>
<p>115, 116, 117. case structure
</p>
<pre>
:[c0;t0;f]
:[c0;t0;c1;t1;f]
:[c0;t0;c1;t1;c2;t2;f]
:[c0;t0;c1;t1;c2;t2;c3;t3;f]
et cetera
In the first case, if c0 is nonzero, the result is t0; otherwise f.
In all cases, the result is the tn corresponding to the first nonzero cn.
If none of the cn are nonzero the result is f.
</pre>
<p>121. y-shaped array of numbers from x[0] to x[1]-1
</p>
<pre>
   x:4 9
   y:3 4
(*x)+y _draw --/x
(5 8 7 4
8 7 5 8
8 7 7 5)
</pre>
<p>122. y objects selected with replacement from&#160;!x (roll)
</p>
<pre>
   y:3 5
   x:7
   y _draw x
(6 2 1 2 2
4 4 6 3 0
6 3 4 5 1)
q)3 5#7?7
5 1 2 1 2
0 3 5 1 2
1 2 0 3 5
</pre>
<p>123. y objects selected without replacement from&#160;!x (deal)
</p>
<pre>
   y:2 3
   x:7
   y _draw -x
(1 6 4
3 5 2)
6 _draw -6
3 0 1 5 4 2
</pre>
<p>123.1 normal deviates (from interval (0,1))
</p>
<pre>
   \p 4
   x:4
   x _draw 0
0.8683 0.5104 0.968 0.9831
</pre>
<pre>
q)\P 4
q)4?1.
0.7418 0.007865 0.4953 0.1869
</pre>
<p>124. predicted values of exponential fit
</p>
<pre>
   x:64 70 77 82 92
   y:56 60 66 70 78
   a:x^/:0 1
   a
(1 1 1 1 1.0
64 70 77 82 92.0)
   _log[y]
4 4.1 4.2 4.2 4.4
   _lsq[_log[y];a]
3.3 0.012
   _exp[_mul[+a;_lsq[_log[y];a]]]
56 60 66 70 78.0
</pre>
<pre>
q)x:64 70 77 82 92
q)y:56 60 66 70 78
q)a:x xexp/:0 1
q)a
1  1  1  1  1
64 70 77 82 92
q)log y
4.025352 4.094345 4.189655 4.248495 4.356709
q)lsq[enlist log y;a]
3.261029 0.01197249
q)
q)exp[flip mmu[flip a;flip lsq[enlist log y;a]]]
56.10745 60.28622 65.55641 69.60062 78.45289
</pre>
<p>125. predicted values of best linear fit (least squares)
</p>
<pre>
   x:64 70 77 82 92 107 125 143 165 189f
   y:56 60 66 70 78  88 102 118 136 155f
   a:x^/:0 1
   a
(1 1 1 1 1 1 1 1 1 1.0
64 70 77 82 92 107 125 143 165 189.0)
   _mul[+a;_lsq[y;a]]
55.32371 60.08021 65.62945 69.59319 77.52068 89.41191 103.6814 117.9509 135.3913 154.4173
/ This can also be written in infix form
(+a) _mul (y _lsq a)
55.32371 60.08021 65.62945 69.59319 77.52068 89.41191 103.6814 117.9509 135.3913 154.4173
</pre>
<pre>
q)a:x xexp/:0 1
q)flip mmu[flip a;flip lsq[enlist y;a]]
55.32371 60.08021 65.62945 69.59319 77.52068 89.41191 103.6814 117.9509 135.3913 154.4173
q)flip (flip a) flip mmu (enlist y) lsq a
55.32371 60.08021 65.62945 69.59319 77.52068 89.41191 103.6814 117.9509 135.3913 154.4173
</pre>
<p>126. g-degree polynomial fit of points (x,y)
</p>
<pre>
   x:64 70 77 82 92 107 125 143 165 189
   y:(5*x^3)+(-1*x^2)+(4*x)+182
   y
1307062 1710562 2277226 2750626 3885526 6114376 9750682 1.460134e+007 2.243424e+007 3.372156e+007
   | _lsq[y;x^/:!g+1]
5 -1 4 182.0
   |(y _lsq x^/:!g+1)
5 -1 4 182.0
</pre>
<pre>
q)g:3
q)x:64 70 77 82 92 107 125 143 165 189
q)y:(5*x xexp 3)+(-1*x xexp 2)+(4*x)+182
q)y
1307062 1710562 2277226 2750626 3885526 6114376 9750682 1.460134e+07 2.243424..
q)reverse raze(enlist y) lsq x xexp/:til g+1
5 -1 4 182f
</pre>
<p>127. coefficients of exponential fit of points (x,y)
</p>
<pre>
   x:64 70 77 82 92 107 125 143 165 189
   y:56 60 66 70 78 88 102 118 136 155
   a: _lsq[_log[y];x^/:0 1]
   a
3.563398 0.00817742
a[0]: _exp[a[0]]
a
35.2829 0.00817742
a[0]*_exp[x*a[1]]
59.54624 62.54071 66.22511 68.98898 74.86758 84.63791 98.05964 113.6098 136.0024 165.4933
   y
56 60 66 70 78 88 102 118 136 155.0
</pre>
<pre>
q)x:64 70 77 82 92 107 125 143 165 189
q)y:56 60 66 70 78 88 102 118 136 155
q)a:lsq[enlist log y;x xexp/:0 1]
q)a
3.563398 0.00817742
q)a[0]:exp[a[0]]
q)a
35.2829 0.00817742
q)a[0]*exp[x*a[1]]
59.54624 62.54071 66.22511 68.98898 74.86758 84.63791 98.05964 113.6098 136.0..
q)y
56 60 66 70 78 88 102 118 136 155
</pre>
<p>128. coefficients of best linear fit of points (x,y) (least squares)
</p>
<pre>
   x:64 70 77 82 92 107 125 143 165 189f
   y:56 60 66 70 78  88 102 118 136 155f
   z:_lsq[y;x^/:0 1]
   z
4.587803 0.7927486
   z[0]+z[1]*x / should be y, approximately
55.32371 60.08021 65.62945 69.59319 77.52068 89.41191 103.6814 117.9509 135.3913 154.4173
</pre>
<pre>
q)z:lsq[enlist y;x xexp/:0 1]
q)z
4.587803 0.7927486
</pre>
<p>129. arctangent y%x
</p>
<pre>
   x:_sqrt[3]
   y:1
   _atan[y%x]
0.5235988
</pre>
<p>131. complementary angle (arccos sin x)
</p>
<pre>
   x:0.25
   _acos[_sin x]
1.320796
   x+_acos[_sin x] / should be 0.5*pi, approximately
1.570796
   2*x+_acos[_sin x]
3.141593
</pre>
<p>132. rotation matrix for angle x (in radians) counter-clockwise
</p>
<pre>
   ((_cos[x];-_sin[x]);(_sin[x];_cos[x]))
(0.9689124 -0.247404
0.247404 0.9689124)
</pre>
<pre>
q)x:0.25
q)((cos x;neg sin x);(sin x;cos x))
0.9689124 -0.247404
0.247404  0.9689124
</pre>
<p>133. degrees from radians
</p>
<pre>
   x:0.5
   57.295779513082323*x
28.64789
</pre>
<pre>
q)x:0.5
q)57.295779513082323*x
28.64789
</pre>
<p>134. radians from degrees
</p>
<pre>
   x:0.5
   z:57.295779513082323*x
   z
28.64789
   0.017453292519943295*z
0.5
</pre>
<pre>
q)x:0.5
q)z:57.295779513082323*x
q)z
28.64789
q)0.017453292519943295*z
0.5
</pre>
<p>135. number of permutations of n objects taken k at a time
</p>
<pre>
   fac:{[n]:[n&gt;1; n * _f[n-1];1]}
   bin:{[n;k]fac[n]%fac[n-k]*fac[k]}
   pn:{[n;k]fac[k]*bin[n;k]}
   pn[5;3]
60.0
</pre>
<pre>
q)fac:{[n]$[n&gt;1;n*fac[n-1];1]}
q)binn:{[n;k]fac[n]%fac[n-k]*fac[k]}
q)pn:{[n;k]fac[k]*binn[n;k]}
q)pn[5;3]
60f
</pre>
<p>136. Pascal's triangle of order x (binomial coefficients) [see 1007]
</p><p>137. Taylor series with coefficients y at point x
</p>
<pre>
   x:3
   y:1 1 1
   a:!#y
   +/y*(x^a)%fac'[a]
8.5
   y:30#1
   x:1
   a:!#y
   +/y*(x^a)%fac'[a]
2.7182818308537429
</pre>
<pre>
q)fac:{[n]$[n&gt;1;n*fac[n-1];1]}
q)x:3
q)y:1 1 1
q)a:til count y
q)sum y*(x xexp a)%fac each a
8.5
q)y:30#1
q)x:1
q)a:til count y
q)sum y*(x xexp a)%fac each a
2.718282
</pre>
<p>139. Beta function
See gamma in appendix
Beta:{((gamma x)*gamma y)%gamma[x+y]}
</p><p>142. number of combinations of n objects taken k at a time
</p>
<pre>
   fac:{[n]:[n&gt;1; n * _f[n-1];1]}
   bin:{[n;k]fac[n]%fac[n-k]*fac[k]}
   bin[12;7]
792.0
   bin[10;4]
210.0
</pre>
<pre>
q)fac:{[n]$[n&gt;1;n*fac[n-1];1]}
q)bin:{[n;k]fac[n]%fac[n-k]*fac[k]}
'bin
q)binn:{[n;k]fac[n]%fac[n-k]*fac[k]}
q)binn[12;7]
792f
q)binn[10;4]
210f
</pre>
<p>143. indices of distinct items
</p>
<pre>
   x:&quot;ajhajhja&quot;
   =x
(0 3 7
1 4 6
2 5)
</pre>
<pre>
q)group x
a| 0 3 7
j| 1 4 6
h| 2 5
q)value group x
0 3 7
1 4 6
2 5
</pre>
<p>144. histogram
</p>
<pre>
   x:13 _draw 12
   x
8 3 11 9 9 4 6 6 3 3 9 7 9
   h:{@[&amp;1+|/x;x;+;1]}
   b:h[x]
   b
0 0 0 3 1 0 2 1 1 4 0 1
   c:(1+|/b)-b
   c
5 5 5 2 4 5 3 4 4 1 5 4
   d:|+(b#\:1),'(c#\:0)
   d
(0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 1 0 0
0 0 0 1 0 0 0 0 0 1 0 0
0 0 0 1 0 0 1 0 0 1 0 0
0 0 0 1 1 0 1 1 1 1 0 1)
   &quot; *&quot;[d]
(&quot; &quot;
&quot; * &quot;
&quot; * * &quot;
&quot; * * * &quot;
&quot; ** **** *&quot;)
</pre>
<pre>
q)x:8 3 11 9 9 4 6 6 3 3 9 7 9
q)h:{@[(1+max x)#0;x;+;1]}
q)h x
0 0 0 3 1 0 2 1 1 4 0 1
q)b:h x
q)c:(1+max b)-b
q)c
5 5 5 2 4 5 3 4 4 1 5 4
q)d:reverse flip(b#\:1),'(c#\:0)
q)d
0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 1 0 0
0 0 0 1 0 0 0 0 0 1 0 0
0 0 0 1 0 0 1 0 0 1 0 0
0 0 0 1 1 0 1 1 1 1 0 1
q)&quot; *&quot;[d]
&quot;            &quot;
&quot;         *  &quot;
&quot;   *     *  &quot;
&quot;   *  *  *  &quot;
&quot;   ** **** *&quot;
</pre>
<p>145. count of x between endpoints (l,h)
</p>
<pre>
   x:5 5 _draw 100
   l:10
   h:80
   x
(66 8 6 4 86
82 91 52 53 89
43 0 62 3 17
0 26 81 2 12
37 41 41 72 60)
   xl:x&gt;l
   xl
(1 0 0 0 1
1 1 1 1 1
1 0 1 0 1
0 1 1 0 1
1 1 1 1 1)
   xh:x&lt;h
   xh
(1 1 1 1 0
0 0 1 1 0
1 1 1 1 1
1 1 0 1 1
1 1 1 1 1)
   xbetween:xl&amp;xh
   xbetween
(1 0 0 0 0
0 0 1 1 0
1 0 1 0 1
0 1 0 0 1
1 1 1 1 1)
   +/'xbetween
1 2 3 2 5
</pre>
<pre>
q)x:(66 8 6 4 86;82 91 52 53 89;43 0 62 3 17;0 26 81 2 12;37 41 41 72 60)
q)l:10
q)h:80
q)xl:x&gt;l
q)xl
10001b
11111b
10101b
01101b
11111b
q)xh:x&lt;h
q)xh
11110b
00110b
11111b
11011b
11111b
q)xbetween:xl&amp;xh
q)xbetween
10000b
00110b
10101b
01001b
11111b
q)sum each xbetween
1 2 3 2 5
</pre>
<p>146. compound interest for principals y at percentages g for periods x
</p>
<pre>
   x:1 2 3 4
   y:1 2 3 4
   g:0.5 1 1.5 2
   z:y*\:(1+g%100)^\:x
   \p 5
   z
((1.005 1.01 1.0151 1.0202
1.01 1.0201 1.0303 1.0406
1.015 1.0302 1.0457 1.0614
1.02 1.0404 1.0612 1.0824)
(2.01 2.02 2.0302 2.0403
2.02 2.0402 2.0606 2.0812
2.03 2.0604 2.0914 2.1227
2.04 2.0808 2.1224 2.1649)
(3.015 3.0301 3.0452 3.0605
3.03 3.0603 3.0909 3.1218
3.045 3.0907 3.137 3.1841
3.06 3.1212 3.1836 3.2473)
(4.02 4.0401 4.0603 4.0806
4.04 4.0804 4.1212 4.1624
4.06 4.1209 4.1827 4.2455
4.08 4.1616 4.2448 4.3297))
</pre>
<pre>
q)x:1 2 3 4
q)y:1 2 3 4
q)g:0.5 1 1.5 2
q)z:y*\:(1+g%100)xexp\:x
q)\P 5
q)z
1.005 1.01   1.0151 1.0202 1.01  1.0201 1.0303 1.0406 1.015 1.0302 1.0457 1.0..
2.01 2.02   2.0302 2.0403  2.02 2.0402 2.0606 2.0812  2.03 2.0604 2.0914 2.12..
3.015 3.0301 3.0452 3.0605 3.03  3.0603 3.0909 3.1218 3.045 3.0907 3.137  3.1..
4.02 4.0401 4.0603 4.0806  4.04 4.0804 4.1212 4.1624  4.06 4.1209 4.1827 4.24..
</pre>
<p>147. locations of string x in string y (including overlaps)
</p>
<pre>
   x:&quot;**&quot;
   y:&quot;*abcugj**jy***kmhix**12&quot;
ss:{z[&amp;y[z+\:!#x]~\:x]}
ss[x;y;&amp;((1-#x)_ y)=*x]
7 11 12 19
   y[7 11 12 19+\:0 1]
(&quot;**&quot;
&quot;**&quot;
&quot;**&quot;
&quot;**&quot;)
</pre>
<pre>
q)x:&quot;**&quot;
q)y:&quot;*abcugj**jy***kmhix**12&quot;
q)sss:{z[where y[z+\:til count x]~\:x]}
q)sss[x;y;where ((1-count x)_y)=first x]
7 11 12 19
q)y[7 11 12 19+\:0 1]
&quot;**&quot;
&quot;**&quot;
&quot;**&quot;
&quot;**&quot;
</pre>
<p>148. node matrix from connection matrix (inverse to 157)
</p>
<pre>
   x:( 1 1 0 0 0
&gt; 0 -1 0 1 1
&gt; -1 0 1 -1 0
&gt; 0 0 -1 0 -1)
Each column in matrix x represents a path between 2 nodes:
From node 0 to node 2
From node 0 to node 1
From node 2 to node 3
From node 1 to node 2
From node 1 to node 3
   a:1 -1=\:x
   a
((1 1 0 0 0
0 0 0 1 1
0 0 1 0 0
0 0 0 0 0)
(0 0 0 0 0
0 1 0 0 0
1 0 0 1 0
0 0 1 0 1))
   b:_mul[a;!#x]
   b
(0 0 2 1 1
2 1 3 2 3)
   nc:{_mul[1 -1=\:x;!#x]}
   nc x
(0 0 2 1 1
2 1 3 2 3)
</pre>
<p>149. number of decimals in x, maximum y
</p>
<pre>
nd:{+/~0=(-_-x*10^y)!/:-_-(10^y)*10^-!y+1}
   x:1.4321 1.21 10
   y:3
   nd[x;y]
3 2 0
   10^-!y+1
1 0.1 0.01 0.001
   -_-(10^y)*10^-!y+1
1000 100 10 1
   -_-x*10^y
1433 1210 10000
   (-_-x*10^y)!/:-_-(10^y)*10^-!y+1
(433 210 0
33 10 0
3 0 0
0 0 0)
   ~0=(-_-x*10^y)!/:-_-(10^y)*10^-!y+1
(1 1 0
1 1 0
1 0 0
0 0 0)
   +/~0=(-_-x*10^y)!/:-_-(10^y)*10^-!y+1
3 2 0
</pre>
<pre>
q)nd:{sum not 0=(neg floor neg x*10 xexp y)mod/:neg floor neg(10 xexp y)*10 xexp neg til y+1}
q)x:1.4321 1.21 10
q)y:3
q)nd[x;y]
3 2 0
</pre>
<p>150. sum items of x given by y
</p>
<pre>
   x:_log[1+!5]
   x
0 0.6931472 1.098612 1.386294 1.609438
   y:1 4 1 4 1
   a:=y
a
(0 2 4
1 3)
   +/'x[a]
2.70805 2.079442
   +/x[0 2 4]
2.70805
   +/x[1 3]
2.079442
   +/'x[=y]
2.70805 2.079442
</pre>
<pre>
q)a:value group y
q)a
0 2 4
1 3
q)sum each x[a]
2.70805 2.079442
q)sum x[0 2 4]
2.70805
q)sum x[1 3]
2.079442
q)sum each x[value group y]
2.70805 2.079442
</pre>
<p>151. efficient execution of f x where x has repeated values
</p>
<pre>
fx:{[f;x](f'x)(x?:)?/:x}
</pre>
<p>The phrase (x?:) is the same as (x:?x), which means x is assigned the unique elements of x. The phrase a?/:b means find each item of b in a. So (x?:)?/:x says find each item of x in the list of unique items of x (and while you're at it, reassign x to that list of unique items of x). The result is the list of indices of the original list x into the unique items of x.
</p>
<pre>
   x:1 2 3 2 3 2 1
  &#160;?x
1 2 3
   (?x)?/:x
0 1 2 1 2 1 0
   (x?:)?/:x
0 1 2 1 2 1 0
</pre>
<p>This works because K's order of execution is right to left. the original value of x is "captured" before the (x?:) reassigns it.
</p>
<pre>
   x
1 2 3
f:{10*x}
f'x
10 20 30
</pre>
<p>The last bit is simply indexing:
</p>
<pre>
(f'x)[0 1 2 1 2 1 0]
10 20 30 20 30 20 10
</pre>
<p>But K allows you to leave out the brackets:
</p>
<pre>
(f'x)0 1 2 1 2 1 0
10 20 30 20 30 20 10
</pre>
<p>So the whole thing is
</p>
<pre>
(f'x)(x?:)?/:x
</pre>
<pre>
q)x:1 2 3 2 3 2 1
q)(u:distinct x)?x
0 1 2 1 2 1 0
q)u
1 2 3
q)f:{10*x}
q)f u
10 20 30
q)f u 0 1 2 1 2 1 0
10 20 30 20 30 20 10
q)f[u](u:distinct x)?x
10 20 30 20 30 20 10
q).Q.fu
k){[f;x]$[0&gt;@x;f x;f[u](u:?x)?x]}
</pre>
<p>152. sum items of y according by ordered codes g in x
</p>
<pre>
   y:1+!20
   y
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
   z:&quot;;;abcde&quot;
   x:z[20 _draw #z]
   x
&quot;dcbbbaceeaeccbecbaea&quot;
   xz:z,x
   yz:(&amp;#z),y
   xz
&quot;abcdedcbbbaceeaeccbecbaea&quot;
   yz
0 0 0 0 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
   +/'yz[=xz]
54 43 50 1 62
   sc:{+/'((&amp;#z),y)[=z,x]}
   sc[x;y;z]
54 43 50 1 62
</pre>
<pre>
q)y:1+til 20
q)z:&quot;abcde&quot;
q)x:&quot;dcbbbaceeaeccbecbaea&quot;
q)xz:z,x
q)yz:((count z)#0),y
q)yz
0 0 0 0 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20
q)xz
&quot;abcdedcbbbaceeaeccbecbaea&quot;
q)sum each yz[group xz]
a| 54
b| 43
c| 50
   d| 1
e| 62
q)sum each yz[value group xz]
54 43 50 1 62
q)sc:{sum each(((count z)#0),y)[value group z,x]}
q)sc[x;y;z]
54 43 50 1 62
</pre>
<p>153. index of rows of y in corresponding rows of x
</p>
<pre>
   x:1+3 4#&#160;!12
   x
(1 2 3 4
5 6 7 8
9 10 11 12)
   y:(1 0 3 0
&gt; 0 6 0 8
&gt; 9 0 0 12)
   x&#160;?/:'y
(0 4 2 4
4 1 4 3
0 4 4 3)
</pre>
<pre>
q)x:1+3 4#til 12
q)x
1 2  3  4
5 6  7  8
9 10 11 12
q)y:(1 0 3 0;0 6 0 8;9 0 0 12)
q)x&#160;?/:'y
0 4 2 4
4 1 4 3
0 4 4 3
/same as x?'y
/column by column find
</pre>
<p>154. range (nub; remove duplicate items)
</p>
<pre>
   x:&quot;wirlsisl&quot;
  &#160;?x
&quot;wirls&quot;
  &#160;?(1 2 3;4 5;1 2 3;4 5;1 2 3)
(1 2 3
4 5)
</pre>
<pre>
q)distinct x
&quot;wirls&quot;
q)distinct (1 2 3;4 5;1 2 3;4 5;1 2 3)
1 2 3
4 5
</pre>
<p>155. greatest common divisor of list x
</p>
<pre>
   gcd:{*|1+&amp;&amp;/'0=x!/:1+!&amp;/x}
   x:6 9 12
   gcd x
3
&amp;/x
6
!&amp;/x
0 1 2 3 4 5
1+!&amp;/x
1 2 3 4 5 6
   x!/:1+!&amp;/x
(0 0 0
0 1 0
0 0 0
2 1 0
1 4 2
0 3 0)
0=x!/:1+!&amp;/x
(1 1 1
1 0 1
1 1 1
0 0 1
0 0 0
1 0 1)
&amp;/'0=x!/:1+!&amp;/x
1 0 1 0 0 0
&amp;&amp;/'0=x!/:1+!&amp;/x
0 2
*|1+&amp;&amp;/'0=x!/:1+!&amp;/x
3
</pre>
<pre>
q)x:6 9 12
q)gcd:{last 1+where min each 0=x mod/:1+til min x}
q)gcd x
3
</pre>
<p>156. classify y into x classes between min and max y
</p>
<pre>
   x:10
   y:260 416 18 27 265 336 4
normalize y so minimum value is 0
   sm:{x-&amp;/x}
   sm[y]
256 412 14 23 261 332 0
normalize again so values are in range 0 le y and y lt x
   nr:{y*x%|/y}
   nr[x;sm[y]]
6.21 10 0.34 0.558 6.33 8.06 0
compare against interior range boundaries, 1+!x-1
   ~nr[x;sm[y]]&lt;/:1+!x-1
(1 1 0 0 1 1 0
1 1 0 0 1 1 0
1 1 0 0 1 1 0
1 1 0 0 1 1 0
1 1 0 0 1 1 0
1 1 0 0 1 1 0
0 1 0 0 0 1 0
0 1 0 0 0 1 0
0 1 0 0 0 0 0)
count the number of boundaries passed by each
   +/~nr[x;sm[y]]&lt;/:1+!x-1
6 9 0 0 6 8 0
</pre>
<pre>
q)sm:{x-min x}
q)sm y
256 412 14 23 261 332 0
q)nr:{y*x%max y}
q)nr[x;sm[y]]
6.213592 10 0.3398058 0.5582524 6.334951 8.058252 0
q)
q)not nr[x;sm[y]]&lt;/:1+til x-1
1100110b
1100110b
1100110b
1100110b
1100110b
1100110b
0100010b
0100010b
0100000b
q)sum not nr[x;sm[y]]&lt;/:1+til x-1
6 9 0 0 6 8 0
</pre>
<p>157. connection matrix from node matrix (inverse to 148)
node matrix top and bottom rows give from and to nodes
</p>
<pre>
   x: (0 0 2 1 1
2 1 3 2 3)
enumerate count of range
  &#160;!#?,/x
0 1 2 3
where is x equal to each of it
   x=/:!#?,/x
((1 1 0 0 0
0 0 0 0 0)
(0 0 0 1 1
0 1 0 0 0)
(0 0 1 0 0
1 0 0 1 0)
(0 0 0 0 0
0 0 1 0 1))
subtract &quot;to&quot; matrix from &quot;from&quot; matrix
   -/'x=/:!#?,/x
(1 1 0 0 0
0 -1 0 1 1
-1 0 1 -1 0
0 0 -1 0 -1)
</pre>
<pre>
q)x:(0 0 2 1 1;2 1 3 2 3)
q)key count distinct raze x
0 1 2 3
q)x=/:key count distinct raze x
11000b 00000b
00011b 01000b
00100b 10010b
00000b 00101b
q)-/'[x=/:key count distinct raze x]
1  1  0  0  0
0  -1 0  1  1
-1 0  1  -1 0
0  0  -1 0  -1
</pre>
<p>158. see 20
</p><p>159. is range of x 1 (are all items of x equal)
</p>
<pre>
   x:1 1 1 1 1
   1=#?x
1
   y:1 1 0 1 1
   1=#?y
0
</pre>
<pre>
q)1=count distinct x
1b
q)1=count distinct y
0b
</pre>
<p>160. move blanks in x to end of list
</p>
<pre>
   x:&quot;sign if i cant&quot;
   x[&lt;x=&quot; &quot;]
&quot;significant &quot;
   be:{x[&lt;x=&quot; &quot;]}
   y:(&quot;yo ho ho&quot;
&quot;and a bottle&quot;
&quot;of rum&quot;)
   be'[y]
(&quot;yohoho &quot;
&quot;andabottle &quot;
&quot;ofrum &quot;)
</pre>
<pre>
q)x:&quot;sign if i cant&quot;
q)x[iasc x=&quot; &quot;]
&quot;significant   &quot;
q)be:{x[iasc x=&quot; &quot;]}
q)y:(&quot;yo ho ho&quot;;&quot;and a bottle&quot;;&quot;of rum&quot;)
q)be'[y]
&quot;yohoho  &quot;
&quot;andabottle  &quot;
&quot;ofrum &quot;
</pre>
<p>161. is y upper triangular
</p>
<pre>
   x:(1 0 0 1
&gt; 0 2 1 0
&gt; 0 0 1 2
&gt; 0 0 0 0)
   slt:{(!x)&gt;\:!x}
   slt[#x]
(0 0 0 0
1 0 0 0
1 1 0 0
1 1 1 0)
   x*slt[#x]
(0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0)
   zm:{(x,x)#0}
   zm[#x]
(0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0)
   iut:{zm[#x]~x*slt[#x]}
   iut x
1
   +x
(1 0 0 0
0 2 0 0
0 1 1 0
1 0 2 0)
   iut[+x]
0
</pre>
<pre>
q)x:(1 0 0 1;0 2 1 0;0 0 1 2;0 0 0 0)
q)x
1 0 0 1
0 2 1 0
0 0 1 2
0 0 0 0
q)slt:{(key x)&gt;\:key x}
q)slt[count x]
0000b
1000b
1100b
1110b
q)x*slt[count x]
0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0
q)zm:{(x,x)#0}
q)zm[count x]
0 0 0 0
0 0 0 0
0 0 0 0
0 0 0 0
q)iut:{zm[count x]~x*slt[count x]}
q)iut x
1b
q)flip x
1 0 0 0
0 2 0 0
0 1 1 0
1 0 2 0
q)iut[flip x]
0b
</pre>
<p>162. is x lower triangular
</p>
<pre>
   x:(1 0 0 0
0 2 0 0
0 1 1 0
1 0 2 0)
   sut:{(!x)&lt;\:!x}
   sut[#x]
(0 1 1 1
0 0 1 1
0 0 0 1
0 0 0 0)
   ilt:{zm[#x]~x*sut[#x]}
   ilt[x]
1
   ilt[+x]
0
</pre>
<pre>
q)x:(1 0 0 0;0 2 0 0;0 1 1 0;1 0 2 0)
q)x
1 0 0 0
0 2 0 0
0 1 1 0
1 0 2 0
q)
q)sut:{(key x)&lt;\:key x}
q)sut[count x]
0111b
0011b
0001b
0000b
q)zm:{(x,x)#0}
q)ilt:{zm[count x]~x*sut[count x]}
q)ilt[x]
1b
q)ilt[flip x]
0b
</pre>
<p>163. polynomial product
</p>
<pre>
   x:1 2 1
   y:1 3 3 1
   y*/:x
(1 3 3 1
2 6 6 2
1 3 3 1)
   1 _'zm[#x]
(0 0
0 0
0 0)
   (1 _'zm[#x]),'y*/:x
(0 0 1 3 3 1
0 0 2 6 6 2
0 0 1 3 3 1)
   (!#x)!'(1 _'zm[#x]),'y*/:x
(0 0 1 3 3 1
0 2 6 6 2 0
1 3 3 1 0 0)
   +/(!#x)!'(1 _'zm[#x]),'y*/:x
1 5 10 10 5 1
   pm:{+/(!#x)!'(1 _'zm[#x]),'y*/:x}
   pm[x;y]
1 5 10 10 5 1
</pre>
<pre>
q)pm:{sum(key count x)rotate ' (1 _ 'zm[count x]),'y*/:x}
q)pm[x;y]
1 5 10 10 5 1
</pre>
<p>164. divisors
</p>
<pre>
   x:363
   dv:{&amp;0=x!/:!1+x}
   dv[x]
1 3 11 33 121 363
   dv 365
1 5 73 365
   dv 367
1 367
   dv'[1 2 3 4 5 6 7 8 9 10]
(,1
1 2
1 3
1 2 4
1 5
1 2 3 6
1 7
1 2 4 8
1 3 9
1 2 5 10)
</pre>
<pre>
q)dv:{where 0=x mod/:key 1+x}
q)x:363
q)dv x
1 3 11 33 121 363
q)x:365
q)dv x
1 5 73 365
q)dv 367
1 367
q)dv'[1 2 3 4 5 6 7 8 9 10]
,1
1 2
1 3
1 2 4
1 5
1 2 3 6
1 7
1 2 4 8
1 3 9
1 2 5 10
</pre>
<p>165. list of x zeros preceded by (y-x) ones
</p>
<pre>
   x:5
   y:9
   zo:{((y-x)#1),&amp;x}
   zo[x;y]
1 1 1 1 0 0 0 0 0
</pre>
<pre>
q)x:5
q)y:9
q)zo:{((y-x)#1),x#0}
q)zo[x;y]
1 1 1 1 0 0 0 0 0
</pre>
<p>166. barchart of integer list x, down the page
</p>
<pre>
   x:2 5 7 4 9 3 6
   xl:{(x#1),&amp;y-x}
&quot; X&quot;[|+xl\:[x;|/x]]
(&quot; X &quot;
&quot; X &quot;
&quot; X X &quot;
&quot; X X X&quot;
&quot; XX X X&quot;
&quot; XXXX X&quot;
&quot; XXXXXX&quot;
&quot;XXXXXXX&quot;
&quot;XXXXXXX&quot;)
</pre>
<pre>
q)x:2 5 7 4 9 3 6
q)xl:{(x#1),(y-x)#0}
q)&quot; X&quot;[reverse flip xl\:[x;max x]]
&quot;    X  &quot;
&quot;    X  &quot;
&quot;  X X  &quot;
&quot;  X X X&quot;
&quot; XX X X&quot;
&quot; XXXX X&quot;
&quot; XXXXXX&quot;
&quot;XXXXXXX&quot;
&quot;XXXXXXX&quot;
bd:{&quot; X&quot;[|+xl\:[x;|/x]]}
bd[x]
(&quot; X &quot;
&quot; X &quot;
&quot; X X &quot;
&quot; X X X&quot;
&quot; XX X X&quot;
&quot; XXXX X&quot;
&quot; XXXXXX&quot;
&quot;XXXXXXX&quot;
&quot;XXXXXXX&quot;)
q)x:2 5 7 4 9 3 6
q)xl:{(x#1),(y-x)#0}
q)&quot; X&quot;[reverse flip xl\:[x;max x]]
&quot;    X  &quot;
&quot;    X  &quot;
&quot;  X X  &quot;
&quot;  X X X&quot;
&quot; XX X X&quot;
&quot; XXXX X&quot;
&quot; XXXXXX&quot;
&quot;XXXXXXX&quot;
&quot;XXXXXXX&quot;
</pre>
<p>167. list of x ones preceded by (y-x) xeros
</p>
<pre>
   x:3
   y:9
   xr:{(&amp;y-x),x#1}
   xr[x;y]
0 0 0 0 0 0 1 1 1
   x:2 5 7 4 9 3 6
   xr\:[x;y]
(0 0 0 0 0 0 0 1 1
0 0 0 0 1 1 1 1 1
0 0 1 1 1 1 1 1 1
0 0 0 0 0 1 1 1 1
1 1 1 1 1 1 1 1 1
0 0 0 0 0 0 1 1 1
0 0 0 1 1 1 1 1 1)
</pre>
<pre>
q)xr:{((y-x)#0),x#1}
q)xr[x;y]
0 0 0 0 0 0 1 1 1
q)x:2 5 7 4 9 3 6
q)xr\:[x;y]
0 0 0 0 0 0 0 1 1
0 0 0 0 1 1 1 1 1
0 0 1 1 1 1 1 1 1
0 0 0 0 0 1 1 1 1
1 1 1 1 1 1 1 1 1
0 0 0 0 0 0 1 1 1
0 0 0 1 1 1 1 1 1
</pre>
<p>168. list of x zeros followed by (y-x) ones
</p>
<pre>
   x:3
   y:9
(&amp;x),(y-x)#1
0 0 0 1 1 1 1 1 1
   zl:{(&amp;x),(y-x)#1}
   zl[x;y]
0 0 0 1 1 1 1 1 1
   x:2 5 7 4 9 3 6
   zl\:[x;y]
   x:2 5 7 4 9 3 6
   zl\:[x;y]
(0 0 1 1 1 1 1 1 1
0 0 0 0 0 1 1 1 1
0 0 0 0 0 0 0 1 1
0 0 0 0 1 1 1 1 1
0 0 0 0 0 0 0 0 0
0 0 0 1 1 1 1 1 1
0 0 0 0 0 0 1 1 1)
</pre>
<pre>
q)x:3
q)y:9
q)(x#0),(y-x)#1
0 0 0 1 1 1 1 1 1
q)zl:{(x#0),(y-x)#1}
q)zl[x;y]
0 0 0 1 1 1 1 1 1
q)x:2 5 7 4 9 3 6
q)zl\:[x;y]
0 0 1 1 1 1 1 1 1
0 0 0 0 0 1 1 1 1
0 0 0 0 0 0 0 1 1
0 0 0 0 1 1 1 1 1
0 0 0 0 0 0 0 0 0
0 0 0 1 1 1 1 1 1
0 0 0 0 0 0 1 1 1
</pre>
<p>169. see 172
</p><p>170. horizontal barchart of x with maximum z, normalized to length y
</p>
<pre>
   x:4
   y:5
   z:10
   ad:{_ x*y%z}
   ad[2;5;10]
1
   ad[23;50;80]
14
   x:2 8 5 6 3 1 7 7 10 4
   xl:{(x#1),&amp;y-x}
   xl\:[ad[x;y;z];y]
(1 0 0 0 0
1 1 1 1 0
1 1 0 0 0
1 1 1 0 0
1 0 0 0 0
0 0 0 0 0
1 1 1 0 0
1 1 1 0 0
1 1 1 1 1
1 1 0 0 0)
   &quot; X&quot;[xl\:[ad[x;y;z];y]]
(&quot;X &quot;
&quot;XXXX &quot;
&quot;XX &quot;
&quot;XXX &quot;
&quot;X &quot;
&quot; &quot;
&quot;XXX &quot;
&quot;XXX &quot;
&quot;XXXXX&quot;
&quot;XX &quot;)
</pre>
<pre>
q)x:2 8 5 6 3 1 7 7 10 4
q)xl:{(x#1),((y-x)#0)}
q)ad:{floor x*y%z}
q)ad[2;5;10]
1
q)ad[23;50;80]
14
q)y:5
q)z:10
q)xl\:[ad[x;y;z];y]
1 0 0 0 0
1 1 1 1 0
1 1 0 0 0
1 1 1 0 0
1 0 0 0 0
0 0 0 0 0
1 1 1 0 0
1 1 1 0 0
1 1 1 1 1
1 1 0 0 0
q)&quot; X&quot;[xl\:[ad[x;y;z];y]]
&quot;X    &quot;
&quot;XXXX &quot;
&quot;XX   &quot;
&quot;XXX  &quot;
&quot;X    &quot;
&quot;     &quot;
&quot;XXX  &quot;
&quot;XXX  &quot;
&quot;XXXXX&quot;
&quot;XX   &quot;
</pre>
<p>171. horizontal barchart of integer values x
(compare bh here with xl in 172)
</p>
<pre>
   bh:{@[&amp;y;!x;:;1]}
   &quot; X&quot;[bh\:[x;|/x]]
(&quot;XX &quot;
&quot;XXXXXXXX &quot;
&quot;XXXXX &quot;
&quot;XXXXXX &quot;
&quot;XXX &quot;
&quot;X &quot;
&quot;XXXXXXX &quot;
&quot;XXXXXXX &quot;
&quot;XXXXXXXXXX&quot;
&quot;XXXX &quot;)
</pre>
<pre>
q)bh:{@[y#0;til x;:;1]}
q)&quot; X&quot;[bh\:[x;max x]]
&quot;XX        &quot;
&quot;XXXXXXXX  &quot;
&quot;XXXXX     &quot;
&quot;XXXXXX    &quot;
&quot;XXX       &quot;
&quot;X         &quot;
&quot;XXXXXXX   &quot;
&quot;XXXXXXX   &quot;
&quot;XXXXXXXXXX&quot;
&quot;XXXX      &quot;
</pre>
<p>172. list of x ones followed by (y-x) zeros
</p>
<pre>
   x:5
   y:9
   (x#1),&amp;(y-x)
1 1 1 1 1 0 0 0 0
   xl:{(x#1),&amp;y-x}
   xl[x;y]
1 1 1 1 1 0 0 0 0
   x:2 5 7 4 9 3 6
   xl\:[x;y]
(1 1 0 0 0 0 0 0 0
1 1 1 1 1 0 0 0 0
1 1 1 1 1 1 1 0 0
1 1 1 1 0 0 0 0 0
1 1 1 1 1 1 1 1 1
1 1 1 0 0 0 0 0 0
1 1 1 1 1 1 0 0 0)
</pre>
<pre>
q)x:5
q)y:9
q)(x#1),(y-x)#0
1 1 1 1 1 0 0 0 0
q)xl:{(x#1),(y-x)#0}
q)xl[x;y]
1 1 1 1 1 0 0 0 0
q)xl\:[x;y]
1 1 1 1 1 0 0 0 0
q)x:2 5 7 4 9 3 6
q)xl\:[x;y]
1 1 0 0 0 0 0 0 0
1 1 1 1 1 0 0 0 0
1 1 1 1 1 1 1 0 0
1 1 1 1 0 0 0 0 0
1 1 1 1 1 1 1 1 1
1 1 1 0 0 0 0 0 0
1 1 1 1 1 1 0 0 0
</pre>
<p>173. assign x to one of y classes of width h, starting with g
</p>
<pre>
   f:{[x;y;g;h] -1+ -1 _ #:'=(1+!y),-_-(x-g)%h}
   x:32 56 36 48 36 24 28 44 52 32
   y:4
   h:10
   g:10
f[x;y;g;h]
0 2 4 2
</pre>
<p>174. move x into first quadrant
</p>
<pre>
   sm:{x-&amp;/x}
   x:(1 6 4;3 4 7;7 8 6)
   sm'[x]
(0 5 3
0 1 4
1 2 0)
</pre>
<pre>
q)sm:{x-min x}
q)x:(1 6 4;3 4 7;7 8 6)
q)sm'[x]
0 5 3
0 1 4
1 2 0
</pre>
<p>175. primes to n
</p>
<pre>
   n:10
   x:1+!n
   x
1 2 3 4 5 6 7 8 9 10
   x!/:x:1+!n
(0 0 0 0 0 0 0 0 0 0
1 0 1 0 1 0 1 0 1 0
1 2 0 1 2 0 1 2 0 1
1 2 3 0 1 2 3 0 1 2
1 2 3 4 0 1 2 3 4 0
1 2 3 4 5 0 1 2 3 4
1 2 3 4 5 6 0 1 2 3
1 2 3 4 5 6 7 0 1 2
1 2 3 4 5 6 7 8 0 1
1 2 3 4 5 6 7 8 9 0)
   +/0=x!/:x:1+!n
1 2 2 3 2 4 2 4 3 4
   2=+/0=x!/:x:1+!n
0 1 1 0 1 0 1 0 0 0
   &amp;0,2=+/0=x!/:x:1+!n
2 3 5 7
   pn:{[n]&amp;0,2=+/0={x!/:x}1+!n}
   pn 30
2 3 5 7 11 13 17 19 23 29
</pre>
<pre>
q)n:10
q)x:1+til n
q)x
1 2 3 4 5 6 7 8 9 10
q)x mod/:x:1+til n
0 0 0 0 0 0 0 0 0 0
1 0 1 0 1 0 1 0 1 0
1 2 0 1 2 0 1 2 0 1
1 2 3 0 1 2 3 0 1 2
1 2 3 4 0 1 2 3 4 0
1 2 3 4 5 0 1 2 3 4
1 2 3 4 5 6 0 1 2 3
1 2 3 4 5 6 7 0 1 2
1 2 3 4 5 6 7 8 0 1
1 2 3 4 5 6 7 8 9 0
q)sum 0=x mod/:x:1+til n
1 2 2 3 2 4 2 4 3 4
q)2=sum 0=x mod/:x:1+til n
0110101000b
q)0b,2=sum 0=x mod/:x:1+til n
00110101000b
q)where 0b,2=sum 0=x mod/:x:1+til n
2 3 5 7
q)pn:{[n]where 0b,2=sum 0=x mod/:x:1+til n}
q)pn 30
2 3 5 7 11 13 17 19 23 29
/classic:
/q)p:{x[where not (x in distinct raze x*/:\:x:2_ key x)]}
/q)p 10
/2 3 5 7
/q)p 30
/2 3 5 7 11 13 17 19 23 29
</pre>
<p>177. ordinal of word in x pointed at by y
</p>
<pre>
   ow:{+/~y&lt;1+&amp;x=&quot; &quot;}
   x:&quot;ordinal of word in x pointed at by y&quot;
ow[x;5]
0
ow[x;6]
0
ow[x;7]
0
ow[x;8]
1
ow[x;26]
5
</pre>
<pre>
q)ow:{sum not y&lt;1+where x=&quot; &quot;}
q)x:&quot;ordinal of word in x pointed at by y&quot;
q)ow[x;5]
0
q)ow[x;6]
0
q)ow[x;7]
0
q)ow[x;8]
1
q)ow[x;26]
5
</pre>
<p>177. indices of start of string x in string y
</p>
<pre>
   x:&quot;st&quot;
   y:&quot;indices of start of string x in string y&quot;
   y _ss x
11 20 32
</pre>
<pre>
q)y ss x
11 20 32
</pre>
<p>178. index of first occurrence of string x in string y
</p>
<pre>
   x:&quot;st&quot;
   y:&quot;index of first occurrence of string x in string y&quot;
   *y _ss x
12
</pre>
<pre>
q)first y ss x
12
</pre>
<p>179. contour levels y at points with altitude x
</p>
<pre>
   cl:{y[-1++/~y&gt;x]}
   y:-100 0 10 100 1000 10000
   cl[-5;y]
-100
   cl[0;y]
0
   cl[99;y]
10
   cl[9;y]
0
   cl[10;y]
10
</pre>
<pre>
q)cl:{y[-1+sum not y&gt;x]}
q)y:-100 0 10 100 1000 10000
q)cl[-5;y]
-100
q)cl[0;y]
0
q)cl[99;y]
10
q)cl[9;y]
0
q)cl[10;y]
10
</pre>
<p>180. is x in range [y)
</p>
<pre>
   hc:{1 0~/:~x&lt;\:y}
   x:19 20 21 39 40 41
   y:20 40
   ~x&lt;\:y
(0 0
1 0
1 0
1 0
1 1
1 1)
   hc[x;y]
0 1 1 1 0 0
</pre>
<pre>
q)x:19 20 21 39 40 41
q)y:20 40
q)not x&lt;\:y
00b
10b
10b
10b
11b
11b
q)hc:{10b~/:not x&lt;\:y}
q)hc[x;y]
011100b
</pre>
<p>181. which class of y x belongs to
</p>
<pre>
   cl:{-1++/x&gt;/:y}
   x:87 9 931 7 27 92 654 1416 7 911
   y:0 50 100 1000
   +/x&gt;/:y
2 1 3 1 1 2 3 4 1 3
   -1++/x&gt;/:y
1 0 2 0 0 1 2 3 0 2
cl[x;y]
1 0 2 0 0 1 2 3 0 2
</pre>
<pre>
q)cl:{-1+sum x&gt;/:y}
q)x:87 9 931 7 27 92 654 1416 7 911
q)y:0 50 100 1000
q)sum x&gt;/:y
2 1 3 1 1 2 3 4 1 3
q)x&gt;/:y
1111111111b
1010011101b
0010001101b
0000000100b
q)-1 sum x&gt;/:y
'type
q)-1+ sum x&gt;/:y
1 0 2 0 0 1 2 3 0 2
q)cl[x;y]
1 0 2 0 0 1 2 3 0 2
</pre>
<p>182. indices of consecutive repeated elements
</p>
<pre>
   x:&quot;aaabccccdeee&quot;
   =x
(0 1 2
,3
4 5 6 7
,8
9 10 11)
   #:'=x
3 1 4 1 3
   &amp;1&lt;#:'=x
0 2 4
   {x[&amp;1&lt;#:'x]}=x
(0 1 2
4 5 6 7
9 10 11)
   re:{{x[&amp;1&lt;#:'x]}[=x]}
   re x
(0 1 2
4 5 6 7
9 10 11)
</pre>
<pre>
q)group x
a| 0 1 2
b| ,3
c| 4 5 6 7
   d| ,8
e| 9 10 11
q)count group x
5
q)count each group x
a| 3
b| 1
c| 4
d| 1
e| 3
q)where 1&lt;count each group x
&quot;ace&quot;
q)value 1&lt;count each group x
10101b
q)where value 1&lt;count each group x
0 2 4
</pre>
<p>183. maximum table
</p>
<pre>
   x:!10
   x&amp;\:x
(0 0 0 0 0 0 0 0 0 0
0 1 1 1 1 1 1 1 1 1
0 1 2 2 2 2 2 2 2 2
0 1 2 3 3 3 3 3 3 3
0 1 2 3 4 4 4 4 4 4
0 1 2 3 4 5 5 5 5 5
0 1 2 3 4 5 6 6 6 6
0 1 2 3 4 5 6 7 7 7
0 1 2 3 4 5 6 7 8 8
0 1 2 3 4 5 6 7 8 9)
</pre>
<pre>
q)x:key 10
q)x&amp;\:x
0 0 0 0 0 0 0 0 0 0
0 1 1 1 1 1 1 1 1 1
0 1 2 2 2 2 2 2 2 2
0 1 2 3 3 3 3 3 3 3
0 1 2 3 4 4 4 4 4 4
0 1 2 3 4 5 5 5 5 5
0 1 2 3 4 5 6 6 6 6
0 1 2 3 4 5 6 7 7 7
0 1 2 3 4 5 6 7 8 8
0 1 2 3 4 5 6 7 8 9
</pre>
<p>184. right justify fields x of length y to length g
</p>
<pre>
   x:&quot;abcdefghij&quot;
   y:2 3 4 1
   g:5
   a:+\0,-1_ y
   a
0 2 5 9
   a _ x
(&quot;ab&quot;
&quot;cde&quot;
&quot;fghi&quot;
,&quot;j&quot;)
   (g#&quot; &quot;),/:a _ x
(&quot; ab&quot;
&quot; cde&quot;
&quot; fghi&quot;
&quot; j&quot;)
   b:(-g)#/:(g#&quot; &quot;),/:a _ x
   b
(&quot; ab&quot;
&quot; cde&quot;
&quot; fghi&quot;
&quot; j&quot;)
   ,/b
   rj:{[x;y;g],/(-g)#/:(g#&quot; &quot;),/:(+\0,-1 _ y) _ x}
   rj[x;y;g]
&quot; ab cde fghi j&quot;
</pre>
<pre>
q)x:&quot;abcdefghij&quot;
q)y:2 3 4 1
q)g:5
q)a:sums 0,-1_y
q)a
0 2 5 9
q)a _ x
&quot;ab&quot;
&quot;cde&quot;
&quot;fghi&quot;
,&quot;j&quot;
q)(g#&quot; &quot;),/:a _ x
&quot;     ab&quot;
&quot;     cde&quot;
&quot;     fghi&quot;
&quot;     j&quot;
q)b:(neg g)#/:(g#&quot; &quot;),/:a _ x
q)b
&quot;   ab&quot;
&quot;  cde&quot;
&quot; fghi&quot;
&quot;    j&quot;
q)raze b
&quot;   ab  cde fghi    j&quot;
q)rj:{[x;y;g]raze(neg g)#/:(g#&quot; &quot;),/:(sums 0,-1_y) _ x}
q)rj[x;y;g]
&quot;   ab  cde fghi    j&quot;
</pre>
<p>185. left justify fields x of length y to length g
</p>
<pre>
   x:&quot;abcdefghij&quot;
   y:2 3 4 1
   g:5
   a:+\0,-1_ y
   a
0 2 5 9
   a _ x
(&quot;ab&quot;
&quot;cde&quot;
&quot;fghi&quot;
,&quot;j&quot;)
   ((:+\0,-1_ y) _ x),\:g#&quot; &quot;
(&quot;ab &quot;
&quot;cde &quot;
&quot;fghi &quot;
&quot;j &quot;)
   g#/:((:+\0,-1_ y) _ x),\:g#&quot; &quot;
(&quot;ab &quot;
&quot;cde &quot;
&quot;fghi &quot;
&quot;j &quot;)
   lj:{[x;y;g],/g#/L&#160;:+\0,-1_ y ),\:g#&quot; &quot; }
   rj[x;y;g]
&quot; ab cde fghi j&quot;
   lj:{[x;y;g],/g#/:((+\0,-1 _ y)_ x),\:g#&quot; &quot;}
   lj[x;y;g]
&quot;ab cde fghi j &quot;
</pre>
<pre>
q)x:&quot;abcdefghij&quot;
q)y:2 3 4 1
q)g:5
q)a:sums 0,-1_y
q)a
0 2 5 9
q)a _ x
&quot;ab&quot;
&quot;cde&quot;
&quot;fghi&quot;
,&quot;j&quot;
q)((sums 0,-1_y)_x),\:g#&quot; &quot;
&quot;ab     &quot;
&quot;cde     &quot;
&quot;fghi     &quot;
&quot;j     &quot;
q)g#/:((sums 0,-1_y)_x),\:g#&quot; &quot;
&quot;ab   &quot;
&quot;cde  &quot;
&quot;fghi &quot;
&quot;j    &quot;
q)lj:{[x;y;g]raze g#/:((sums 0,-1_y)_x),\:g#&quot; &quot;}
'lj
/lj is a reserved word
q)ljust:{[x;y;g]raze g#/:((sums 0,-1_y)_x),\:g#&quot; &quot;}
q)ljust[x;y;g]
&quot;ab   cde  fghi j    &quot;
</pre>
<p>186. annuity coefficient for x periods at interest rate y%
</p>
<pre>
   x:10 15 20 25
   y:8 9 10 15
   +1-(1+y%100)^\:-x
(0.537 0.578 0.614 0.753
0.685 0.725 0.761 0.877
0.785 0.822 0.851 0.939
0.854 0.884 0.908 0.97)
   ac:{(y%100)%/:+1-(1+y%100)^\:-x}
   ac[x;y]
(0.149 0.156 0.163 0.199
0.117 0.124 0.131 0.171
0.102 0.11 0.117 0.16
0.0937 0.102 0.11 0.155)
</pre>
<pre>
q)x:10 15 20 25
q)y:8 9 10 15
q)flip 1-xexp\:[(1+y%100);neg x]
0.5368065 0.5775892 0.6144567 0.7528153
0.6847583 0.725462  0.760608  0.8771055
0.7854518 0.8215691 0.8513564 0.9388997
0.8539821 0.8840322 0.907704  0.9696224
q)\P 3
q)flip 1-xexp\:[(1+y%100);neg x]
0.537 0.578 0.614 0.753
0.685 0.725 0.761 0.877
0.785 0.822 0.851 0.939
0.854 0.884 0.908 0.97
q)ac:{(y%100)%/:flip 1-xexp\:[(1+y%100);neg x]}
q)ac[x;y]
0.149  0.156 0.163 0.199
0.117  0.124 0.131 0.171
0.102  0.11  0.117 0.16
0.0937 0.102 0.11  0.155
</pre>
<p>187. direct matrix product
</p>
<pre>
   x:1+3 2#&#160;!6
   y:1+2 4#!8
   +:'x*\:\:y
   +:'x*\:\:y
(((1 2 3 4
2 4 6 8)
(5 6 7 8
10 12 14 16))
((3 6 9 12
4 8 12 16)
(15 18 21 24
20 24 28 32))
((5 10 15 20
6 12 18 24)
(25 30 35 40
30 36 42 48)))
   dp:{+:'x*\:\:y}
</pre>
<pre>
q)x:1+3 2#til 6
q)y:1+2 4#til 8
q)+:'[x*\:\:y]
1 2 3 4     2 4 6 8     5  6  7  8  10 12 14 16
3 6 9  12   4 8 12 16   15 18 21 24 20 24 28 32
5 10 15 20  6 12 18 24  25 30 35 40 30 36 42 48
q)dp:{+:'[x*\:\:y]}
</pre>
<p>188. Shur product
</p>
<pre>
   x
(1 2
3 4
5 6)
a   y
(1 2 3 4
5 6 7 8)
   ((*|^x)#x)*(*^y)#'y
(1 4
15 24)
</pre>
<p>189. add x to each row of y
</p>
<pre>
   x:1+!4
   y:3 4#2+!12
   y
(2 3 4 5
6 7 8 9
10 11 12 13)
   x+/:y
(3 5 7 9
7 9 11 13
11 13 15 17)
</pre>
<pre>
q)x:1+til 4
q)y:3 4#2+til 12
q)y
2  3  4  5
6  7  8  9
10 11 12 13
q)x+/:y
3  5  7  9
7  9  11 13
11 13 15 17
</pre>
<p>190. see 189
</p><p>191. Shur sum
</p>
<pre>
   x
(1 2
3 4
5 6)
   y
(1 2 3 4
5 6 7 8)
((*|^x)#x)+(*^y)#'y
(2 4
8 10)
</pre>
<p>192. add x to each column of y
</p>
<pre>
   x:1+!2
   x
1 2
   y:2 5#3+!10
   y
(3 4 5 6 7
8 9 10 11 12)
   x+'y
(4 5 6 7 8
10 11 12 13 14)
</pre>
<pre>
q)x:1+til 2
q)y:2 5#3+til 10
q)x+'y
4  5  6  7  8
10 11 12 13 14
</pre>
<p>193. see 192
</p><p>195. upper triangular matrix of order x
</p>
<pre>
   x:5
   {~x&gt;\:x}!x
(1 1 1 1 1
0 1 1 1 1
0 0 1 1 1
0 0 0 1 1
0 0 0 0 1)
   ut:{{~x&gt;\:x}[!x]}
   ut 5
(1 1 1 1 1
0 1 1 1 1
0 0 1 1 1
0 0 0 1 1
0 0 0 0 1)
</pre>
<pre>
q){not x&gt;\:x} til x
11111b
01111b
00111b
00011b
00001b
q)ut:{{not x&gt;\:x}til x}
q)ut 5
11111b
01111b
00111b
00011b
00001b
</pre>
<p>196. lower triangular matrix of order x
</p>
<pre>
   lt:{{~x&lt;\:x}[!x]}
   lt 5
(1 0 0 0 0
1 1 0 0 0
1 1 1 0 0
1 1 1 1 0
1 1 1 1 1)
</pre>
<pre>
q)lt:{{not x&lt;\:x}til x}
q)lt 5
10000b
11000b
11100b
11110b
11111b
</pre>
<p>197. identity matrix of order x
</p>
<pre>
   id:{(x,x)#1,x#0}
   id 5
(1 0 0 0 0
0 1 0 0 0
0 0 1 0 0
0 0 0 1 0
0 0 0 0 1)
q)id:{(x,x)#1,x#0}
q)id 5
1 0 0 0 0
0 1 0 0 0
0 0 1 0 0
0 0 0 1 0
0 0 0 0 1
/(5,5) syntax needs further study
q)(5;5)#1,5#0
1 0 0 0 0
0 1 0 0 0
0 0 1 0 0
0 0 0 1 0
0 0 0 0 1
</pre>
<p>198. Hilbert matrix of order x
</p>
<pre>
   hm:{%1+(!x)+/:!x}
   hm 5
(1 0.5 0.333 0.25 0.2
0.5 0.333 0.25 0.2 0.167
0.333 0.25 0.2 0.167 0.143
0.25 0.2 0.167 0.143 0.125
0.2 0.167 0.143 0.125 0.111)
</pre>
<pre>
q)hm:{reciprocal 1+(til x)+/:til x}
q)hm 5
1         0.5       0.3333333 0.25      0.2
0.5       0.3333333 0.25      0.2       0.1666667
0.3333333 0.25      0.2       0.1666667 0.1428571
0.25      0.2       0.1666667 0.1428571 0.125
0.2       0.1666667 0.1428571 0.125     0.1111111
</pre>
<p>199. multiplication table of order x
</p>
<pre>
   mt:{{x*\:x}[1+!x]}
   mt 5
(1 2 3 4 5
2 4 6 8 10
3 6 9 12 15
4 8 12 16 20
5 10 15 20 25)
</pre>
<pre>
q)mt:{{x*\:x}[1+til x]}
q)mt 5
1 2  3  4  5
2 4  6  8  10
3 6  9  12 15
4 8  12 16 20
5 10 15 20 25
</pre>
<p>200. replicating a dimension of rank-3 array x y-fold
</p>
<pre>
   x:2 3 3#1+!18
   y:3
   x[;,/(y#1)*\:!(^x)[1];]
((1 2 3
4 5 6
7 8 9
1 2 3
4 5 6
7 8 9
1 2 3
4 5 6
7 8 9)
(10 11 12
13 14 15
16 17 18
10 11 12
13 14 15
16 17 18
10 11 12
13 14 15
16 17 18))
</pre>
<p>201. moving index y-wide for x
</p>
<pre>
   x:&quot;abcdef&quot;
   y:3
   (!(#x)-y-1)+\:y
3 4 5 6
</pre>
<pre>
q)x:&quot;abcdef&quot;
q)y:3
q)(til (count x)-y-1)+\:y
3 4 5 6
</pre>
<p>202. indices of infixes of length y
</p>
<pre>
   x:4+!5
   x
4 5 6 7 8
   y:3
   x+\:!y
(4 5 6
5 6 7
6 7 8
7 8 9
8 9 10)
</pre>
<pre>
q)x:4+til 5
q)y:3
q)x+\:til 3
4 5 6
5 6 7
6 7 8
7 8 9
8 9 10
</pre>
<p>203. one-column matrix from numeric list
</p>
<pre>
   x:7 _draw 100
   x
34 31 51 29 35 17 89
+,x
(,34
,31
,51
,29
,35
,17
,89)
</pre>
<pre>
q)x:34 31 51 29 35 17 89
q)flip,x
+:
34
31
51
29
35
17
89
</pre>
<p>204. numeric array and its negative
</p>
<pre>
   x:3+3 4#&#160;!12
   x
(3 4 5 6
7 8 9 10
11 12 13 14)
   x,''-x
((3 -3
4 -4
5 -5
6 -6)
(7 -7
8 -8
9 -9
10 -10)
(11 -11
12 -12
13 -13
14 -14))
</pre>
<pre>
q)x:3+3 4#til 12
q)x,''neg x
3 -3   4 -4   5 -5   6 -6
7  -7  8  -8  9  -9  10 -10
11 -11 12 -12 13 -13 14 -14
</pre>
<p>205. remove trailing blank rows
</p>
<pre>
   x:+5 9#&quot;abc de &quot;
   x
(&quot;aaaaa&quot;
&quot;bbbbb&quot;
&quot;ccccc&quot;
&quot; &quot;
&quot;ddddd&quot;
&quot;eeeee&quot;
&quot; &quot;
&quot; &quot;
&quot; &quot;)
   x~\:(#+x)#&quot; &quot;
0 0 0 1 0 0 1 1 1
   ~x~\:(#+x)#&quot; &quot;
1 1 1 0 1 1 0 0 0
   ||\|~x~\:(#+x)#&quot; &quot;
1 1 1 1 1 1 0 0 0
   &amp;||\|~x~\:(#+x)#&quot; &quot;
0 1 2 3 4 5
   rtr:{x[&amp;||\|~x~\:(#+x)#&quot; &quot;]}
   rtr[x]
(&quot;aaaaa&quot;
&quot;bbbbb&quot;
&quot;ccccc&quot;
&quot; &quot;
&quot;ddddd&quot;
&quot;eeeee&quot;)
</pre>
<pre>
q)x:flip 5 9#&quot;abc de   &quot;
q)x
&quot;aaaaa&quot;
&quot;bbbbb&quot;
&quot;ccccc&quot;
&quot;     &quot;
&quot;ddddd&quot;
&quot;eeeee&quot;
&quot;     &quot;
&quot;     &quot;
&quot;     &quot;
q)x~\:(count flip x)#&quot; &quot;
000100111b
q)not x~\:(count flip x)#&quot; &quot;
111011000b
q)reverse maxs reverse not  x~\:(count flip x)#&quot; &quot;
111111000b
q)where reverse maxs reverse not  x~\:(count flip x)#&quot; &quot;
0 1 2 3 4 5
q)rtr:{x[where reverse maxs reverse not  x~\:(count flip x)#&quot; &quot;]}
q)rtr x
&quot;aaaaa&quot;
&quot;bbbbb&quot;
&quot;ccccc&quot;
&quot;     &quot;
&quot;ddddd&quot;
&quot;eeeee&quot;
</pre>
<p>206. remove duplicate rows
</p>
<pre>
   x:(&quot;abc&quot;
&quot;def&quot;
&quot;abc&quot;
&quot;ghi&quot;
&quot;jkl&quot;
&quot;abc&quot;
&quot;ghi&quot;
&quot;abc&quot;)
  &#160;?x
(&quot;abc&quot;
&quot;def&quot;
&quot;ghi&quot;
&quot;jkl&quot;)
</pre>
<pre>
q)x:(&quot;abc&quot;;&quot;def&quot;;&quot;abc&quot;;&quot;ghi&quot;;&quot;jkl&quot;;&quot;abc&quot;;&quot;ghi&quot;;&quot;abc&quot;)
q)distinct x
&quot;abc&quot;
&quot;def&quot;
&quot;ghi&quot;
&quot;jkl&quot;
</pre>
<p>207. indices in matrix x of rows of matrix y
</p>
<pre>
   x:+3 8#&quot;abcdefgh&quot;
   x
(&quot;aaa&quot;
&quot;bbb&quot;
&quot;ccc&quot;
&quot;ddd&quot;
&quot;eee&quot;
&quot;fff&quot;
&quot;ggg&quot;
&quot;hhh&quot;)
   y:+3 4#&quot;afmc&quot;
   y
(&quot;aaa&quot;
&quot;fff&quot;
&quot;mmm&quot;
&quot;ccc&quot;)
   x?/:y
0 5 8 2
</pre>
<pre>
q)x:flip 3 8#&quot;abcdefgh&quot;
q)x
&quot;aaa&quot;
&quot;bbb&quot;
&quot;ccc&quot;
&quot;ddd&quot;
&quot;eee&quot;
&quot;fff&quot;
&quot;ggg&quot;
&quot;hhh&quot;
</pre>
<pre>
q)y:flip 3 4#&quot;afmc&quot;
q)y
&quot;aaa&quot;
&quot;fff&quot;
&quot;mmm&quot;
&quot;ccc&quot;
q)x?/:y
0 5 8 2
</pre>
<p>208. see 206
</p><p>209. remove trailing blank columns
</p>
<pre>
   x:3 9#&quot;abc de &quot;
   x
(&quot;abc de &quot;
&quot;abc de &quot;
&quot;abc de &quot;)
   +rtr[+x]
(&quot;abc de&quot;
&quot;abc de&quot;
&quot;abc de&quot;)
</pre>
<pre>
q)rtr:{x[where reverse maxs reverse not  x~\:(count flip x)#&quot; &quot;]}
q)x:3 9#&quot;abc de   &quot;
q)x
&quot;abc de   &quot;
&quot;abc de   &quot;
&quot;abc de   &quot;
q)rtr x
&quot;abc de   &quot;
&quot;abc de   &quot;
&quot;abc de   &quot;
q)rtr flip x
&quot;aaa&quot;
&quot;bbb&quot;
&quot;ccc&quot;
&quot;   &quot;
&quot;ddd&quot;
&quot;eee&quot;
q)flip rtr flip x
&quot;abc de&quot;
&quot;abc de&quot;
&quot;abc de&quot;
</pre>
<p>210. remove leading blank columns
</p>
<pre>
   x:3 9#&quot; ed cba&quot;
   x
(&quot; ed cba&quot;
&quot; ed cba&quot;
&quot; ed cba&quot;)
   +|rtr[|+x]
(&quot;ed cba&quot;
&quot;ed cba&quot;
&quot;ed cba&quot;)
</pre>
<pre>
q)rtr:{x[where reverse maxs reverse not  x~\:(count flip x)#&quot; &quot;]}
q)x:3 9#&quot;   ed cha&quot;
q)x
&quot;   ed cha&quot;
&quot;   ed cha&quot;
&quot;   ed cha&quot;
q)flip reverse rtr[reverse flip x]
&quot;ed cha&quot;
&quot;ed cha&quot;
&quot;ed cha&quot;
</pre>
<p>211. remove leading blank rows
</p>
<pre>
   x:|+3 9#&quot;abc de &quot;
   x
(&quot; &quot;
&quot; &quot;
&quot; &quot;
&quot;eee&quot;
&quot;ddd&quot;
&quot; &quot;
&quot;ccc&quot;
&quot;bbb&quot;
&quot;aaa&quot;)
|rtr[|x]
(&quot;eee&quot;
&quot;ddd&quot;
&quot; &quot;
&quot;ccc&quot;
&quot;bbb&quot;
&quot;aaa&quot;)
</pre>
<pre>
q)rtr:{x[where reverse maxs reverse not  x~\:(count flip x)#&quot; &quot;]}
q)x:reverse flip 3 9#&quot;abc de   &quot;
q)x
&quot;   &quot;
&quot;   &quot;
&quot;   &quot;
&quot;eee&quot;
&quot;ddd&quot;
&quot;   &quot;
&quot;ccc&quot;
&quot;bbb&quot;
&quot;aaa&quot;
q)reverse rtr[reverse x]
&quot;eee&quot;
&quot;ddd&quot;
&quot;   &quot;
&quot;ccc&quot;
&quot;bbb&quot;
&quot;aaa&quot;
</pre>
<p>213. maxima of infixes of x specified by boolean list y
</p>
<pre>
   x:-17 7 30 12 5 2 -5 6 -3 -19
   y:10#1 1 0
   y
1 1 0 1 1 0 1 1 0 1
   |/x[&amp;y]
12
</pre>
<pre>
q)x:-17 7 30 12 5 2 -5 6 -3 -19
q)y:10#1 1 0
q)y
1 1 0 1 1 0 1 1 0 1
q)max x[where y]
12
</pre>
<p>214. see 159
</p><p>215. see 159
</p><p>216. rows of matrix x starting with y
</p>
<pre>
   x:(&quot;sit&quot;;&quot;sat&quot;;&quot;sin&quot;;&quot;tin&quot;)
   x
(&quot;sit&quot;
&quot;sat&quot;
&quot;sin&quot;
&quot;tin&quot;)
   y:&quot;si&quot;
   y _lin/:x
(1 1
1 0
1 1
0 1)
   &amp;/'y _lin/:x
1 0 1 0
   &amp;&amp;/'y _lin/:x
0 2
   rb:{x[&amp;&amp;/'y _lin/:x]}
  rb[x;y]
(&quot;sit&quot;
&quot;sin&quot;)
</pre>
<pre>
q)x:(&quot;sit&quot;;&quot;sat&quot;;&quot;sin&quot;;&quot;tin&quot;)
q)y:&quot;si&quot;
q)y in/:x
11b
10b
11b
01b
q)min'[y in/:x]
1010b
q)where min'[y in/:x]
0 2
q)rb:{x[where min'[y in/:x]]}
q)rb[x;y]
&quot;sit&quot;
&quot;sin&quot;
</pre>
<p>217. index of last nonblank in string
</p>
<pre>
   x:(&quot;love's not &quot;
&quot;time's fool &quot;
&quot;though rosy &quot;)
   ln:{*|&amp;~&quot; &quot;=x}
   ln'x
9 10 10
</pre>
<pre>
q)x:(&quot;love's not &quot;;&quot;time's fool &quot;;&quot;though rosy &quot;)
q)ln:{last where not &quot; &quot;=x}
q)ln'[x]
9 10 10
</pre>
<p>218. single blank row from multiple
</p>
<pre>
   s:&quot; a bc def g&quot;
   a:~s=&quot; &quot;
   a
0 0 1 0 1 1 0 0 1 1 1 0 0 0 0 1
   b:~a
   b
1 1 0 1 0 0 1 1 0 0 0 1 1 1 1 0
   c:&gt;':0,b
   c
1 0 0 1 0 0 1 0 0 0 0 1 0 0 0 0
   d:a|c
   d
1 0 1 1 1 1 1 0 1 1 1 1 0 0 0 1
   e:&amp;d
   e
0 2 3 4 5 6 8 9 10 11 15
   s[e]
&quot; a bc def g&quot;
   x:+3 10#&quot;a b c d&quot;
   x
(&quot;aaa&quot;
&quot; &quot;
&quot; &quot;
&quot;bbb&quot;
&quot; &quot;
&quot;ccc&quot;
&quot; &quot;
&quot; &quot;
&quot; &quot;
&quot;ddd&quot;)
   a:x~\:(#+x)#&quot; &quot;
   a
0 1 1 0 1 0 1 1 1 0
   b:~a
   c:&gt;':0,a
   c
0 1 0 0 1 0 1 0 0 0
   d:b|c
   d
1 1 0 1 1 1 1 0 0 1
   e:&amp;d
   e
0 1 3 4 5 6 9
   x[e]
(&quot;aaa&quot;
&quot; &quot;
&quot;bbb&quot;
&quot; &quot;
&quot;ccc&quot;
&quot; &quot;
&quot;ddd&quot;)
   rs:{x[{&amp;(~x)|xf[x]}x~\:(#+x)#&quot; &quot;]}
   rs x
(&quot;aaa&quot;
&quot; &quot;
&quot;bbb&quot;
&quot; &quot;
&quot;ccc&quot;
&quot; &quot;
&quot;ddd&quot;)
</pre>
<pre>
q)s:&quot;  a bc  def    g&quot;
q)a:not s=&quot; &quot;
q)a
0010110011100001b
q)b:not a
/q)c:&gt;':[0b,b]
/q)c
/01001001000010000b
q)b
1101001100011110b
q)c:&gt;':[b]
q)c
1001001000010000b
q)d:a|c
q)d
1011111011110001b
q)e:where d
q)e
0 2 3 4 5 6 8 9 10 11 15
q)s[e]
&quot; a bc def g&quot;
q)x:flip 3 10#&quot;a  b  c  d&quot;
q)x
&quot;aaa&quot;
&quot;   &quot;
&quot;   &quot;
&quot;bbb&quot;
&quot;   &quot;
&quot;   &quot;
&quot;ccc&quot;
&quot;   &quot;
&quot;   &quot;
&quot;ddd&quot;
q)a:x~\:(count flip x)#&quot; &quot;
q)a
0110110110b
q)b:not a
q)c:&gt;':[a]
q)c
0100100100b
q)d:b|c
q)d
1101101101b
q)e:where d
q)x[e]
&quot;aaa&quot;
&quot;   &quot;
&quot;bbb&quot;
&quot;   &quot;
&quot;ccc&quot;
&quot;   &quot;
&quot;ddd&quot;
</pre>
<p>219. see 147
</p><p>220. remove duplicate blank columns
</p>
<pre>
   x:3 9#&quot;a b c d&quot;
   x
(&quot;a b c d&quot;
&quot;a b c d&quot;
&quot;a b c d&quot;)
+rs[+x]
(&quot;a b c d&quot;
&quot;a b c d&quot;
&quot;a b c d&quot;)
</pre>
<p>221. is x an integer in interval [ g,h )
</p>
<pre>
   g:6
   h:12
   x:18
   (x=_ x)&amp;(~x&lt;g)&amp;(x&lt;h)
0
   x:7
   (x=_ x)&amp;(~x&lt;g)&amp;(x&lt;h)
1
   x:7.1
   (x=_ x)&amp;(~x&lt;g)&amp;(x&lt;h)
0
</pre>
<pre>
q)g:6
q)h:12
q)x:18
q)
q)(x=floor x)&amp;(not x&lt;g)&amp;(x&lt;h)
0b
q)x:7
q)(x=floor x)&amp;(not x&lt;g)&amp;(x&lt;h)
1b
q)x:7.1
q)(x=floor x)&amp;(not x&lt;g)&amp;(x&lt;h)
0b
</pre>
<p>222. maximum of x with weights y
</p>
<pre>
   x:1 2 3 4 5
   y:5 4 3 2 1
   |/x*y
9
</pre>
<pre>
q)x:1 2 3 4 5
q)y:5 4 3 2 1
q)max x*y
9
</pre>
<p>223. minimum of x with weights y
</p>
<pre>
   x:1 2 3 4 5
   y:5 4 3 2 1
   &amp;/x*y
5
</pre>
<pre>
q)x:1 2 3 4 5
q)y:5 4 3 2 1
q)min x*y
5
</pre>
<p>224. extend distance table to next leg
</p>
<pre>
   x:( 0 50 80 20 999
&gt; 50 0 20 40 30
&gt; 80 20 0 999 30
&gt; 20 40 999 0 10
&gt; 999 30 30 10 0)
notice x[0;2] is 80 while x[0;1]+x[1;2] is 70
   x(&amp;/+)\:x
(0 50 70 20 30
50 0 20 40 30
70 20 0 40 30
20 40 40 0 10
30 30 30 10 0)
</pre>
<p>225. remove blank rows
</p>
<pre>
   x:(&quot;aaa&quot;
&gt; &quot;bbb&quot;
&gt; &quot; &quot;
&gt; &quot;ccc&quot;
&gt; &quot; &quot;)
   x _dv &quot; &quot;
(&quot;aaa&quot;
&quot;bbb&quot;
&quot;ccc&quot;)
</pre>
<p>226. remove blank columns
</p>
<pre>
   x:+4 4#&quot;xxxx hhhh ii&quot;
   x
(&quot;x h &quot;
&quot;x h &quot;
&quot;x hi&quot;
&quot;x hi&quot;)
   +(+x)_dv &quot; &quot;
(&quot;xh &quot;
&quot;xh &quot;
&quot;xhi&quot;
&quot;xhi&quot;)
</pre>
<p>227. see 69
</p><p>228. is y a row of x
</p>
<pre>
   x:(&quot;xxx&quot;;&quot;yyy&quot;;&quot;zzz&quot;;&quot;yyy&quot;)
   x?&quot;yyy&quot;
1
</pre>
<pre>
q)x?&quot;yyy&quot;
1
</pre>
<p>229. see 228
</p><p>230. extend a transitive binary relation
</p>
<pre>
   x:(0 1 0 0
&gt; 0 0 1 1
&gt; 1 0 0 0
&gt; 0 0 1 0)
   x(|/&amp;)\:x
(0 0 1 1
1 0 1 0
0 1 0 0
1 0 0 0)
</pre>
<pre>
q)x:(0 1 0 0;0 0 1 1;1 0 0 0;0 0 1 0)
q)x(|/&amp;)\:x
'/
q)x(|/[&amp;])\:x
0 0 0 0 0 0 1 1 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0
0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0
</pre>
<p>231. which rows of x contain elements different from y
</p>
<pre>
   x:(&quot;aaa&quot;;&quot;bbb&quot;;&quot;ooo&quot;;&quot;pop&quot;)
   y:&quot;o&quot;
   ~x=y
(1 1 1
1 1 1
0 0 0
1 0 1)
   |/'~x=y
1 1 0 1
</pre>
<pre>
q)x:(&quot;aaa&quot;;&quot;bbb&quot;;&quot;ooo&quot;;&quot;pop&quot;)
q)y:&quot;o&quot;
q)not  x=y
111b
111b
000b
101b
q)max each not x=y
1101b
</pre>
<p>232. is y a row of x
</p>
<pre>
   x:(&quot;aaa&quot;
&quot;bbb&quot;
&quot;ooo&quot;
&quot;ppp&quot;
&quot;kkk&quot;)
   y:&quot;ooo&quot;
   y _in x
1
</pre>
<pre>
q)y in x
1b
</pre>
<p>233. is x within range [ y )
</p>
<pre>
   x:9
   y:(1 9
&gt; 9 16
&gt; 5 7
&gt; 8 20
&gt; 6 10)
   x&lt;'y
(0 0
0 1
0 0
0 1
0 1)
   &lt;/'x&lt;y
0 1 0 1 1
   x(&lt;/&lt;)/:y
0 1 0 1 1
</pre>
<pre>
q)x:9
q)y:(1 9;9 16;5 7;8 20;6 10)
q)x&lt;'y
00b
01b
00b
01b
01b
q)&lt;/'[x&lt;y]
01011b
/x(&lt;/&lt;)/:y needs more work
</pre>
<p>234. is x within the range ( y ]
</p>
<pre>
   ~x&gt;'y
(0 1
1 1
0 0
0 1
0 1)
   &lt;/'~x&gt;'y
1 0 0 1 1
</pre>
<pre>
q)x:9
q)y:(1 9;9 16;5 7;8 20;6 10)
q)not x&gt;'y
01b
11b
00b
01b
01b
q)&lt;/'[not x&gt;'y]
10011b
</pre>
<p>235. see 234
</p><p>236. number of occurrences of x in y
</p>
<pre>
   y:3+7 _draw 6
   y
6 4 7 7 6 6 4
   x:7
   +/x=y
2
   x(+/=)/:y
0 0 1 1 0 0 0
</pre>
<p>237. average (mean) of x weighted by y
</p>
<pre>
   y:78 80 90 88 72
   x:20 15 20 22 19
   x*y
1560 1200 1800 1936 1368
   +/x*y
7864
   (+/x*y)%#x
1572.8
</pre>
<pre>
q)y:78 80 90 88 72
q)x:20 15 20 22 19
q)x*y
1560 1200 1800 1936 1368
q)sum x*y
7864
q)(sum x*y)%count x
1572.8
</pre>
<p>239. sum reciprocal series
</p>
<pre>
   x:10 9 10 7 8
   y:80 63 70 63 64
   +/y%x
39.0
</pre>
<pre>
q)x:10 9 10 7 8
q)y:80 63 70 63 64
q)sum y%x
39f
</pre>
<p>240. matrix product
</p>
<pre>
   x:(1 2 3
&gt; 4 5 6)
   y:(1 2
&gt; 3 4
&gt; 5 6)
   x _mul y
(22 28
49 64)
   x(+/*)\:y
(22 28
49 64)
</pre>
<pre>
q)x:(1 2 3;4 5 6)
q)y:(1 2;3 4;5 6)
q)fx:`float$x
q)fy:`float$y
q)fx$fy
22 28
49 64
q)fx mmu fy
22 28
49 64
</pre>
<p>241. sum over subsets of x specified by y
</p>
<pre>
   x:1+3 4#&#160;!12
   x
(1 2 3 4
5 6 7 8
9 10 11 12)
   y:4 3#1 0
   y
(1 0 1
0 1 0
1 0 1
0 1 0)
   x _mul y
(4 6 4
12 14 12
20 22 20)
</pre>
<pre>
q)x:1+3 4#til 12
q)y:4 3#1 0
q)y
1 0 1
0 1 0
1 0 1
0 1 0
q)fx:`float$x
q)fy:`float$y
q)x mmu y
'length
q)x
1 2  3  4
5 6  7  8
9 10 11 12
q)fx mmu fy
4  6  4
12 14 12
20 22 20
/It's annoying that mmu returns 'length when it should say 'type.
</pre>
<p>242. sum squares of x
</p>
<pre>
   x:1 2 3 4 5
   +/x*x
55
</pre>
<pre>
q)sum x*x
55
</pre>
<p>243. dot product of vectors
</p>
<pre>
   x:1 2 3 4 5
   y:10 20 30 40 50
   +/x*y
550
</pre>
<pre>
q)sum x*y
550
</pre>
<p>244. product over subsets of x specified by y
</p>
<pre>
   x:1+3 4#! 12
   x
(1 2 3 4
5 6 7 8
9 10 11 12)
   y:4 3#1 0
   y
(1 0 1
0 1 0
1 0 1
0 1 0
   x (*/^)\:y
(3 8 3.0
35 48 35.0
99 120 99.0)
</pre>
<p>245. randomize the random seed
</p>
<pre>
   _t
-1154371779
   \r -1154371779
   \r
-1154371779
</pre>
<pre>
q)\S
-314159
q)\S -1154371779
q)\S
-1154371779
</pre>
<p>246. see 242
</p><p>247. interlace x[i]#1 and y[i]#0
</p>
<pre>
   x:1 3
   y:2 4
   a:,/+(x;y)
   a
1 2 3 4
   b:(#x,y)#1 0
   b
1 0 1 0
   c:a#'b
   c
(,1
0 0
1 1 1
0 0 0 0)
   d:,/c
   d
1 0 0 1 1 1 0 0 0 0
   ,/(,/+(x;y))#'(#x,y)#1 0
1 0 0 1 1 1 0 0 0 0
</pre>
<pre>
q)x:1 3
q)y:2 4
q)a:raze flip(x;y)
q)a
1 2 3 4
q)b(count x,y)#1 0
'b
q)b:(count x,y)#1 0
q)b
1 0 1 0
q)c:a#'b
q)c
,1
0 0
1 1 1
0 0 0 0
q)d:raze  c
q)d
1 0 0 1 1 1 0 0 0 0
q)raze(raze flip(x;y))#'(count x,y)#1 0
1 0 0 1 1 1 0 0 0 0
</pre>
<p>248. center text x in line of width y
</p>
<pre>
   x:&quot;1234567890&quot;
   y:16
   a:y#x,y#&quot; &quot;
   a
&quot;1234567890 &quot;
   b:_ -0.5*y-#x
   b
3
   c:b!a
   c
&quot; 1234567890 &quot;
   ct:{(_ -0.5*y-#x)!y#x,y#&quot; &quot;}
   ct[x;y]
&quot; 1234567890 &quot;
   p:(&quot;1234567890&quot;;&quot;1234&quot;;&quot;123456&quot;;&quot;1234567890123456&quot;)
   p
(&quot;1234567890&quot;
&quot;1234&quot;
&quot;123456&quot;
&quot;1234567890123456&quot;)
   ct\:[p;y]
(&quot; 1234567890 &quot;
&quot; 1234 &quot;
&quot; 123456 &quot;
&quot;1234567890123456&quot;)
</pre>
<pre>
q)x:&quot;1234567890&quot;
q)y:16
q)a:y#x,y#&quot; &quot;
q)a
&quot;1234567890      &quot;
q)b:_ -0.5*y-#x
'
q)b:_ -0.5*y-count x
'
q)b:_ neg 0.5*y-count x
'
q)b:floor neg 0.5*y-count x
q)b
-3
q)b:floor (neg 0.5)*y-count x
q)b
-3
q)b:floor 0.5*y-count x
q)b
3
</pre>
<p>249. offset enumeration
</p>
<pre>
   x:10
   y:3
   x+!y
10 11 12
   oi:{x+!y}
   oi[x;y]
10 11 12
   x:10 20 30
   y:3 4 2
   oi'[x;y]
(10 11 12
20 21 22 23
30 31)
   ,/oi'[x;y]
10 11 12 20 21 22 23 30 31
</pre>
<pre>
q)x:10
q)y:3
q)x+til y
10 11 12
q)oi:{x+til y}
q)x:10 20 30
q)y:3 4 2
q)oi'[x;y]
10 11 12
20 21 22 23
30 31
q)raze oi'[x;y]
10 11 12 20 21 22 23 30 31
</pre>
<p>250. replicate y x times
</p>
<pre>
   x:3
   y:10
   x#y
10 10 10
   rp:{x#y}
   rp[x;y]
10 10 10
   x:3 4 2
   y:10 20 30
   rp'[x;y]
(10 10 10
20 20 20 20
30 30)
   ,/rp'[x;y]
10 10 10 20 20 20 20 30 30
</pre>
<pre>
q)x:3
q)y:10
q)x#y
10 10 10
q)rp:{x#y}
q)rp[x;y]
10 10 10
q)x:3 4 2
q)y:10 20 30
q)rp'[x;y]
10 10 10
20 20 20 20
30 30
q)raze rp'[x;y]
10 10 10 20 20 20 20 30 30
</pre>
<p>251. see 250
</p><p>252. x alternate takes of 1s and 0s
</p>
<pre>
   x:1 2 3 4 5
   b:(#x)#1 0
   b
1 0 1 0 1
   c:x#'b
   c
(,1
0 0
1 1 1
0 0 0 0
1 1 1 1 1)
   d:,/c
   d
1 0 0 1 1 1 0 0 0 0 1 1 1 1 1
   ,/x#'(#x)#1 0
1 0 0 1 1 1 0 0 0 0 1 1 1 1 1
</pre>
<pre>
q)x:1 2 3 4 5
q)b:(count x)#1 0
q)b
1 0 1 0 1
q)c:x#'b
q)c
,1
0 0
1 1 1
0 0 0 0
1 1 1 1 1
q)d:raze c
q)d
1 0 0 1 1 1 0 0 0 0 1 1 1 1 1
q)raze x#'(count x)#1 0
1 0 0 1 1 1 0 0 0 0 1 1 1 1 1
</pre>
<p>253. see 250
</p><p>254. running parity of infixes of y indicated by x
</p>
<pre>
   x:1 0 0 0 0 1 0 0 0 0 1 0 0 0
   y:1 0 0 1 1 1 0 0 1 0 1 1 0 0
   a:&amp;x
   a
0 5 10
   b:a _ y
   b
(1 0 0 1 1
1 0 0 1 0
1 1 0 0)
   c:(+\'b)!\:2
   c
(1 1 1 0 1
1 1 1 0 0
1 0 0 0)
   d:,/c
   d
1 1 1 0 1 1 1 1 0 0 1 0 0 0
</pre>
<p>255. running sum of infixes of y indicated by x
</p>
<pre>
	 x:1 0 0 0 1 0 0 0 1
   y:1 2 3 4 5 6 7 8 9
   a:&amp;x
   a
0 4 8
   b:a _ y
   b
(1 2 3 4
5 6 7 8
,9)
   c:+\'b
   c
(1 3 6 10
5 11 18 26
,9)
   d:,/c
   d
1 3 6 10 5 11 18 26 9
   rs:{,/+\'(&amp;x)_ y}
   rs[x;y]
1 3 6 10 5 11 18 26 9
</pre>
<pre>
q)x:1 0 0 0 1 0 0 0 1
q)y:1 2 3 4 5 6 7 8 9
q)a:where x
q)
q)a
0 4 8
q)b:a _ y
q)b
1 2 3 4
5 6 7 8
,9
q)c:sums each b
q)c
1 3 6 10
5 11 18 26
,9
q)d:raze b
q)d
1 2 3 4 5 6 7 8 9
q)d:raze c
q)d
1 3 6 10 5 11 18 26 9
q)rs:{raze sums each (where x) _ y}
q)rs[x;y]
1 3 6 10 5 11 18 26 9
</pre>
<p>256. groups of 1s in y pointed at by x
</p>
<pre>
   y
0 0 0 1 1 1 1 1 1 0 0 1 1 1 1 1
   x
0 0 0 1 0 0 0 0 1 0 0 1 0 0 0 1
   a:+\&gt;':0,y
   a
0 0 0 1 1 1 1 1 1 1 1 2 2 2 2 2
   y&amp;a=|\x*a
0 0 0 1 1 1 1 1 1 0 0 1 1 1 1 1
</pre>
<pre>
q)y:0 0 0 1 1 1 1 1 1 0 0 1 1 1 1 1
q)x:0 0 0 1 0 0 0 0 1 0 0 1 0 0 0 1
q)a:sums &gt;':[y]
q)a
1 1 1 2 2 2 2 2 2 2 2 3 3 3 3 3
q)a:sums &gt;':[0,y]
q)a
1 1 1 1 2 2 2 2 2 2 2 2 3 3 3 3 3
q)a:+\&gt;':[0,y]
'\
q)a:sums &gt;':[0,y]
q)a:sums &gt;':[y]
q)a
1 1 1 2 2 2 2 2 2 2 2 3 3 3 3 3
q)a-1
0 0 0 1 1 1 1 1 1 1 1 2 2 2 2 2
q)a:a-1
q)y&amp;a=maxs x*a
0 0 0 1 1 1 1 1 1 0 0 1 1 1 1 1
</pre>
<p>257. sums of infixes of x determined by lengths y
</p>
<pre>
   x:1+!10
   x
1 2 3 4 5 6 7 8 9 10
   y:2 3 2 3
   a:+\0,-1 _ y
   a
0 2 5 7
   a _ x
(1 2
3 4 5
6 7
8 9 10)
   +/'a _ x
3 12 13 27
</pre>
<pre>
q)x:1+til 10
q)y:2 3 2 3
q)a:sums 0,-1 _ y
q)a
0 2 5 7
q)a _ x
1 2
3 4 5
6 7
8 9 10
q)sum each a _ x
3 12 13 27
</pre>
<p>259. removing leading and trailing blanks
</p>
<pre>
   x:&quot; abcd e fg &quot;
   a:~x=&quot; &quot;
   a
0 0 0 1 1 1 1 0 1 0 0 1 1 0 0 0
   (|\a)&amp;(||\|a)
0 0 0 1 1 1 1 1 1 1 1 1 1 0 0 0
   &amp;(|\a)&amp;(||\|a)
3 4 5 6 7 8 9 10 11 12
   x[&amp;(|\a)&amp;(||\|a)]
&quot;abcd e fg&quot;
   lt:{x[&amp;(|\a)&amp;||\|a:~x=&quot; &quot;]}
   lt x
&quot;abcd e fg&quot;
</pre>
<pre>
q)x:&quot; abcd e fg &quot;
q)x:&quot;   abcd e  fg   &quot;
q)a:not x=&quot; &quot;
q)a
0001111010011000b
q)(maxs a) and reverse maxs reverse a
0001111111111000b
q)where (maxs a) and reverse maxs reverse a
3 4 5 6 7 8 9 10 11 12
q)x[where (maxs a) and reverse maxs reverse a]
&quot;abcd e  fg&quot;
q)lt:{x[where (maxs a) and reverse maxs reverse a]}
q)lt x
&quot;abcd e  fg&quot;
</pre>
<p>260. first 10 figurate numbers of order x
</p>
<pre>
   fg:{x+\/10#1}
   fg 0
1 1 1 1 1 1 1 1 1 1
   fg 1
1 2 3 4 5 6 7 8 9 10
   fg 2
1 3 6 10 15 21 28 36 45 55
   fg 3
1 4 10 20 35 56 84 120 165 220
   fg 4
1 5 15 35 70 126 210 330 495 715
</pre>
<pre>
q)fg:{x+\/10#1}
q)fg 0
1 1 1 1 1 1 1 1 1 1
q)fg 1
1 2 3 4 5 6 7 8 9 10
q)fg 2
1 3 6 10 15 21 28 36 45 55
q)fg 3
1 4 10 20 35 56 84 120 165 220
q)fg 4
1 5 15 35 70 126 210 330 495 715
</pre>
<p>261. first group of 1s
</p>
<pre>
   x:1 1 1 0 1 0 1
   x&amp;&amp;\x=|\x
1 1 1 0 0 0 0
   x:0 0 0 1 1 0 1
   x&amp;&amp;\x=|\x
0 0 0 1 1 0 0
   x:0 1 0 1 0 1 0
   x&amp;&amp;\x=|\x
0 1 0 0 0 0 0
</pre>
<p>262. value of saddle point (see 48)
</p>
<pre>
   x:(5 4 6 4 12 5
&gt; 16 2 4 5 16 18
&gt; 8 18 7 12 16 11
&gt; 20 17 16 14 16 20
&gt; 16 8 12 9 17 13)
   rn:{x='&amp;/'x}
   cx:{x=\:|/x}
   minmax:{(rn x)&amp;(cx x)}
   minmax x
(0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 0 0 0
0 0 0 1 0 0
0 0 0 0 0 0)
   ones:{&amp;,/minmax x}
   ones x
,21
   (,/x)[ones[x]]
,14
</pre>
<pre>
q)x:(5 4 6 4 12 5;16 2 4 5 16 18;8 18 7 12 16 11;20 17 16 14 16 20;16 8 12 9 17 13)
q)rn:{x=' min each x}
q)cx:{x=\:max x}
q)minmax:{(rn x)&amp;(cx x)}
q)minmax x
(000000b;000000b;000000b;000100b;000000b)
q)ones:{where raze minmax x}
q)ones x
,21
q)(raze x)[ones[x]]
,14
</pre>
<p>264. insert x[i] blanks after y[g[i]]
</p>
<pre>
b:(0,g)_ y
b
(&quot;ab&quot;
&quot;cd&quot;
&quot;ef&quot;
,&quot;g&quot;)
c:b,'(x,0)#\:&quot; &quot;
c
(&quot;ab &quot;
&quot;cd &quot;
&quot;ef &quot;
,&quot;g&quot;)
,/c
&quot;ab cd ef g&quot;
ib:{[x;y;g],/((0,g)_ y),'(x,0)#\:&quot; &quot;}
ib[x;y;g]
&quot;ab cd ef g&quot;
</pre>
<p>265. insert x[i] zeroes after i-th infix of y
</p>
<pre>
   y:0 0 1 0 1 0 1 1
   x:1 2 2 1
   &amp;y
2 4 6 7
   a:@[&amp;#y;&amp;y;:;x]
   a
0 0 1 0 2 0 2 1
   b:1+a
   b
1 1 2 1 3 1 3 2
   d:(!(#y)++/x)
   d
0 1 2 3 4 5 6 7 8 9 10 11 12 13
   d:(1_!(#y)++/x)
   d
1 2 3 4 5 6 7 8 9 10 11 12 13 14
   d _lin c
1 1 0 1 1 0 0 1 1 0 0 1 0 1
</pre>
<p>266. remove trailing blanks
</p>
<pre>
   x:&quot; phrase 266 &quot;
   a:~x=&quot; &quot;
   a
0 0 1 1 1 1 1 1 0 1 1 1 0 0 0
   b:||\|a
   b
1 1 1 1 1 1 1 1 1 1 1 1 0 0 0
   x[&amp;b]
&quot; phrase 266&quot;
</pre>
<pre>
q)x:&quot;  phrase 266   &quot;
q)a:not x=&quot; &quot;
q)b:reverse maxs reverse a
q)b
111111111111000b
q)x[where b]
&quot;  phrase 266&quot;
</pre>
<p>267. remove leading blanks
</p>
<pre>
   x:&quot; phrase 267 &quot;
   a:~x=&quot; &quot;
   a
0 0 1 1 1 1 1 1 0 1 1 1 0 0
   b:|\a
   b
0 0 1 1 1 1 1 1 1 1 1 1 1 1
   x[&amp;b]
&quot;phrase 267 &quot;
</pre>
<pre>
q)x[where b]
&quot;  phrase 266&quot;
q)x:&quot;  phrase 266   &quot;
q)b:maxs a
q)b
001111111111111b
q)x[where b]
&quot;phrase 266   &quot;
</pre>
<p>268. is x in ascending order
</p>
<pre>
   x:2 5 7 9 6 8 3
   x~x[&lt;x]
0
   x:0 1 1 1 7 8 9
   x~x[&lt;x]
1
</pre>
<pre>
q)x:2 5 7 9 6 8 3
q)x~x[iasc x]
0b
q)x:0 1 1 1 7 8 9
q)x~x[iasc x]
1b
</pre>
<p>269. see 248
</p><p>270. see 268
</p><p>271. slight variation of 264
</p><p>272. see 266
</p><p>273. join scalar to each list item
</p>
<pre>
   x:&quot;a&quot;
   y:&quot;01234&quot;
   x,/:y
(&quot;a0&quot;
&quot;a1&quot;
&quot;a2&quot;
&quot;a3&quot;
&quot;a4&quot;)
   x:(&quot;01234&quot;;&quot;56789&quot;)
   y:(&quot;abcde&quot;;&quot;fghij&quot;)
   x,y
(&quot;01234&quot;
&quot;56789&quot;
&quot;abcde&quot;
&quot;fghij&quot;)
   x,'y
(&quot;01234abcde&quot;
&quot;56789fghij&quot;)
</pre>
<pre>
q)x:&quot;a&quot;
q)y:&quot;01234&quot;
q)x,/:y
&quot;a0&quot;
&quot;a1&quot;
&quot;a2&quot;
&quot;a3&quot;
&quot;a4&quot;
q)x:(&quot;01234&quot;;&quot;56789&quot;)
q)y:(&quot;abcde&quot;;&quot;fghij&quot;)
q)x,y
&quot;01234&quot;
&quot;56789&quot;
&quot;abcde&quot;
&quot;fghij&quot;
q)x,'y
&quot;01234abcde&quot;
&quot;56789fghij&quot;
</pre>
<p>274. see 273
</p><p>275. see 76
</p><p>276. see 185
</p><p>277. end indicators from lengths
</p>
<pre>
   x:1 2 3 4 5
   +\x
1 3 6 10 15
   -1++\x
0 2 5 9 14
   +/x
15
   @[&amp;+/x;-1++\x;:;1]
1 0 1 0 0 1 0 0 0 1 0 0 0 0 1
</pre>
<pre>
q)x:1 2 3 4 5
q)sums x
1 3 6 10 15
q)-1+sums x
0 2 5 9 14
q)sum x
15
q)@[(sum x)#0;-1+sums x;:;1]
1 0 1 0 0 1 0 0 0 1 0 0 0 0 1
</pre>
<p>278. start indicators from lengths
</p>
<pre>
   x:1 2 3 4 5
   (!+/x) _lin\: +\0,x
1 1 0 1 0 0 1 0 0 0 1 0 0 0 0
</pre>
<pre>
q)x:1 2 3 4 5
q)(til sum x) in\: sums 0,x
110100100010000b
</pre>
<p>279. variation of 265
</p><p>280. see 41
</p><p>281. value of Taylor series with coefficients y at x
</p>
<pre>
	 x:12
   y:7 5 6 6
   1+!-1+#y
1 2 3
   1.0,x%1+!-1+#y
1 12 6 4.0
   *\1.0,x%1+!-1+#y
1 12 72 288.0
   y**\1.0,x%1+!-1+#y
7 60 432 1728.0
   +/y**\1.0,x%1+!-1+#y
2227.0
</pre>
<pre>
q)x:12
q)y:7 5 6 6
q)1+til -1+count y
1 2 3
q)1+til -1+count y
1 2 3
q)1.0,x%(1+til -1 +count y)
1 12 6 4f
q)prds 1.0,x%(1+til -1 +count y)
1 12 72 288f
q)y*prds 1.0,x%(1+til -1 +count y)
7 60 432 1728f
q)sum y*prds 1.0,x%(1+til -1 +count y)
2227f
</pre>
<p>282. index of first blank
</p>
<pre>
   x:&quot;ab c d&quot;
   x?&quot; &quot;
2
   x:(&quot;ab c d&quot;;&quot; a bc&quot;;&quot;abcd &quot;)
   x
(&quot;ab c d&quot;
&quot; a bc&quot;
&quot;abcd &quot;)
   x?\:&quot; &quot;
2 0 4
</pre>
<pre>
q)x:&quot;ab c d&quot;
q)x?&quot; &quot;
2
q)x:(&quot;ab c d&quot;;&quot; a bc&quot;;&quot;abcd &quot;)
q)x
&quot;ab c d&quot;
&quot; a bc&quot;
&quot;abcd &quot;
q)x?\:&quot; &quot;
2 0 4
</pre>
<p>283. locate field y of fields beginning with first of x
</p>
<pre>
   x:&quot;abcabbbaccccaddd&quot;
   y:2
   y=+\x=*x
0 0 0 1 1 1 1 0 0 0 0 0 0 0 0 0
   x[&amp;y=+\x=*x]
&quot;abbb&quot;
   y:4
   x[&amp;y=+\x=*x]
&quot;addd&quot;
</pre>
<pre>
q)x:&quot;abcabbbaccccaddd&quot;
q)y:2
q)y=sums x=first x
0001111000000000b
q)x[where y=sums x=first x]
&quot;abbb&quot;
q)y:4
q)x[where y=sums x=first x]
&quot;addd&quot;
</pre>
<p>284. sum items of x marked by y
</p>
<pre>
   x:1 2 3 4 5 6 7
   y:1 1 1 2 2 3 3
   =y
(0 1 2
3 4
5 6)
   x[=y]
(1 2 3
4 5
6 7)
   +/'x[=y]
6 9 13
   y:1 2 1 3 3 2 1
   +/'x[=y]
11 8 9
</pre>
<pre>
q)x:1 2 3 4 5 6 7
q)y:1 1 1 2 2 3 3
q)group y
1| 0 1 2
2| 3 4
3| 5 6
q)x[group y]
1| 1 2 3
2| 4 5
3| 6 7
q)sum each x[group y]
1| 6
2| 9
3| 13
q)y:1 2 1 3 3 2 1
q)sum each x[group y]
1| 11
2| 8
3| 9
q)value group y
0 2 6
1 5
3 4
q)value x[group y]
1 3 7
2 6
4 5
q)value sum each x[group y]
11 8 9
</pre>
<p>285. moving sum
</p>
<pre>
   y:3
   x:1 2 3 4 5
   +\x
1 3 6 10 15
   (-y)
-3
   (-y)_ a:+\x
1 3
   0,(-y)_ a
0 1 3
   (y-1)_ a
6 10 15
   ((y-1)_ a)-0,(-y)_ a
6 9 12
   ms:{((y-1)_ a)-0,(-y)_ a:+\x}
   ms[x;y]
6 9 12
</pre>
<pre>
q)y:3
q)x:1 2 3 4 5
q)sums x
1 3 6 10 15
q)neg y
-3
q)neg y _ a:sums x
-10 -15
q)
q)(neg y) _ a:sums x
1 3
q)0,(neg y)_a
0 1 3
q)(y-1)_a
6 10 15
q)((y-1)_a)-0,(neg y)_ a
6 9 12
q)ms:{((y-1)_a)-0,(neg y)_ a:sums x}
q)ms[x;y]
6 9 12
</pre>
<p>286. FIFO stock y decremented with x units
</p>
<pre>
   x:5
   y:1 2 3 4 5
   (+\y)-x
-4 -2 1 5 10
   g:0|(+\y)-x
   g
0 0 1 5 10
   -':0,g
0 0 1 4 5
   ff:{-':0,0|(+\y)-x}
   ff[x;y]
0 0 1 4 5
</pre>
<pre>
q)(sums y)
1 3 6 10 15
q)(sums y)-x
-4 -2 1 5 10
q)g:0|(sums y)-x
q)g
0 0 1 5 10
q)deltas 0,g
0 0 0 1 4 5
q)1_ deltas 0,g
0 0 1 4 5
q)ff:{1_deltas 0,0|(sums y)-x}
q)ff[x;y]
0 0 1 4 5
</pre>
<p>289. or-scan of infixes of y indicated by x
</p>
<pre>
   y:1 0 0 1 0 1 0 0
   x:1 0 1 0 0 0 1 0
   a:&amp;x
   b:a _ y
   b
(1 0
0 1 0 1
0 0)
   c:|\'b
   c
(1 1
0 1 1 1
0 0)
   ,/c
1 1 0 1 1 1 0 0
</pre>
<pre>
q)y:1 0 0 1 0 1 0 0
q)x:1 0 1 0 0 0 1 0
q)a:where x
q)a
0 2 6
q)b:a _ y
q)b
1 0
0 1 0 1
0 0
q)c:max each b
q)c
1 1 0
q)c:maxs each b
q)c
1 1
0 1 1 1
0 0
q)raze c
1 1 0 1 1 1 0 0
</pre>
<p>290. and-scan of infixes of y indicated by x
</p>
<pre>
   y:1 0 0 1 0 1 0 0
   x:1 0 1 0 0 0 1 0
   a:&amp;x
   b:a _ y
   b
(1 0
0 1 0 1
0 0)
   c:&amp;\'b
   c
(1 0
0 0 0 0
0 0)
   ,/c
1 0 0 0 0 0 0 0
</pre>
<pre>
q)y:1 0 0 1 0 1 0 0
q)x:1 0 1 0 0 0 1 0
q)a:where x
q)b:a _ y
q)b
1 0
0 1 0 1
0 0
q)c:mins each b
q)c
1 0
0 0 0 0
0 0
q)raze c
1 0 0 0 0 0 0 0
</pre>
<p>291. sums of infixes of y indicated by x
</p>
<pre>
   y:1 2 3 4 5
   x:1 0 1 0 1
   a:&amp;x
   b:a _ y
   b
(1 2
3 4
,5)
   c:+/'b
   c
3 7 5
</pre>
<pre>
q)y:1 2 3 4 5
q)x:1 0 1 0 1
q)a:where x
q)b:a _ y
q)b
1 2
3 4
,5
q)c:sum each b
q)c
3 7 5
</pre>
<p>292. groups of 1s in y pointed to by x
</p>
<pre>
   y:1 1 1 0 0 1 1
   x:0 1 0 1 0 0 0
   -1 _ 0,y
0 1 1 1 0 0 1
   +\y&gt;-1 _ 0,y
1 1 1 1 1 2 2
   x&amp;y
0 1 0 0 0 0 0
   a:+\y&gt;-1 _ 0,y
   a
1 1 1 1 1 2 2
   a[&amp;x&amp;y]
,1
   a _lin ,1
1 1 1 1 1 0 0
   y&amp;a _lin ,1
1 1 1 0 0 0 0
   go:{y&amp;a _lin(a:+\y&gt;-1 _ 0,y)[&amp;x&amp;y]}
   go[x;y]
1 1 1 0 0 0 0
</pre>
<pre>
q)y:1 1 1 0 0 1 1
q)x:0 1 0 1 0 0 0
q)-1 _ 0,y
0 1 1 1 0 0 1
q)sums y &gt; -1 _ 0,y
1 1 1 1 1 2 2
q)y &gt; -1 _ 0,y
1000010b
q)x&amp;y
0 1 0 0 0 0 0
q)a:sums y &gt; -1 _ 0,y
q)a
1 1 1 1 1 2 2
q)a[where x&amp;y]
,1
</pre>
<p>293. locate quotes and text between them
</p>
<pre>
   x:&quot;abc\&quot;de\&quot;f&quot;
   #x
8
   a:x=&quot;\&quot;&quot;
   a
0 0 0 1 0 0 1 0
   b:&amp;a
   b
3 6
   c:(*b)+!1+--/b
   c
3 4 5 6
   @[&amp;#x;c;:;1]
0 0 0 1 1 1 1 0
</pre>
<pre>
q)x:&quot;abc\&quot;de\&quot;f&quot;
q)count x
8
q)a:x=&quot;\&quot;&quot;
q)a
00010010b
q)b:where a
q)b
3 6
q)c:(first b)+til 1+ neg -/[b]
q)c
3 4 5 6
q)@[(count x)#0;c;:;1]
0 0 0 1 1 1 1 0
</pre>
<p>294. locate text between quotes
</p>
<pre>
   x:&quot;abc\&quot;de\&quot;f&quot;
   #x
8
   a:x=&quot;\&quot;&quot;
   a
0 0 0 1 0 0 1 0
   b:&amp;a
   b
3 6
   c:b+1 -1
   c
4 5
   d:(*c)+!1+--/c
   d
4 5
   @[&amp;#x;d;:;1]
0 0 0 0 1 1 0 0 c
</pre>
<pre>
q)x:&quot;abc\&quot;de\&quot;f&quot;
q)count x
8
q)a:x=&quot;\&quot;&quot;
q)a
00010010b
q)b:where a
q)b
3 6
q)c:b+1 -1
q)c
4 5
q)d:(first c)+til 1+neg -/[c]
q)d
4 5
q)@[(count x)#0;d;:;1]
0 0 0 0 1 1 0 0
</pre>
<p>295. depth of parentheses
</p>
<pre>
   x:&quot;a(b((c)de)f)g(h)&quot;
   dp:{+\(&quot;(&quot;=x)--1 _ 0,&quot;)&quot;=x}
   dp x
0 1 1 2 3 3 3 2 2 2 1 1 0 1 1 1
   x:&quot;a(b((cde)f)g(ki)&quot;
   dp x
0 1 1 2 3 3 3 3 3 2 2 1 2 2 2 2
   x:&quot;ab((c)de)f)g(ki)&quot;
   dp x
0 0 1 2 2 2 1 1 1 0 0 -1 0 0 0 0
   x:&quot;a(b((c)de)f)g(h)&quot;
   dp x
0 1 1 2 3 3 3 2 2 2 1 1 0 1 1 1
</pre>
<pre>
q)x:&quot;a(b((c)de)f)g(h)&quot;
q)dp:{sums (&quot;(&quot;=x)- -1_ 0,&quot;)&quot;=x}
q)dp x
0 1 1 2 3 3 3 2 2 2 1 1 0 1 1 1
q)x:&quot;a(b((cde)f)g(ki)&quot;
q)dp x
0 1 1 2 3 3 3 3 3 2 2 1 2 2 2 2
q)x:&quot;ab((c)de)f)g(ki)&quot;
q)dp x
0 0 1 2 2 2 1 1 1 0 0 -1 0 0 0 0
q)x:&quot;a(b((c)de)f)g(h)&quot;
q)dp x
0 1 1 2 3 3 3 2 2 2 1 1 0 1 1 1
</pre>
<p>296. starting positions of infixes from lengths x
</p>
<pre>
   x:2 3 1 5
   +\-1 _ 0,x
0 2 5 6
   sl:{+\-1 _ 0,x}
   sl[x]
0 2 5 6
</pre>
<pre>
q)x:2 3 1 5
q)sums -1 _0,x
0 2 5 6
q)sl:{sums -1 _ 0,x}
q)sl x
0 2 5 6
</pre>
<p>297. spread marked field heads right
</p>
<pre>
   x:&quot;abcdef&quot;
   y:1 1 0 0 1 0
   a:&amp;y
   a
0 1 4
   b:#:'a _ x
   b
1 3 2
   c:b#'a
   c
(,0
1 1 1
4 4)
   d:,/c
   d
0 1 1 1 4 4
   x[d]
&quot;abbbee&quot;
   x[,/(#:'a _ x)#'a:&amp;y]
&quot;abbbee&quot;
   sh:{x[,/(#:'a _ x)#'a:&amp;y]}
   sh[x;y]
&quot;abbbee&quot;
</pre>
<pre>
q)x:&quot;abcdef&quot;
q)y:1 1 0 0 1 0
q)a:where y
q)a
0 1 4
q)a _ x
,&quot;a&quot;
&quot;bcd&quot;
&quot;ef&quot;
q)count a _ x
3
q)count each a _ x
1 3 2
q)
q)b:count each a _ x
q)c:b#'a
q)c
,0
1 1 1
4 4
q)d:raze c
q)d
0 1 1 1 4 4
q)x[d]
&quot;abbbee&quot;
q)x[raze(count each a _ x)$'a:where y]
'type
q)x[raze(count each a _ x)#'a:where y]
&quot;abbbee&quot;
q)sh:{x[raze(count each a _ x)#'a:where y]}
q)sh[x;y]
&quot;abbbee&quot;
</pre>
<p>298. see 266
</p><p>299. see 267
</p><p>300. gth infix of y marked by x
</p>
<pre>
   x:1 0 0 1 0 1 0 0 0 1 0
   y:&quot;abcdefghijk&quot;
   g:2
   a:&amp;x
   a
0 3 5 9
   b:a _ x
   b
(&quot;abc&quot;
&quot;de&quot;
&quot;fghi&quot;
&quot;jk&quot;)
b[g]
&quot;fghi&quot;
((&amp;x)_ y)[g]
&quot;fghi&quot;
</pre>
<pre>
q)x:1 0 0 1 0 1 0 0 0 1 0
q)y:&quot;abcdefghijk&quot;
q)a:where x
q)a
0 3 5 9
q)b:a _ y   /original says x but must be y
q)b
&quot;abc&quot;
&quot;de&quot;
&quot;fghi&quot;
&quot;jk&quot;
q)b 2
&quot;fghi&quot;
q)((where x)_ y)[g]
&quot;fghi&quot;
</pre>
<p>301. alternating sum series
</p>
<pre>
   x:1+!10
   x
1 2 3 4 5 6 7 8 9 10
   a:((#x)#1 -1)
   a
1 -1 1 -1 1 -1 1 -1 1 -1
   b:x*a
   +\b
1 -1 2 -2 3 -3 4 -4 5 -5
   as:{+\x*(#x)#1 -1}
   as[x]
1 -1 2 -2 3 -3 4 -4 5 -5
</pre>
<pre>
q)x:1+til 10
q)x
1 2 3 4 5 6 7 8 9 10
q)a:((count x)#1 -1)
q)a
1 -1 1 -1 1 -1 1 -1 1 -1
q)b:x*a
q)b
1 -2 3 -4 5 -6 7 -8 9 -10
q)sums b
1 -1 2 -2 3 -3 4 -4 5 -5
q)as:{sums x*(count x)#1 -1}
q)as[x]
1 -1 2 -2 3 -3 4 -4 5 -5
</pre>
<p>302. x first triangular numbers
</p>
<pre>
   x:6
   +\!x
0 1 3 6 10 15
</pre>
<pre>
q)x:6
q)sums til x
0 1 3 6 10 15
</pre>
<p>303. smearing 1s between pairs of 1s
</p>
<pre>
   x:0 1 0 0 1 0 1 0 1 0 1 1 0
   a:(+\x)!2
   a
1 1 1 0 0 0 0 1 1 0 0
   x|a
1 1 1 1 0 0 0 1 1 1 0
   x|(+\x)!2
1 1 1 1 0 0 0 1 1 1 0
</pre>
<pre>
q)x:0 1 0 0 1 0 1 0 1 0 1 1 0
q)a:(sums x)mod 2
q)a
0 1 1 1 0 0 1 1 0 0 1 0 0
q)x or a
0 1 1 1 1 0 1 1 1 0 1 1 0
q)x|a
0 1 1 1 1 0 1 1 1 0 1 1 0
q)x|(sums x)mod 2
0 1 1 1 1 0 1 1 1 0 1 1 0
</pre>
<p>304. invert 0s following 1st 1
</p>
<pre>
   x:0 0 1 0 0 1 1
   |\x
0 0 1 1 1 1 1
</pre>
<pre>
q)x:0 0 1 0 0 1 1
q)maxs x
0 0 1 1 1 1 1
</pre>
<p>305. invert fields marked by pairs of 1s
</p>
<pre>
   x:1 0 1 0 0 1 0 0 1
   a:(+\x)!2
   a
1 1 0 0 0 1 1 1 0
   ~x
0 1 0 1 1 0 1 1 0
   (~x)&amp;a
0 1 0 0 0 0 1 1 0
   (~x)&amp;(+\x)!2
0 1 0 0 0 0 1 1 0
</pre>
<pre>
q)x:1 0 1 0 0 1 0 0 1
q)a:(sums x)mod 2
q)a
1 1 0 0 0 1 1 1 0
q)not x
010110110b
q)(not x)&amp;a
0 1 0 0 0 0 1 1 0
q)(not x)&amp;(sums x)mod 2
0 1 0 0 0 0 1 1 0
</pre>
<p>306. invert all 1s after 1st 0
</p>
<pre>
   x:1 1 0 1 0 1 0
   &amp;\x
1 1 0 0 0 0 0
</pre>
<pre>
q)x:1 1 0 1 0 1 0
q)mins x
1 1 0 0 0 0 0
</pre>
<p>307. invert all 1s after 1st 1
</p>
<pre>
   x:0 0 1 1 0 1
   &amp;#x
0 0 0 0 0 0
   x?1
2
@[&amp;#x;x?1;:;1]
0 0 1 0 0 0
</pre>
<p>q)x:0 0 1 1 0 1
q)(count x)#x
0 0 1 1 0 1
q)(count x)#0
0 0 0 0 0 0
q)x?1
2
q)@[(count x)#0;x?1;:;1]
0 0 1 0 0 0
308. invert all 0s after 1st 0
</p>
<pre>
   x:1 0 0 1 1 0
   a:x?0
   a
1
  &#160;!#x
0 1 2 3 4 5
   b:(a+1)_!#x
   b
2 3 4 5
   @[x;b;:;1]
1 0 1 1 1 1
   @[x;(1+x?0)_!#x;:;1]
1 0 1 1 1 1
</pre>
<pre>
q)x:1 0 0 1 1 0
q)a:x?0
q)a
1
q)til count x
0 1 2 3 4 5
q)b:(a+1)_til count x
q)b
2 3 4 5
q)@[x;b;:;1]
1 0 1 1 1 1
q)@[x;(1+x?0)_til count x;:;1]
1 0 1 1 1 1
</pre>
<p>309. running parity
</p>
<pre>
   x:0 1 1 1 1 0 1 0 0
   (+\x)!2
0 1 0 1 0 0 1 1 1
</pre>
<pre>
q)x:0 1 1 1 1 0 1 0 0
q)(sums x)mod 2
0 1 0 1 0 0 1 1 1
</pre>
<p>310. running sum
</p>
<pre>
   x:1 20 300 4000
+\x
1 21 321 4321
</pre>
<pre>
q)sums x
1 21 321 4321
</pre>
<p>311. see 159
</p><p>312. maximum separation of items of x
</p>
<pre>
   x:10+7 _draw 9
   x
17 14 14 17 14 17 18
   (|/x)-(&amp;/x)
4
</pre>
<pre>
q)x:17 14 14 17 14 17 18
q)(max x)-min x
4
</pre>
<p>313. value of two-by-two determinant
</p>
<pre>
   det: {-/y*|x}
   x:(13 21;34 55)
   x
(13 21
34 55)
   (13 * 55) - (34 * 21)
1
   13 21 * 55 34
715 714
   -/13 21 * 55 34
1
   det x
,1
</pre>
<pre>
q)det:{-/[x[0]*reverse x[1]]}
</pre>
<p>314. see 313
</p><p>315. see 159
</p><p>316. see 159
</p><p>317. see 159
</p><p>318. area of triangle with sides x (Heron's rule)
</p>
<pre>
   x:3 4 5
   hr:{(*/(+/x%2)-0,x)^0.5}
   hr[x]
6.0
</pre>
<pre>
q)hr:{sqrt (prd (sum x%2)-0,x)}
q)hr x
6f
</pre>
<p>319. standard deviation
</p>
<pre>
   x:44 77 48 24 28 36 17 49 90 91
std:{((+/(x-(+/x)%#x)^2)%#x)^0.5}
std[x]
25.48411
</pre>
<pre>
q)std:{mean:sum x%count x; sqr:{x*x}; sqrt sum sqr[x-mean]%count x}
q)std x
25.48411
</pre>
<p>320. variance (dispersion)
</p>
<pre>
   x:44 77 48 24 28 36 17 49 90 91.0
   var:{(+/(x-(+/x)%#x)^2)%#x}
   var[x]
649.44
(var[x])^0.5
25.48411
</pre>
<pre>
q)x:44 77 48 24 28 36 17 49 90 91.0
q)var x
649.44
q)var
k){avg[x*x]-a*a:avg x:&quot;f&quot;$x}
q)varr:{mean:sum x%count x; sqr:{x*x}; sum sqr[x-mean]%count x}
q)varr x
649.44
</pre>
<p>321. y-th moment of x
</p>
<pre>
   x:44 77 48 24 28 36 17 49
   ym:{(+/(x-(+/x)%#x)^y)%#x}
   ym[x;2]
309.23
   ym[x;0]
1.0
   ym[x;1]
4.4409e-016
   ym[x;3]
3889.9
</pre>
<pre>
q)x:44 77 48 24 28 36 17 49
q)ym:{(sum(x-sum x%count x)xexp y)%count x}
q)ym[x;2]
309.2344
q)ym[x;0]
1f
q)ym[x;1]
4.440892e-16
q)ym[x;3]
3889.934
</pre>
<p>322.
</p><p>323. see 248
</p><p>324. see 159
</p><p>325. average (mean)
</p>
<pre>
   av:{(+/x)%#x}
   av[1 10 100]
37.0
</pre>
<pre>
q)av:{(sum x)%count x}
q)av[1 10 100]
37f
</pre>
<p>326. see 325
</p><p>327. see 70
</p><p>328. number of items
</p>
<pre>
   #&quot;abcd&quot;
4
   #(1;2 3;4 5 6)
3
   #2 3 4#!24
2
</pre>
<pre>
q)count &quot;abcd&quot;
4
q)count(1;2 3;4 5 6)
3
q)count 2 3 4#til 24
'length
</pre>
<p>329. mask from positive integers in x
</p>
<pre>
   x:-5+7 _draw 10
   x
2 3 3 -2 4 4 -1
   (!1+|/x) _lin x
0 0 1 1 1
</pre>
<pre>
q)x:2 3 3 -2 4 4 -1
q)(til 1+max x) in x
00111b
</pre>
<p>330. index of 1st occurrence of maximum item of x
</p>
<pre>
   x:5 3 7 0 5 7 2
   x?|/x
2
</pre>
<pre>
q)x:5 3 7 0 5 7 2
q)x?max x
2
</pre>
<p>331. identity for floating point maximum, negative infinity -0i
</p>
<pre>
-1e100|-0i
-1e+100
identity for integer maximum, negative infinity -0I
-123456789|-0I
</pre>
<pre>
q)-1e100|-0w
-1e+100
q)-1e100|-0W
-2.147484e+09
q)-123456789|-0w
-1.234568e+08
q)-123456789|-0W
-123456789
</pre>
<p>332. see 326
</p><p>333. quick membership for nonnegative integers
</p>
<pre>
   x:5 3 7 2
   y:8 5 2 6 1 9
   &amp;1+|/x,y
0 0 0 0 0 0 0 0 0 0
   a:&amp;1+|/x,y
   @[a;y;:;1]
0 1 1 0 0 1 1 0 1 1
   (@[a;y;:;1])[x]
1 0 0 1
   @[&amp;1+|/x,y;y;:;1][x]
1 0 0 1
</pre>
<pre>
q)x:5 3 7 2
q)y:8 5 2 6 1 9
q)max x,y
9
q)(1+max x,y)#0
0 0 0 0 0 0 0 0 0 0
q)a:(1+max x,y)#0
q)a
0 0 0 0 0 0 0 0 0 0
q)@[a;y;:;1]
0 1 1 0 0 1 1 0 1 1
q)(@[a;y;:;1])[x]
1 0 0 1
q)@[(1+max x,y)#0;y;:;1][x]
1 0 0 1
</pre>
<p>334. nonnegative maximum
</p>
<pre>
   x:1 2 3 4 5
   |/x,0
5
   x:-1 -2 -3 -4 -5
   |/x,0
0
   x:!0
   x
  &#160;!0
   |/x,0
0
</pre>
<pre>
q)x:0n
q)max x,0
0f
/XXX doublecheck
</pre>
<p>335. maximum
</p>
<pre>
   x:5 3 7 2
   |/x
7
</pre>
<pre>
q)max x
7
</pre>
<p>336. index of first occurrence of minimum
</p>
<pre>
   x:5 3 7 2 5 3
   x?&amp;/x
3
</pre>
<pre>
q)x?min x
3
</pre>
<p>337. identity for floating point minimum, positive infinity 0i
</p>
<pre>
   1e100&amp;0i
1e+100
identity for integer minimum, positive infinity 0I
   123456789&amp;0I
123456789
</pre>
<pre>
q)1e100&amp;0w
1e+100
q)1e100&amp;0W
2.147484e+09
q)123456789&amp;0w
1.234568e+08
q)123456789&amp;0W
123456789
</pre>
<p>338. locate first occurrence in x of an item of y
</p>
<pre>
   x:&quot;abcdef&quot;
   y:&quot;dbf&quot;
   &amp;/x?/:y
1
   x[1]
&quot;b&quot;
</pre>
<pre>
q)x:&quot;abcdef&quot;
q)y:&quot;dbf&quot;
q)min x?/:y
1
q)x[1]
&quot;b&quot;
</pre>
<p>339. minimum
</p>
<pre>
   x:5 3 7 2
   &amp;/x
2
</pre>
<pre>
q)min x
2
</pre>
<p>340. see 159
</p><p>341. see 159
</p><p>342. arabic from roman number
</p>
<pre>
   x:&quot;MCMIX&quot;
   &quot;MDCLXVI&quot;?/:x
0 2 0 6 4
   a:0,1000 500 100 50 10 5 1[&quot;MDCLXVI&quot;?/:x]
   a
0 1000 100 1000 1 10
   a&lt;1!a
1 0 1 0 1 0
   _ a*-1^a&lt;1!a
0 1000 -100 1000 -1 10
   +/_ a*-1^a&lt;1!a
1909
   ar:{+/_ a*-1^a&lt;1!a:0,1000 500 100 50 10 5 1[&quot;MDCLXVI&quot;?/:x]}
   ar[x]
1909
</pre>
<pre>
q)x:&quot;MCMIX&quot;
q)&quot;MDCLXVI&quot;?/:x
0 2 0 6 4
q)a:0,1000 500 100 50 10 5 1[&quot;MDCLXVI&quot;?/:x]
q)a
0 1000 100 1000 1 10
q)a&lt;1 rotate a
101010b
q)floor a*-1 xexp a&lt;1 rotate a
0 1000 -100 1000 -1 10
q)sum floor a*-1 xexp a&lt;1 rotate a
1909
q)ar:{sum floor a*-1 xexp a&lt;1 rotate a:0,1000 500 100 50 10 5 1[&quot;MDCLXVI&quot;?/:x]}
q)ar[x]
1909
</pre>
<p>343. see 159
</p><p>344. pairwise match
</p>
<pre>
	x:(&quot;123&quot;;&quot;123&quot;;&quot;45&quot;;&quot;45&quot;)
   x
(&quot;123&quot;
&quot;123&quot;
&quot;45&quot;
&quot;45&quot;)
   ~':x
1 0 1
   (~':x),0
1 0 1 0
   pm:{(~':x),0}
   pm 1 1 1 1 2 2 3 4 4 4
1 1 1 0 1 0 0 1 1 0
</pre>
<pre>
q)x:(&quot;123&quot;;&quot;123&quot;;&quot;45&quot;;&quot;45&quot;)
q)x
&quot;123&quot;
&quot;123&quot;
&quot;45&quot;
&quot;45&quot;
q)~':[x]
0101b
q)~':[x],0b
01010b
q)(~':[x]),0b
01010b
q)k)(~':[x]),0b
01010b
q)pm:{1 _ (~':[x]),0b}
q)pm 1 1 1 1 2 2 3 4 4 4
1110100110b
/each prior is different in k4/q?
</pre>
<p>345. do ranges of x and y match
</p>
<pre>
   x:1 2 3
   y:3 2 1 1
a:?x
   x
1 2 3
   a
1 2 3
   b:?y
   b
3 2 1
   a[&lt;a]~b[&lt;b]
1
   om:{x[&lt;x]~y[&lt;y]}
   om[?x;?y]
1
   om[?&quot;bca&quot;;?&quot;cabba&quot;]
1
</pre>
<p>346. see 20
</p><p>347. see 159
</p><p>348. do x and y have items in common
</p>
<pre>
   x:&quot;aba&quot;
   y:&quot;cdeac&quot;
   x _lin\: y
1 0 1
   |/x _lin\: y
1
   y:&quot;edge&quot;
   |/x _lin\: y
0
</pre>
<pre>
q)x:&quot;aba&quot;
q)y:&quot;cdeac&quot;
q)x in\:y
101b
q)max x in\:y
1b
q)y:&quot;edge&quot;
q)max x in\:y
0b
</pre>
<p>349. see 159'
</p><p>350. is x 1s and 0s only (Boolean)
</p>
<pre>
   x:0 1 0 1
   &amp;/x _lin\:0 1
1
   x:1 1 1 1
   &amp;/x _lin\:0 1
1
   x:1 0 1 2
   &amp;/x _lin\:0 1
0
</pre>
<pre>
q)x:0 1 0 1
q)min x in\:0 1
1b
q)x:1 1 1 1
q)min x in\:0 1
1b
q)x:1 0 1 2
q)min x in\:0 1
0b
</pre>
<p>351. is x a subset of y
</p>
<pre>
   x:&quot;abgk&quot;
   y:&quot;abcdefghijkl&quot;
   &amp;/x _lin\:y
1
   x:&quot;abgx&quot;
   &amp;/x _lin\:y
0
</pre>
<pre>
q)x:&quot;abgk&quot;
q)y:&quot;abcdefghijkl&quot;
q)min x in\:y
1b
q)x:&quot;abgx&quot;
q)min x in\:y
0b
</pre>
<p>352. see 159
</p><p>353. are items unique
</p>
<pre>
	 x:&quot;abcdefg&quot;
   (#x)=(#?x)
1
   x:&quot;abcdefa&quot;
   (#x)=(#?x)
0
</pre>
<pre>
q)x:&quot;abcdefg&quot;
q)(count x)=(count distinct x)
1b
q)x:&quot;abcdefa&quot;
q)(count x)=(count distinct x)
0b
</pre>
<p>354. see 159
</p><p>355. none
</p>
<pre>
   x:&amp;7
   x
0 0 0 0 0 0 0
   ~|/x
1
   x:7#0 1
   x
0 1 0 1 0 1 0
   ~|/x
0
</pre>
<pre>
q)x:7#0
q)not max x
1b
q)x:7#0 1
q)x
0 1 0 1 0 1 0
q)not max x
0b
</pre>
<p>356. any
</p>
<pre>
   x:&amp;7
   |/x
0
   x:7#0 1
   |/x
1
</pre>
<pre>
q)x:7#0
q)max x
0
q)any x
0
q)x:7#0 1
q)max x
1
q)any x
1
</pre>
<p>357. does x match y
</p>
<pre>
   x:(&quot;abc&quot;;`sy;1 3 -7)
   y:(&quot;abc&quot;;`sy;1 3 -7)
   x~y
1
   x:1 2 3
   y:1 4 3
   x~y
0
</pre>
<pre>
q)x:(&quot;abc&quot;;`sy;1 3 -7)
q)y:(&quot;abc&quot;;`sy;1 3 -7)
q)x~y
1b
q)x:1 2 3
q)y:1 4 3
q)x~y
0b
</pre>
<p>358. see 159
</p><p>359. locate blank rows
</p>
<pre>
   x:+5 6#&quot;a bc d&quot;
   x
(&quot;aaaaa&quot;
&quot; &quot;
&quot;bbbbb&quot;
&quot;ccccc&quot;
&quot; &quot;
&quot;ddddd&quot;)
   x~\:(#+x)#&quot; &quot;
0 1 0 0 1 0
</pre>
<pre>
q)x:flip 5 6#&quot;a bc d&quot;
q)x
&quot;aaaaa&quot;
&quot;     &quot;
&quot;bbbbb&quot;
&quot;ccccc&quot;
&quot;     &quot;
&quot;ddddd&quot;
q)x~\:(count flip x)#&quot; &quot;
010010b
</pre>
<p>360. all
</p>
<pre>
   x:1 1 0 1
   &amp;/x
0
   x:1 1 1 1
   &amp;/x
1
   x:0 0 0 0
   &amp;/x
0
</pre>
<pre>
q)x:1 1 0 1
q)min x
0
q)all x
0
q)x:1 1 1 1
q)min x
1
q)all x
1
q)x:0 0 0 0
q)min x
0
a)all x
0
</pre>
<p>361. parity
</p>
<pre>
   x:2 _vs&#160;!8
   x
(0 0 0 0 1 1 1 1
0 0 1 1 0 0 1 1
0 1 0 1 0 1 0 1)
   (+/x)!2
0 1 1 0 1 0 0 1
</pre>
<p>362. count of occurrences of x in y
</p>
<pre>
	 x:&quot;q&quot;
   y:&quot;quaquaqua&quot;
   +/x=y
3
</pre>
<pre>
q)x:&quot;q&quot;
q)y:&quot;quaquaqua&quot;
q)sum x=y
3
</pre>
<p>363. solve quadratic
</p>
<pre>
   qu:{(q%x),(z%q:qq[x;y;z])}
   qq:{-0.5*y+sg[y]*ds[x;y;z]}
   ds:{_sqrt[(y*y)-(4*x*z)]}
   sg:{(x&gt;0)-(x&lt;0)}
   a:1
   b:-1e30
   c:1
   sg[b]
-1
   ds[a;b;c]
1e+030
   qq[a;b;c]
1e+030
   qu[a;b;c]
1e+030 1e-030
   qu[1;-8;15]
5 3.0
</pre>
<pre>
q)qu:{(q%x),(z%q:qq[x;y;z])}
q)qq:{-0.5*y+sg[y]*ds[x;y;z]}
q)ds:{sqrt[(y*y)-(4*x*z)]}
q)sg:{(x&gt;0)-(x&lt;0)}   /or use the builtin signum
q)a:1
q)b:-1e30
q)c:1
q)sg[b]
-1
q)ds[a;b;c]
1e+30
q)qq[a;b;c]
1e+30
q)qu[a;b;c]
1e+30 1e-30
q)qu[1;-8;15]
5 3f
</pre>
<p>364. see 325
</p><p>365. see 325
</p><p>366. count of scalars
</p>
<pre>
   cs:{#,//x}
   cs[1]
1
   cs[1 2]
2
   cs[(1 2;3 4 5)]
5
   cs[(1 2;(3 4;5))]
5
   cs[(&quot;ab&quot;;(&quot;cd&quot;;&quot;efg&quot;))]
7
   cs[!0]
0
</pre>
<pre>
q)cs:{count raze over x}
q)cs 1
1
q)cs[1 2]
2
q)cs[(1 2;3 4 5)]
5
q)cs[(1 2;(3 4;5))]
5
q)cs[(&quot;ab&quot;;(&quot;cd&quot;;&quot;efg&quot;))]
7
q)cs[til 0]
0
</pre>
<p>367. alternating product
</p>
<pre>
   x:1 2 3 4 5
   a:(#x)#1 -1
   a
1 -1 1 -1 1
   */x^a
1.875
</pre>
<pre>
q)x:1 2 3 4 5
q)a:(count x)#1 -1
q)a
1 -1 1 -1 1
q)prd xexp[x;a]
1.875
q)xexp[x;a]
1 0.5 3 0.25 5
</pre>
<p>368. product
</p>
<pre>
   x:1 2 3 4 5
   */x
120
</pre>
<pre>
q)x:1 2 3 4 5
q)prd x
120
</pre>
<p>369. alternating sum
</p>
<pre>
   x:1+!10
   x
1 2 3 4 5 6 7 8 9 10
   a:((#x)#1 -1)
   a
1 -1 1 -1 1 -1 1 -1 1 -1
   b:x*a
   +/b
-5
   +/x*(#x)#1 -1
-5
</pre>
<pre>
q)x:1+til 10
q)x
1 2 3 4 5 6 7 8 9 10
q)a:((count x)#1 -1)
q)b:x*a
q)sum b
-5
q)sum x*(count x)#1 -1
-5
</pre>
<p>370. count of 1s in Boolean list
</p>
<pre>
   x:1 0 0 1 0 1 1
   +/x
4
</pre>
<pre>
q)x:1 0 0 1 0 1 1
q)sum x
4
</pre>
<p>371. scalar from 1-item list
</p>
<pre>
   x:,5
   x
,5
   +/x
5
   a:,&quot;a&quot;
   a
,&quot;a&quot;
   +/a
type error
   +/a
&gt; \
   a[0]
&quot;a&quot;
</pre>
<pre>
q)x:enlist 5
q)x
,5
q)sum x
5
q)a:enlist &quot;a&quot;
q)a
,&quot;a&quot;
q)sum a
'type
q)a[0]
&quot;a&quot;
</pre>
<p>372. sum columns of matrix
</p>
<pre>
   x:1+3 4#&#160;!12
   x
(1 2 3 4
5 6 7 8
9 10 11 12)
   +/x
15 18 21 24
</pre>
<pre>
q)x:1+3 4#til 12
q)x
1 2  3  4
5 6  7  8
9 10 11 12
q)sum x
15 18 21 24
</pre>
<p>373. sum rows of matrix
</p>
<pre>
   x:1+3 4#&#160;!12
   x
(1 2 3 4
5 6 7 8
9 10 11 12)
   +/'x
10 26 42
</pre>
<pre>
q)x:1+3 4#til 12
q)x
1 2  3  4
5 6  7  8
9 10 11 12
q)sum each x
10 26 42
</pre>
<p>374. sum
</p>
<pre>
   x:1 2 3 4 5
   +/x
15
</pre>
<pre>
q)x:1 2 3 4 5
q)sum x
15
</pre>
<p>375. insert row x in matrix y after row g
</p>
<pre>
   y:4 3#1+!12
   y
(1 2 3
4 5 6
7 8 9
10 11 12)
   x:13 14 15
   g:2
   a:y,,x
   a
(1 2 3
4 5 6
7 8 9
10 11 12
13 14 15)
   b:&lt;(!#y),g
   b
0 1 2 4 3
   a[b]
(1 2 3
4 5 6
7 8 9
13 14 15
10 11 12)
   (y,,x)[&lt;(!#y),g]
(1 2 3
4 5 6
7 8 9
13 14 15
10 11 12)
</pre>
<pre>
q)y:4 3#1+til 12
q)y
1  2  3
4  5  6
7  8  9
10 11 12
q)x:13 14 15
q)g:2
q)a:y,enlist x
q)a
1  2  3
4  5  6
7  8  9
10 11 12
13 14 15
q)b:iasc(til count y),g
q)b
0 1 2 4 3
q)a[b]
1  2  3
4  5  6
7  8  9
13 14 15
10 11 12
q)(y,enlist x)[iasc(til count y),g]
1  2  3
4  5  6
7  8  9
13 14 15
10 11 12
</pre>
<p>376. append y at the bottom of matrix x
</p>
<pre>
   x:4 3#1+!12
   x
(1 2 3
4 5 6
7 8 9
10 11 12)
   y:13 14 15
   x,,y
(1 2 3
4 5 6
7 8 9
10 11 12
13 14 15)
</pre>
<pre>
q)x:4 3#1+til 12
q)x
1  2  3
4  5  6
7  8  9
10 11 12
</pre>
<pre>
q)y:13 14 15
q)x,enlist y
1  2  3
4  5  6
7  8  9
10 11 12
13 14 15
</pre>
<p>377. fill x to length y with x's last item
</p>
<pre>
   x:&quot;quiz&quot;
   y:9
   a:(!y)&amp;-1+#x
   a
0 1 2 3 3 3 3 3 3
   x[a]
&quot;quizzzzzz&quot;
   x[(!y)&amp;-1+#x]
&quot;quizzzzzz&quot;
or, an alternative way:
   y#x,y#*|x
&quot;quizzzzzz&quot;
</pre>
<pre>
q)x:&quot;quiz&quot;
q)y:9
q)a:(til y)&amp;-1+count x
q)a
0 1 2 3 3 3 3 3 3
q)x[a]
&quot;quizzzzzz&quot;
q)x[(til y)&amp;-1+count x]
&quot;quizzzzzz&quot;
q)y#x,y#last  x
&quot;quizzzzzz&quot;
</pre>
<p>378. [omitted]
</p><p>379. remove leading, multiple and trailing y's from x
</p>
<pre>
   x:0 0 1 2 0 0 3 4 0 5 0 0 0
   y:0
   a:x=y
   b:~a&amp;1!a
   a
1 1 0 0 1 1 0 0 1 0 1 1 1
   b
0 1 1 1 0 1 1 1 1 1 0 0 0
   x[&amp;b]
0 1 2 0 3 4 0 5
   a[0]_ x[&amp;b]
1 2 0 3 4 0 5
</pre>
<pre>
q)x:0 0 1 2 0 0 3 4 0 5 0 0 0
q)y:0
q)a:x=y
q)b:not a&amp;1 rotate a
q)b
0111011111000b
q)a
1100110010111b
q)x[where b]
0 1 2 0 3 4 0 5
q)a[0]_ x[where b]
1 2 0 3 4 0 5
</pre>
<p>380. change items of x with value y[0] to y[1]
</p>
<pre>
   x:&quot;abcde&quot;[15 _draw 5]
   x
&quot;ddaeecadbbcbedc&quot;
   y:&quot;d &quot;
   @[x;&amp;x=*y;:;*|y]
&quot; aeeca bbcbe c&quot;
</pre>
<pre>
q)x:&quot;ddaeecadbbcbedc&quot;
q)y:&quot;d &quot;
q)@[x;where x=first y;:;last y]
&quot;  aeeca bbcbe c&quot;
</pre>
<p>381. invert all but 1st 1 in group of 1s
</p>
<pre>
   x:0 0 1 1 1 0 1 1 0 1
   x&gt;-1 _ 0,x
0 0 1 0 0 0 1 0 0 1
   m381:{x&gt;-1 _ 0,x}
   m381[x]
0 0 1 0 0 0 1 0 0 1
</pre>
<pre>
q)x:&quot;ddaeecadbbcbedc&quot;
q)y:x:0 0 1 1 1 0 1 1 0 1
q)x
0 0 1 1 1 0 1 1 0 1
q)x&gt;-1 _ 0,x
0010001001b
q)m381:{x&gt;-1 _ 0,x}
q)m381[x]
0010001001b
</pre>
<p>382. insert y in x after index g
</p>
<pre>
   x:1 2 3
   y:10*1+!7
   y
10 20 30 40 50 60 70
   g:3
   ((g+1)#y),x,(g+1)_ y
10 20 30 40 1 2 3 50 60 70
</pre>
<pre>
q)x:1 2 3
q)y:10*1+til 7
q)y
10 20 30 40 50 60 70
q)g:3
q)((g+1)#y),x,(g+1)_ y
10 20 30 40 1 2 3 50 60 70
</pre>
<p>383. pairwise difference
</p>
<pre>
   x:9 3 5 2 0
   --':x
6 -2 3 2
</pre>
<pre>
q)deltas x
9 -6 2 -3 -2
q)1_ deltas x
-6 2 -3 -2
q)1_ neg deltas x
6 -2 3 2
</pre>
<p>384. drop 1st, postpend 0
</p>
<pre>
   x:3 4 5 6
   1 _ x,0
4 5 6 0
</pre>
<pre>
q)x:3 4 5 6
q)1_ x,0
4 5 6 0
</pre>
<p>385. drop last, prepend 0
</p>
<pre>
   x:3 4 5 6
   -1 _ 0,x
0 3 4 5
</pre>
<pre>
q)x:3 4 5 6
q)-1 _ 0,x
0 3 4 5
</pre>
<p>386. shift x right y, fill 0
</p>
<pre>
   x:1+!12
   x
1 2 3 4 5 6 7 8 9 10 11 12
   y:3
   @[(-y)!x;!y;:;0]
0 0 0 1 2 3 4 5 6 7 8 9
</pre>
<pre>
q)x:1+til 12
q)y:3
q)@[(neg y) mod  x; til y;:;0]
0 0 0 1 2 3 4 5 6 7 8 9
</pre>
<p>387. shift x left y, fill 0
</p>
<pre>
   x:1+!12
   x
1 2 3 4 5 6 7 8 9 10 11 12
   y:3
   @[y!x;((#x)-y)+!y;:;0]
4 5 6 7 8 9 10 11 12 0 0 0
</pre>
<pre>
q)x:1+til 12
q)y:3
q)@[y rotate x;((count x)-y)+til y;:;0]
4 5 6 7 8 9 10 11 12 0 0 0
</pre>
<p>388. drop y rows from top of matrix x
</p>
<pre>
   x:6 3#&#160;!18
   x
(0 1 2
3 4 5
6 7 8
9 10 11
12 13 14
15 16 17)
   y:2
   y _ x
(6 7 8
9 10 11
12 13 14
15 16 17)
</pre>
<pre>
q)x:6 3#til 18
q)x
0  1  2
3  4  5
6  7  8
9  10 11
12 13 14
15 16 17
q)y:2
q)y _ x
6  7  8
9  10 11
12 13 14
15 16 17
</pre>
<p>389. Playing order of x ranked players
</p>
<pre>
   i:{1+2_sv'+|tt[-_-log2[x]]}
   j:{@[x;&amp;x&gt;y;:;0]}
   k:{j[i[x];x]}
   x:6
   i[x]
1 5 3 7 2 6 4 8
   j[i[x];x]
1 5 3 0 2 6 4 0
   k[x]
1 5 3 0 2 6 4 0
</pre>
<p>390. Conform table x rows to list y
</p>
<pre>
   f390:{@[((1 0*+/^y)|^x)#0;!#x;:;x]}
   x:3 3#1+!9
   y:1 2 3 4
   f390[x;y]
(1 2 3
4 5 6
7 8 9
0 0 0)
</pre>
<p>391. Conform table y columns to list y
</p>
<pre>
   x:4 2 # 9
   y:5#8
   a:((0 1*+/^y)|^x)#0
   a
(0 0 0 0 0
0 0 0 0 0
0 0 0 0 0
0 0 0 0 0)
   a[;!(^x)[1]]:x
   a
(9 9 0 0 0
9 9 0 0 0
9 9 0 0 0
9 9 0 0 0)
</pre>
<p>392. matrix from scalar or vector
</p>
<pre>
   x:4
   x
  &#160;!0
   (1+~#^x),:/x
   ,,4
   (1+~#^x),:/x
1 1
   x:7 8
   (1+~#^x),:/x:7 8
1 2
</pre>
<p>393. see 248
</p><p>394. [deferred]
</p><p>395. [deferred]
</p><p>396. remove columns y from x
</p>
<pre>
   y
((1 2 3 4
5 6 7 8
9 10 11 12)
(13 14 15 16
17 18 19 20
21 22 23 24))
   y _di\:\: 0 2
((2 4
6 8
10 12)
(14 16
18 20
22 24))
</pre>
<p>397. see 73
</p><p>398. diagonals from columns
</p>
<pre>
x:(1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
16 17 18 19 20
21 22 23 24 25)
(-!5)!'x
(1 2 3 4 5
10 6 7 8 9
14 15 11 12 13
18 19 20 16 17
22 23 24 25 21)
q)x:5 5#1+til 25
q)x
1  2  3  4  5
6  7  8  9  10
11 12 13 14 15
16 17 18 19 20
21 22 23 24 25
</pre>
<pre>
q)(neg til 5)rotate' x
1  2  3  4  5
10 6  7  8  9
14 15 11 12 13
18 19 20 16 17
22 23 24 25 21
</pre>
<p>399. columns from diagonals
</p>
<pre>
	  x
(1 2 3 4 5
10 6 7 8 9
14 15 11 12 13
18 19 20 16 17
22 23 24 25 21)
   (!5)!'x
(1 2 3 4 5
6 7 8 9 10
11 12 13 14 15
16 17 18 19 20
21 22 23 24 25)
</pre>
<pre>
q)x:(1 2 3 4 5;10 6 7 8 9;14 15 11 12 13;18 19 20 16 17;22 23 24 25 21)
q)(til 5)rotate'x
1  2  3  4  5
6  7  8  9  10
11 12 13 14 15
16 17 18 19 20
21 22 23 24 25
</pre>
<p>400. [deferred]
</p><p>401. first word in string x
</p>
<pre>
   x:&quot;twas brillig and the slith&quot;
   x?&quot; &quot;
4
   (x?&quot; &quot;)#x
&quot;twas&quot;
   fw:{(x?&quot; &quot;)#x}
   fw x
&quot;twas&quot;
</pre>
<pre>
q)x:&quot;twas brillig and the slith&quot;
q)x?&quot; &quot;
4
q)(x?&quot; &quot;)#x
&quot;twas&quot;
q)fw:{(x?&quot; &quot;)#x}
q)fw x
&quot;twas&quot;
</pre>
<p>402. see 392
</p><p>403. [omitted]
</p><p>404. end points for x fields of length y
</p>
<pre>
   x:5
   y:3
   @[&amp;x*y;(y-1)+y*!x;:;1]
0 0 1 0 0 1 0 0 1 0 0 1 0 0 1
</pre>
<pre>
q)x:5
q)y:3
q)@[(x*y)#0;(y-1)+y*til x;:;1]
0 0 1 0 0 1 0 0 1 0 0 1 0 0 1
</pre>
<p>405. start points for x fields of length y
</p>
<pre>
   x:5
   y:3
   @[&amp;x*y;y*!x;:;1]
1 0 0 1 0 0 1 0 0 1 0 0 1 0 0
</pre>
<pre>
q)x:5
q)y:3
q)@[(x*y)#0;y*til x;:;1]
1 0 0 1 0 0 1 0 0 1 0 0 1 0 0
</pre>
<p>406. add y to last item of x
</p>
<pre>
   x:1 2 3 4 5
   y:100
   @[x;-1+#x;+;y]
1 2 3 4 105
</pre>
<pre>
q)x:1 2 3 4 5
q)y:100
q)@[x;-1+count x;+;y]
1 2 3 4 105
</pre>
<p>407. vector length y of x 1s, the rest 0s
</p>
<pre>
   x:5
   y:12
   @[&amp;12;!x;:;1]
1 1 1 1 1 0 0 0 0 0 0 0
</pre>
<pre>
q)x:5
q)x:12
q)@[12#0;til x;:;1]
1 1 1 1 1 0 0 0 0 0 0 0
</pre>
<p>408. initial empty row to start matrix of x columns
</p>
<pre>
   x:15
   ,&amp;x
,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
   ,1.0*&amp;x
,0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.0
   ,x#&quot; &quot;
,&quot; &quot;
</pre>
<pre>
q)x:15
q)enlist x#0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
q)enlist 1.0*x#0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
q)enlist x#&quot; &quot;
&quot;               &quot;
</pre>
<p>409. [omitted]
</p><p>410. number of columns in matrix x
</p>
<pre>
   x:2 7#&quot; &quot;
   x
2 7
   *|^x
7
</pre>
<pre>
/not quite the same
q)x:2 7#&quot; &quot;
q)count x
2
q)count each x
7 7
q)(count;first count each)@\:x
2 7
</pre>
<p>411. number of rows in matrix x
</p>
<pre>
   x:2 7#&quot; &quot;
   x
2 7
   #x
2
</pre>
<pre>
/not quite the same
q)x:2 7#&quot; &quot;
q)count x
2
q)count each x
7 7
q)(count;first count each)@\:x
2 7
</pre>
<p>412. see 184
</p><p>413. omitted
</p><p>414. ending indices from field lengths
</p>
<pre>
   x:4 7 13 15 20
   (1+*x),-':x
5 3 6 2 5
</pre>
<pre>
q)x:4 7 13 15 20
q)(1+first x),-':[x]
5 4 3 6 2 5
</pre>
<p>415. lengths of infixes of 1 in x
</p>
<pre>
   x:0 0 1 1 1 0 0 1 1 1 1 0 1
   a:&lt;':0,x,0
   b:&gt;':0,x,0
   a
0 0 0 0 0 1 0 0 0 0 0 1 0 1
   b
0 0 1 0 0 0 0 1 0 0 0 0 1 0
   &amp;a
5 11 13
   &amp;b
2 7 12
   (&amp;a)-(&amp;b)
3 4 1
   (&amp;&lt;':0,x,0)-&amp;&gt;':0,x,0
3 4 1
   m415:{(&amp;&lt;':0,x,0)-&amp;&gt;':0,x,0}
</pre>
<pre>
q)x:0 0 1 1 1 0 0 1 1 1 1 0 1
q)a:&lt;':[0,x,0]
q)b:&gt;':[0,x,0]
q)a
000000100000101b
q)b
100100001000010b
q)a:1_a
q)b:1_b
q)a
00000100000101b
q)b
00100001000010b
q)where a
5 11 13
q)where b
2 7 12
q)(where a)-(where b)
3 4 1
q)m415:{(where 1_&lt;':[0,x,0])-(where 1_&gt;':[0,x,0])}
q)m415 x
3 4 1
</pre>
<p>416. omitted
</p><p>417. end points of equal infixes
</p>
<pre>
   x:&quot;baackkkegtt&quot;
   (~(1 _ x)=-1 _ x),1
1 0 1 1 0 0 1 1 1 0 1
</pre>
<pre>
q)x:&quot;baackkkegtt&quot;
q)(not(1 _ x)=-1 _ x),1b
10110011101b
</pre>
<p>418. starting indices of equal item infix
</p>
<pre>
   x:&quot;baackkkegtt&quot;
   1,~(1 _ x)=-1 _ x
1 1 0 1 1 0 0 1 1 1 0
</pre>
<pre>
q)x:&quot;baackkkegtt&quot;
q)(not (1 _ x)=-1 _ x),1b
10110011101b
</pre>
<p>419. pairwise ratios
</p>
<pre>
   x:2 10 50 100
  &#160;%':x
5 5 2.0
</pre>
<pre>
q)ratios x
2 5 5 2f
q)1_ratios x
5 5 2f
</pre>
<p>420. see 383
</p><p>421. deferred
</p><p>422. see 154
</p><p>423. lengths from start indicator
</p>
<pre>
   x:1 0 1 0 0 1 0 0 0 1 0
   &amp;x,1
0 2 5 9 11
   -':&amp;x,1
2 3 4 2
</pre>
<pre>
q)1_deltas where x,1
2 3 4 2
</pre>
<p>424. single blank from multiples
</p>
<pre>
   x:&quot;a b c d&quot;
   x[&amp;a|1 _ 1!1,a:~&quot; &quot;=x]
&quot;a b c d&quot;
</pre>
<pre>
q)x:&quot;a    b       c    d&quot;
q)x[where a|1 _ 1 rotate 1b,a:not &quot; &quot;=x]
&quot;a b c d&quot;
</pre>
<p>425. see 380
</p><p>426. change all multiple infixes of y in x to single
</p>
<pre>
   x:&quot;bccbceekl&quot;
   y:&quot;c&quot;
   x[&amp;a|-1 _ 1,a:~x=y]
&quot;bcbceekl&quot;
</pre>
<pre>
q)x:&quot;bccbceekl&quot;
q)y:&quot;c&quot;
q)x[where a|-1 _ 1b,a:not x=y]
&quot;bcbceekl&quot;
</pre>
<p>427. deferred
</p><p>428. see 73
</p><p>429. matrix with diagonal x
</p>
<pre>
   x:5 9 6 7 2
   (2##x)#,/x,'(2##x)#0
(5 0 0 0 0
0 9 0 0 0
0 0 6 0 0
0 0 0 7 0
0 0 0 0 2)
</pre>
<pre>
q)x:5 9 6 7 2
q)(2#count x)#raze x,'(2#count x)#0
5 0 0 0 0
0 9 0 0 0
0 0 6 0 0
0 0 0 7 0
0 0 0 0 2
</pre>
<p>430. polynomial derivative
</p>
<pre>
   x:1 2 3 4 5
   -1 _ x*|!#x
4 6 6 4
</pre>
<pre>
q)x:1 2 3 4 5
q)-1 _ x*reverse til count x
4 6 6 4
</pre>
<p>431. does item differ from next one
</p>
<pre>
   x:&quot;ceefffmeksc&quot;
   (~=':x),1
1 0 1 0 0 1 1 1 1 1 1
</pre>
<pre>
q)x:&quot;ceefffmeksc&quot;
q)1_ differ x
1010011111b
</pre>
<p>432. does item differ from previous one
</p>
<pre>
   x:&quot;ceefffmeksc&quot;
   1,~=':x
1 1 0 1 0 0 1 1 1 1 1
</pre>
<pre>
q)differ x
11010011111b
</pre>
<p>433. replace last item of x with y
</p>
<pre>
   x:&quot;abbccdefcdab&quot;
   y:&quot;t&quot;
   @[x;-1+#x;:;y]
&quot;abbccdefcdat&quot;
</pre>
<pre>
q)x:&quot;abbccdefcdab&quot;
q)y:&quot;t&quot;
q)@[x;-1+count x;:;y]
&quot;abbccdefcdat&quot;
</pre>
<p>434. replace first item of x with y
</p>
<pre>
   x:&quot;abbccdefcdab&quot;
   y:&quot;t&quot;
   @[x;0;:;y]
&quot;tbbccdefcdab&quot;
</pre>
<pre>
q)x:&quot;abbccdefcdab&quot;
q)y:&quot;t&quot;
q)@[x;0;:;y]
&quot;tbbccdefcdab&quot;
</pre>
<p>435. [deferred]
</p><p>436. [deferred]
</p><p>437. remove leading zeros
</p>
<pre>
   x:&quot;00002345600345000&quot;
((x=&quot;0&quot;)?0)_ x
&quot;2345600345000&quot;
</pre>
<pre>
q)x:&quot;00002345600345000&quot;
q)((x=&quot;0&quot;)?0b) _ x
&quot;2345600345000&quot;
</pre>
<p>438. index of 1st 1 following index y in x
</p>
<pre>
   x:1 0 0 1 1 0 1 1 0
   y:3
   y+(y _ x)?1
3
   y+((y+1)_ x)?1
3
(y+1)+((y+1)_ x)?1
4
/ a more K-like alternative
   &amp;x
0 3 4 6 7
   y&lt;&amp;x
0 0 1 1 1
   (&amp;x)[*&amp;y&lt;&amp;x]
4
</pre>
<pre>
q)x:1 0 0 1 1 0 1 1 0
q)y:3
q)y+(y _ x)?1
3
q)y+((y+1)_ x)?1
3
q)(y+1)+((y+1)_ x)?1
4
q)where x
0 3 4 6 7
q)y&lt;where x
00111b
q)(where x)[first where y&lt;where x]
4
</pre>
<p>439. last 1s in groups of 1s
</p>
<pre>
   x:0 1 1 0 1 1 1 0 0 1
   x&gt;1 _ x,0
0 0 1 0 0 0 1 0 0 1
</pre>
<pre>
q)x:0 1 1 0 1 1 1 0 0 1
q)x&gt;1 _ x,0
0010001001b
</pre>
<p>440. 1st 1 in groups of 1s
</p>
<pre>
   x:0 1 1 0 1 1 1 0 0 1
   x&gt;1 _ x,0
0 0 1 0 0 0 1 0 0 1
</pre>
<pre>
q)x:0 1 1 0 1 1 1 0 0 1
q)x&gt;1 _ x,0
0010001001b
/440=439?
</pre>
<p>441. comma separated list from table
</p>
<pre>
   x:(&quot;Swift&quot;;&quot;Austen&quot;;&quot;Dickens&quot;)
   x
(&quot;Swift&quot;
&quot;Austen&quot;
&quot;Dickens&quot;)
&quot;,&quot;,'x
(&quot;,Swift&quot;
&quot;,Austen&quot;
&quot;,Dickens&quot;)
   ,/&quot;,&quot;,'x
&quot;,Swift,Austen,Dickens&quot;
   1 _ ,/&quot;,&quot;,'x
&quot;Swift,Austen,Dickens&quot;
</pre>
<pre>
q)x:(&quot;Swift&quot;;&quot;Austen&quot;;&quot;Dickens&quot;)
q)&quot;,&quot;,x
&quot;,&quot;
&quot;Swift&quot;
&quot;Austen&quot;
&quot;Dickens&quot;
q)&quot;,&quot;,'x
&quot;,Swift&quot;
&quot;,Austen&quot;
&quot;,Dickens&quot;
q)raze &quot;,&quot;,'x
&quot;,Swift,Austen,Dickens&quot;
q)1_ raze &quot;,&quot;,'x
&quot;Swift,Austen,Dickens&quot;
</pre>
<p>442. 1st difference
</p>
<pre>
   x:+\1 2 3 4 5
   x
1 3 6 10 15
   -':x
2 3 4 5
   (*x),(-':x)
1 2 3 4 5
</pre>
<pre>
q)x:sums 1 2 3 4 5
q)deltas x
1 2 3 4 5
</pre>
<p>443. drop first y columns from matrix x
</p>
<pre>
   x:4 3#&#160;!12
   x
(0 1 2
3 4 5
6 7 8
9 10 11)
   y:2
   y _ x
(6 7 8
9 10 11)
</pre>
<pre>
q)x:4 3#til 12
q)y:2
q)y _ x
6 7  8
9 10 11
</pre>
<p>444. drop first y rows from matrix x
</p>
<pre>
   x:4 3#&#160;!12
   x
(0 1 2
3 4 5
6 7 8
9 10 11)
   y:2
   y _' x
(,2
,5
,8
,11)
</pre>
<pre>
q)x:4 3#til 12
q)y:2
q)y _ 'x
2
5
8
11
</pre>
<p>445. number of columns in matrix x
</p>
<pre>
   x:4 3#&#160;!12
   x
(0 1 2
3 4 5
6 7 8
9 10 11)
   *|^x
3
</pre>
<p>446. number of rows in matrix x
</p>
<pre>
   x:4 3#&#160;!12
   x
(0 1 2
3 4 5
6 7 8
9 10 11)
   #x
4
q)x
0 1  2
3 4  5
6 7  8
9 10 11
</pre>
<pre>
q)x:4 3#til 12
q)count x
4
</pre>
<p>447. conditional drop of y items from array x
</p>
<pre>
   x:4 3#&#160;!12
   x
(0 1 2
3 4 5
6 7 8
9 10 11)
   g:0
(y*g) _ x
(0 1 2
3 4 5
6 7 8
9 10 11)
   g:1
(y*g) _ x
(6 7 8
9 10 11)
</pre>
<pre>
q)x:4 3#til 12
q)g:0
q)y:2
q)(y*g)_ x
0 1  2
3 4  5
6 7  8
9 10 11
q)g:1
q)(y*g)_ x
6 7  8
9 10 11
</pre>
<p>448. conditional drop of last item of array x
</p>
<pre>
   x:4 3#&#160;!12
   x
(0 1 2
3 4 5
6 7 8
9 10 11)
   y:0
   (-y) _ x
(0 1 2
3 4 5
6 7 8
9 10 11)
   y:1
   (-y) _ x
(0 1 2
3 4 5
6 7 8)
</pre>
<pre>
q)x:4 3#til 12
q)x
0 1  2
3 4  5
6 7  8
9 10 11
q)y:0
q)(neg y)_x
0 1  2
3 4  5
6 7  8
9 10 11
q)y:1
q)(neg y)_x
0 1 2
3 4 5
6 7 8
</pre>
<p>449. limiting x between l and h, inclusive
</p>
<pre>
   x: 5 6 _draw 100
   x
(58 9 37 84 39 99
60 30 45 97 77 35
49 87 82 79 8 30
46 61 20 51 12 34
31 51 29 35 17 89)
   l:30
   h:70
   l|h&amp;x
(58 30 37 70 39 70
60 30 45 70 70 35
49 70 70 70 30 30
46 61 30 51 30 34
31 51 30 35 30 70)
</pre>
<pre>
q)x:(58 9 37 84 39 99;60 30 45 97 77 35;49 87 82 79 8 30;46 61 20 51 12 34;31 51 29 35 17 89)
q)l:30
q)h:70
q)l|h&amp;x
58 30 37 70 39 70
60 30 45 70 70 35
49 70 70 70 30 30
46 61 30 51 30 34
31 51 30 35 30 70
</pre>
<p>450. arithmetic precision of system in decimals
</p>
<pre>
   log10:{(_log x)%_log 10}
   log10 3
0.47712125471966244
   _ _abs log10 _abs 1-3*%3
0I
This indicates that the precision is infinite (which isn't true)
and is a consequence of
3*%3
1.0
</pre>
<pre>
q)log10:{(log x)%log 10}
q)log10 3
0.4771213
q)\P 17
q)log10 3
0.47712125471966238
q)\P 0
q)log10 3
0.47712125471966238
q)abs log10 abs 1-3*reciprocal 3
0w
q)floor abs log10 abs 1-3*reciprocal 3
0W
</pre>
<p>451. arithmetic progression from x to y with step g
</p>
<pre>
   ap:{[x;y;g]x+g*!1+_(y-x)%g}
   ap[3;20;5]
3 8 13 18
   ap[3;-20;-5]
3 -2 -7 -12 -17
</pre>
<pre>
q)ap:{[x;y;g]x+g*til 1+ floor (y-x)%g}
q)ap[3;20;5]
3 8 13 18
q)ap[3;-20;-5]
3 -2 -7 -12 -17
</pre>
<p>452. number of positions in integer x
</p>
<pre>
   dp:{1+(x&lt;0)+_ log10[_abs[x+0=x]]}
   dp 1234
4
   dp -1234
5
   dp 0
1
   dp 1
1
   dp 7
1
   dp 12345678
8
</pre>
<pre>
q)log10:{(log x)%log 10}
q)dp:{1+(x&lt;0)+floor log10[abs[x+0=x]]}
q)dp 1234
4
q)dp -1234
5
q)dp 0
1
q)dp 7
1
q)dp 12345678
8
</pre>
<p>453. round to nearest even integer
</p>
<pre>
   re:{_ x+~1&gt;x!2}
   x:0.9 1 2.5 3.1 -0.2 -1.9
   re x
0 2 2 4 0 -2
</pre>
<pre>
q)re:{floor x+not 1&gt;x mod 2}
q)x:0.9 1 2.5 3.1 -0.2 -1.9
q)re x
0 2 2 4 0 -2
</pre>
<p>454. rounding, but to nearest even integer if fractional part is 0.5
</p>
<pre>
   rn:{_ x+0.5*~0.5=x!2}
   x:23.6 40.5 3.2 -14.02 3.5 4.5
   rn x
24 40 3 -14 4 4
</pre>
<pre>
q)rn:{floor x+0.5*not 0.5=x mod 2}
q)x:23.6 40.5 3.2 -14.02 3.5 4.5
q)rn x
24 40 3 -14 4 4
</pre>
<p>455. number of digit positions in x
</p>
<pre>
   nd:{1+_ log10(x=0)+x*1 -10[x&lt;0]}
   x:4 678 -21 -10854
   nd x
1 3 3 6
</pre>
<pre>
q)nd:{1+floor log10(x=0)+x*1 -10[x&lt;0]}
q)x:4 678 -21 -10854
q)nd x
1 3 3 6
</pre>
<p>456. number of digits in nonnegative integer x
</p>
<pre>
   np:{1+_ log10 x+0=x}
   x:0 13 523 16008
   np x
1 2 3 5
</pre>
<pre>
q)np:{1+floor log10 x+0=x}
q)x:0 13 523 16008
q)np x
1 2 3 5
</pre>
<p>457. is x integral
</p>
<pre>
   ii:{x=_ x}
   x:67 -120 3.83 -5.5
   ii x
1 1 0 0
</pre>
<pre>
q)ii:{x=floor x}
q)x:67 -120 3.83 -5.5
q)ii x
1100b
</pre>
<p>458. [omitted]
</p><p>459. leading digit of numeric code abbb
</p>
<pre>
   ld:{_ x%1000}
   x:6 _draw 10000
   x
1319 8629 6581 6988 790 9045
   ld x
1 8 6 6 0 9
</pre>
<pre>
q)ld:{floor x%1000}
q)x:1319 8629 6581 6988 790 9045
q)ld x
1 8 6 6 0 9
</pre>
<p>460. round y to x decimals
</p>
<pre>
   rn:{(10^-x)*_ 0.5+y*10^x}
   y:3.3256789
   x:3
   rn[x;y]
3.326
</pre>
<pre>
q)rn:{xexp[10;neg x]*`long$y*xexp[10;x]}
q)y:3.3256789
q)x:3
q)rn[x;y]
3.3259999999999978
q)\P 7
q)rn[x;y]
3.326
q)rn[2;123123123123.123123]
123123123123.12
</pre>
<p>461. round to nearest hundredth
</p>
<pre>
   rh:{0.01*_0.5+x*100}
   x:3.1414 2.71828 -12.66666
   rh x
3.14 2.72 -12.67
</pre>
<pre>
q)rh:{0.01*floor 0.5+x*100}
q)x:3.1414 2.71828 -12.66666
q)rh x
3.14 2.72 -12.67
</pre>
<p>462. round to nearest integer
</p>
<pre>
   ri:{_0.5+x}
   x:4.5 3.21 80.9 -2.4 -9.6
   ri x
5 3 81 -2 -10
</pre>
<pre>
q)ri:{floor 0.5+x}
q)x:4.5 3.21 80.9 -2.4 -9.6
q)ri x
5 3 81 -2 -10
</pre>
<p>463. is x a leap year
</p>
<pre>
   ly:{(+/0=x!/:4 100 400)!2}
   x:1900 1901 1904 2000
   ly x
0 0 1 1
</pre>
<pre>
q)ly:{(sum 0=x mod/:4 100 400)mod 2}
q)x:1900 1901 1904 2000
q)ly x
0 0 1 1
</pre>
<p>464. framing character matrix x
</p>
<pre>
   x:4 4#&quot;abcdefghijklmnop&quot;
   x
(&quot;abcd&quot;
&quot;efgh&quot;
&quot;ijkl&quot;
&quot;mnop&quot;)
   +&quot;-&quot;,'(+&quot;|&quot;,'x,'&quot;|&quot;),'&quot;-&quot;
(&quot;------&quot;
&quot;|abcd|&quot;
&quot;|efgh|&quot;
&quot;|ijkl|&quot;
&quot;|mnop|&quot;
&quot;------&quot;)
</pre>
<pre>
q)x:4 4#&quot;abcdefghijklmnop&quot;
q)x
&quot;abcd&quot;
&quot;efgh&quot;
&quot;ijkl&quot;
&quot;mnop&quot;
q)flip&quot;-&quot;,'(flip&quot;|&quot;,'x,'&quot;|&quot;),'&quot;-&quot;
&quot;------&quot;
&quot;|abcd|&quot;
&quot;|efgh|&quot;
&quot;|ijkl|&quot;
&quot;|mnop|&quot;
&quot;------&quot;
</pre>
<p>465. magnitude of fractional part
</p>
<pre>
   x:6.13 -6.13
   _abs[x]!1
0.13 0.13
</pre>
<pre>
q)abs[x] mod floor abs x
0.13 0.13
</pre>
<p>466. remove every y-th item of x
</p>
<pre>
   x:4+!10
   x
4 5 6 7 8 9 10 11 12 13
   y:3
  &#160;!#x
0 1 2 3 4 5 6 7 8 9
   (!#x)!y
0 1 2 0 1 2 0 1 2 0
   ~0=(!#x)!y
0 1 1 0 1 1 0 1 1 0
   &amp;~0=(!#x)!y
1 2 4 5 7 8
   x[&amp;~0=(!#x)!y]
5 6 8 9 11 12
</pre>
<pre>
q)x:4+til 10
q)x
4 5 6 7 8 9 10 11 12 13
q)y:3
q)til count x
0 1 2 3 4 5 6 7 8 9
q)(til count x)mod y
0 1 2 0 1 2 0 1 2 0
q)0=(til count x)mod y
1001001001b
q)not 0=(til count x)mod y
0110110110b
q)where not 0=(til count x)mod y
1 2 4 5 7 8
q)x[where not 0=(til count x)mod y]
5 6 8 9 11 12
</pre>
<p>467. select every y-th item of y
</p>
<pre>
   x:4+!10
   x
4 5 6 7 8 9 10 11 12 13
   y:3
  &#160;!#x
0 1 2 3 4 5 6 7 8 9
   (!#x)!y
0 1 2 0 1 2 0 1 2 0
   0=(!#x)!y
1 0 0 1 0 0 1 0 0 1
   &amp;0=(!#x)!y
0 3 6 9
   x[&amp;0=(!#x)!y]
4 7 10 13
</pre>
<pre>
q)x:4+til 10
q)x
4 5 6 7 8 9 10 11 12 13
q)y:3
q)til count x
0 1 2 3 4 5 6 7 8 9
q)(til count x)mod y
0 1 2 0 1 2 0 1 2 0
q)0=(til count x)mod y
1001001001b
q)where 0=(til count x)mod y
0 3 6 9
q)x[where 0=(til count x)mod y]
4 7 10 13
</pre>
<p>468. see dv in 164
</p><p>469. remove every second item
</p>
<pre>
   x:&quot;abcdefghijklmn&quot;
   (!#x)!2
0 1 0 1 0 1 0 1 0 1 0 1 0 1
   &amp;(!#x)!2
1 3 5 7 9 11 13
   x[&amp;(!#x)!2]
&quot;bdfhjln&quot;
</pre>
<pre>
q)x:&quot;abcdefghijklmn&quot;
q)(til count x)mod 2
0 1 0 1 0 1 0 1 0 1 0 1 0 1
q)where (til count x)mod 2
1 3 5 7 9 11 13
q)x[where (til count x)mod 2]
&quot;bdfhjln&quot;
</pre>
<p>470. items of x divisible by y
</p>
<pre>
   x:10 _draw 100
   x
95 33 64 10 78 1 47 20 92 95
   y:4
   x!y
3 1 0 2 2 1 3 0 0 3
   0=x!y
0 0 1 0 0 0 0 1 1 0
   &amp;0=x!y
2 7 8
   x[&amp;0=x!y]
64 20 92
</pre>
<pre>
q)x:95 33 64 10 78 1 47 20 92 95
q)y:4
q)x mod y
3 1 0 2 2 1 3 0 0 3
q)0=x mod y
0010000110b
q)where 0=x mod y
2 7 8
q)x[where 0=x mod y]
64 20 92
</pre>
<p>471. index of first occurrence of g in x (circularly) after y
</p>
<pre>
   x: 15 _draw 10
   x
6 6 0 0 8 9 8 1 0 2 9 4 6 3 5
   g:0 6 5
   y:9
   (y+(y!x)?g)!#x
9
   (y+(y!x)?/:g)!#x
2 12 14
</pre>
<pre>
/not quite the same
q)x:6 6 0 0 8 9 8 1 0 2 9 4 6 3 5
q)g:0 6 5
q)y:9
q)(y+(y rotate x)?g)mod count x
2 12 14
</pre>
<p>472. omitted
</p><p>473. is x even
</p>
<pre>
   x:1 2 3 4 5
   ~x!2
0 1 0 1 0
</pre>
<pre>
q)x:1 2 3 4 5
q)not x mod 2
01010b
</pre>
<p>474. round x to zero if magnitude less than y
</p>
<pre>
   x:1e-4 -1e-8 -1e-12 1e-16
   x*~y&gt;_abs x
0.0001 -1e-008 0 0
</pre>
<pre>
q)x:1e-4 -1e-8 -1e-12 1e-16
q)y:1e-9
q)x*not y&gt;abs x
0.0001 -1e-08 -0 0
q)y&gt;abs x
0011b
q)not y&gt;abs x
1100b
q)x*not y&gt;abs x
0.0001 -1e-08 -0 0
/y is unspecified and arbitrarily defined
/need to explain -0.
</pre>
<p>475. increase absolute value without sign change
</p>
<pre>
   x:0 -1 2 -3 4 -5
   sg:{(x&gt;0)-(x&lt;0)}
   y:10
   (sg x)*y+_abs x /problem with x=0
0 -11 12 -13 14 -15.0
</pre>
<pre>
q)x:0 -1 2 -3 4 -5
q)sg:{(x&gt;0)-(x&lt;0)}	/or use the builtin signum
q)y:10
q)(sg x)*y+abs x /problem with x=0
0 -11 12 -13 14 -15
</pre>
<p>476. fractional part with sign
</p>
<pre>
   x:0.2 2.3 -0.2 -1.8 0 5 -7
   (sg x)*(_abs x)!1
0.2 0.3 -0.2 -0.8 0 0 0
</pre>
<pre>
q)sg:{(x&gt;0)-(x&lt;0)}      /or use the builtin signum
q)x:0.2 2.3 -0.2 -1.8 0 5 -7
q)(sg x)*(abs x)mod 1
0.2 0.3 -0.2 -0.8 0 0 -0
</pre>
<p>477. square x retaining sign
</p>
<pre>
   x:0 -1 2 -3 4
   x*_abs x
0 -1 4 -9 16.0
</pre>
<pre>
q)x:0 -1 2 -3 4
q)x*abs x
0 -1 4 -9 16
</pre>
<p>478. fractional part
</p>
<pre>
   x:0 1 -2 3.4 -5.6 -6.1
   x!1
0 0 0 0.4 0.4 0.9
</pre>
<pre>
q)x:0 1 -2 3.4 -5.6 -6.1
q)x mod 1
0 0 0 0.4 0.4 0.9
</pre>
<p>479. last part of abbb
</p>
<pre>
   x:1234 5678 9012 345 6789
   x!1000
234 678 12 345 789
</pre>
<pre>
q)x:1234 5678 9012 345 6789
q)x mod 1000
234 678 12 345 789
</pre>
<p>480. replace items of x in y by 0
</p>
<pre>
   x:1 2 3 4 5
   y:2 4
   x _lin y
0 1 0 1 0
   x*~x _lin y
1 0 3 0 5
</pre>
<pre>
q)x:1 2 3 4 5
q)y:2 4
q)x in y
01010b
q)x*not x in y
1 0 3 0 5
</pre>
<p>481.replace items of x not in y by 0
</p>
<pre>
   x:1 2 3 4 5
   y:2 4
   x _lin y
0 1 0 1 0
   x*x _lin y
0 2 0 4 0
</pre>
<pre>
q)x:1 2 3 4 5
q)y:2 4
q)x in y
01010b
q)x*x in y
0 2 0 4 0
</pre>
<p>482. merge x any under control of g
</p>
<pre>
   x:1 2 3 4 5
   y:100 200 300 400 500
   g:1 0 0 1 1 0 1 0 0 1
   (x,y)[&lt;&lt;g]
100 1 2 200 300 3 400 4 5 500
</pre>
<pre>
q)x:1 2 3 4 5
q)y:100 200 300 400 500
q)g:1 0 0 1 1 0 1 0 0 1
q)(x,y)[rank g]
100 1 2 200 300 3 400 4 5 500
</pre>
<p>483. see 481
</p><p>484. right to left scan
</p>
<pre>
   x:1 2 3 4 5
   |+\|x
15 14 12 9 5
</pre>
<pre>
q)x:1 2 3 4 5
q)reverse sums reverse x
15 14 12 9 5
</pre>
<p>485. append empty row on matrix
</p>
<pre>
   x:(&quot;ab&quot;;&quot;cd&quot;;&quot;ef&quot;)
   x
(&quot;ab&quot;
&quot;cd&quot;
&quot;ef&quot;)
   x,,(*|^x)#&quot; &quot;
(&quot;ab&quot;
&quot;cd&quot;
&quot;ef&quot;
&quot; &quot;)
</pre>
<p>486. [omitted]
</p><p>487. insert empty row in x after row y
</p>
<pre>
   x:(&quot;ab&quot;;&quot;cd&quot;;&quot;ef&quot;)
   x
(&quot;ab&quot;
&quot;cd&quot;
&quot;ef&quot;)
   y:1
   a:x,,(*|^x)#&quot; &quot;
   a
(&quot;ab&quot;
&quot;cd&quot;
&quot;ef&quot;
&quot; &quot;)
   b:&lt;(!#x),y
   b
0 1 3 2
   a[b]
(&quot;ab&quot;
&quot;cd&quot;
&quot; &quot;
&quot;ef&quot;)
   (x,,(*|^x)#&quot; &quot;)[&lt;(!#x),y]
(&quot;ab&quot;
&quot;cd&quot;
&quot; &quot;
&quot;ef&quot;)
</pre>
<p>488. omitted
</p><p>489. make string y into table guided by marker x
</p>
<pre>
   y:&quot;eachwordinarow&quot;
   x:1 0 0 0 1 0 0 0 1 0 1 1 0 0
   a:&amp;x
   a
0 4 8 10 11
   b:a _ y
   b
(&quot;each&quot;
&quot;word&quot;
&quot;in&quot;
,&quot;a&quot;
&quot;row&quot;)
   (&amp;x)_ y
(&quot;each&quot;
&quot;word&quot;
&quot;in&quot;
,&quot;a&quot;
&quot;row&quot;)
</pre>
<pre>
q)y:&quot;eachwordinarow&quot;
q)x:1 0 0 0 1 0 0 0 1 0 1 1 0 0
q)a:where x
q)a
0 4 8 10 11
q)b:a _ y
q)b
&quot;each&quot;
&quot;word&quot;
&quot;in&quot;
,&quot;a&quot;
&quot;row&quot;
q)(where x) _ y
&quot;each&quot;
&quot;word&quot;
&quot;in&quot;
,&quot;a&quot;
&quot;row&quot;
</pre>
<p>490. insert spaces in text
</p>
<pre>
   x:&quot;wider&quot;
   a:+,x
   a
(,&quot;w&quot;
,&quot;i&quot;
,&quot;d&quot;
,&quot;e&quot;
,&quot;r&quot;)
   b:a,'&quot; &quot;
   b
(&quot;w &quot;
&quot;i &quot;
&quot;d &quot;
&quot;e &quot;
&quot;r &quot;)
   ,/b
&quot;w i d e r &quot;
   ,/(+,x),'&quot; &quot;
&quot;w i d e r &quot;
</pre>
<pre>
q)x:&quot;wider&quot;
q)a:flip enlist x
q)a
,&quot;w&quot;
,&quot;i&quot;
,&quot;d&quot;
,&quot;e&quot;
,&quot;r&quot;
q)b:a,'&quot; &quot;
q)b
&quot;w &quot;
&quot;i &quot;
&quot;d &quot;
&quot;e &quot;
&quot;r &quot;
q)raze b
&quot;w i d e r &quot;
q)raze(flip enlist x),'&quot; &quot;
&quot;w i d e r &quot;
</pre>
<p>491. or-reduce infixes of y marked by x
</p>
<pre>
   x:1 0 0 1 0 0 0 1 0 0 0 0
   y:0 0 0 0 1 0 0 0 0 0 1 0
   a:(&amp;x)_ y
   a
(0 0 0
0 1 0 0
0 0 0 1 0)
   |/'a
0 1 1
</pre>
<pre>
q)x:1 0 0 1 0 0 0 1 0 0 0 0
q)y:0 0 0 0 1 0 0 0 0 0 1 0
q)a:(where x)_y
q)a
0 0 0
0 1 0 0
0 0 0 1 0
q)max'[a]
0 1 1
</pre>
<p>492. and-reduce infixes of y marked by x
</p>
<pre>
   x:1 0 0 1 0 0 0 1 0 0 0 0
   y:0 1 1 1 1 1 1 1 1 1 1 0
   (&amp;x)_ y
(0 1 1
1 1 1 1
1 1 1 1 0)
   &amp;/'(&amp;x)_ y
0 1 0
</pre>
<pre>
q)x:1 0 0 1 0 0 0 1 0 0 0 0
q)y:0 1 1 1 1 1 1 1 1 1 1 0
q)(where x)_y
0 1 1
1 1 1 1
1 1 1 1 0
q)min'[(where x)_y]
0 1 0
</pre>
<p>493. choose x or y depending on boolean g
</p>
<pre>
   x:&quot;abcdef&quot;
   y:&quot;xyz&quot;
   g:0
  &#160;:[g;x;y]
&quot;xyz&quot;
   g:1
  &#160;:[g;x;y]
&quot;abcdef&quot;
</pre>
<pre>
q)x:&quot;abcdef&quot;
q)y:&quot;xyz&quot;
q)g:0
q)$[g;x;y]
&quot;xyz&quot;
q)g:1
q)$[g;x;y]
&quot;abcdef&quot;
</pre>
<p>494. see 424
</p><p>495. indices of all occurrences of y in x
</p>
<pre>
   x:&quot;abcdefgab&quot;
   y:&quot;afc*&quot;
   x _lin y
1 0 1 0 0 1 0 1 0
   &amp;x _lin y
0 2 5 7
</pre>
<pre>
q)x:&quot;abcdefgab&quot;
q)y:&quot;afc*&quot;
q)x in y
101001010b
q)where x in y
0 2 5 7
</pre>
<p>496. remove punctuation characters
</p>
<pre>
   x:&quot;oh! no, stop it. you will?&quot;
   y:&quot;,;:.!?&quot;
   x _dvl y
&quot;oh no stop it you will&quot;
</pre>
<pre>
/not quite the same
q)x[where not x in y]
&quot;oh no stop it you will&quot;
</pre>
<p>497. set union
</p>
<pre>
   x:&quot;12345&quot;
   y:&quot;4567890&quot;
   y,x[&amp;~x _lin y]
&quot;4567890123&quot;
</pre>
<pre>
q)x:&quot;12345&quot;
q)y:&quot;4567890&quot;
q)y,x[where not x in y]
&quot;4567890123&quot;
</pre>
<p>498. set difference
</p>
<pre>
   x:&quot;12345&quot;
   y:&quot;4567890&quot;
   x _dvl y
&quot;123&quot;
</pre>
<pre>
q)x:&quot;12345&quot;
q)y:&quot;4567890&quot;
q)x[where not x in y]
&quot;123&quot;
</pre>
<p>499. rows of y starting with item of x
</p>
<pre>
   x:(&quot;abcd&quot;;&quot;efgh&quot;;&quot;ijkl&quot;;&quot;mnop&quot;)
   x
(&quot;abcd&quot;
&quot;efgh&quot;
&quot;ijkl&quot;
&quot;mnop&quot;)
   y:&quot;ai&quot;
   x[;0] _lin y
1 0 1 0
   &amp;x[;0] _lin y
0 2
   x[&amp;x[;0] _lin y]
(&quot;abcd&quot;
&quot;ijkl&quot;)
</pre>
<pre>
q)x:(&quot;abcd&quot;;&quot;efgh&quot;;&quot;ijkl&quot;;&quot;mnop&quot;)
q)x
&quot;abcd&quot;
&quot;efgh&quot;
&quot;ijkl&quot;
&quot;mnop&quot;
q)y:&quot;ai&quot;
q)x[;0] in y
1010b
q)where x[;0] in y
0 2
q)x[where x[;0] in y]
&quot;abcd&quot;
&quot;ijkl&quot;
</pre>
<p>500. set intersection
</p>
<pre>
   x:&quot;abcdefghijxyz&quot;
   y:&quot;yacqwopzbx&quot;
   x[&amp;x _lin y]
&quot;abcxyz&quot;
</pre>
<pre>
q)x:&quot;abcdefghijxyz&quot;
q)y:&quot;yacqwopzbx&quot;
q)x[where x in y]
&quot;abcxyz&quot;
</pre>
<p>501.see 154
</p><p>502. deferred
</p><p>503. indices of all occurrences of y in x
</p>
<pre>
   x:&quot;abcdeabc&quot;
   y:&quot;a&quot;
   &amp;x=y
0 5
</pre>
<pre>
q)x:&quot;abcdeabc&quot;
q)y:&quot;a&quot;
q)where x=y
0 5
</pre>
<p>504. replace items of y satisfying x with g
</p>
<pre>
   x:1 0 0 0 1 0 1 1 0 1
   y:&quot;abcdefghij&quot;
   g:&quot; &quot;
   @[y;&amp;x;:;g]
&quot; bcd f i &quot;
</pre>
<pre>
q)x:1 0 0 0 1 0 1 1 0 1
q)y:&quot;abcdefghij&quot;
q)g:&quot; &quot;
q)@[y;where x;:;g]
&quot; bcd f  i &quot;
</pre>
<p>505. see 154
</p><p>506. see 41
</p><p>507. insert blank in y after mark in x
</p>
<pre>
   x:1 0 0 0 0 1 0 0
   y:&quot;abcdefgh&quot;
   x#\:&quot; &quot;
(,&quot; &quot;
&quot;&quot;
&quot;&quot;
&quot;&quot;
&quot;&quot;
,&quot; &quot;
&quot;&quot;
&quot;&quot;)
   y,' x#\:&quot; &quot;
(&quot;a &quot;
,&quot;b&quot;
,&quot;c&quot;
,&quot;d&quot;
,&quot;e&quot;
&quot;f &quot;
,&quot;g&quot;
,&quot;h&quot;)
   ,/ y,' x#\:&quot; &quot;
&quot;a bcdef gh&quot;
</pre>
<pre>
q)x:1 0 0 0 0 1 0 0
q)y:&quot;abcdefgh&quot;
q)x#\:&quot; &quot;
,&quot; &quot;
&quot;&quot;
&quot;&quot;
&quot;&quot;
&quot;&quot;
,&quot; &quot;
&quot;&quot;
&quot;&quot;
q)y,' x#\:&quot; &quot;
&quot;a &quot;
,&quot;b&quot;
,&quot;c&quot;
,&quot;d&quot;
,&quot;e&quot;
&quot;f &quot;
,&quot;g&quot;
,&quot;h&quot;
q)raze y,' x#\:&quot; &quot;
&quot;a bcdef gh&quot;
</pre>
<p>508. conditional text
</p>
<pre>
   x:0
   ,/((~x)#'&quot;in&quot;),&quot;correct&quot;
&quot;incorrect&quot;
   x:1
   ,/((~x)#'&quot;in&quot;),&quot;correct&quot;
&quot;correct&quot;
</pre>
<pre>
q)x:0
q)raze((not x)#'&quot;in&quot;),&quot;correct&quot;
&quot;incorrect&quot;
q)x:1
q)raze((not x)#'&quot;in&quot;),&quot;correct&quot;
&quot;correct&quot;
</pre>
<p>509. remove y from x
</p>
<pre>
   x:&quot;abcdeabc&quot;
   y:&quot;a&quot;
   x _dv y
&quot;bcdebc&quot;
</pre>
<pre>
q)x:&quot;abcdeabc&quot;
q)y:&quot;a&quot;
q)x[where not  x in y]
&quot;bcdebc&quot;
</pre>
<p>510. remove blanks
</p>
<pre>
   x:&quot; bcde bc&quot;
   x _dv &quot; &quot;
&quot;bcdebc&quot;
</pre>
<pre>
q)y:&quot; &quot;
q)x:&quot; bcde bc&quot;
q)x[where not  x in y]
&quot;bcdebc&quot;
</pre>
<p>511. apply f over all of x
</p>
<pre>
   x:2 3 4#1+!24
   x
((1 2 3 4
5 6 7 8
9 10 11 12)
(13 14 15 16
17 18 19 20
21 22 23 24))
   +//x
300
   ao:{[f;x]f//x}
   ao[+;x]
300
   ao[*;1.0*x]
6.204484e+023
   ao[+;-x]
-300
</pre>
<p>512. select items of x according to markers in y
</p>
<pre>
   x:2 3 4#1+!24
   x
((1 2 3 4
5 6 7 8
9 10 11 12)
(13 14 15 16
17 18 19 20
21 22 23 24))
   y:1 0 0 1
   x[;;&amp;y]
((1 4
5 8
9 12)
(13 16
17 20
21 24))
</pre>
<p>513. empty matrix
</p>
<pre>
   x:,!0
   x
,!0
   x
1 0
</pre>
<p>514. apply to dimension 1 function defined on dimension 0
</p>
<pre>
   x:3 4#1+!12
   x
(1 2 3 4
5 6 7 8
9 10 11 12)
   +/x
15 18 21 24
   +/'x
10 26 42
</pre>
<pre>
q)sum x
15 18 21 24
q)sum each x
10 26 42
</pre>
<p>515. deferred
</p><p>516. multiply each column of x by y
</p>
<pre>
   x:(1 2 3 4 5 6
7 8 9 10 11 12)
   y:10 100
   x*y
(10 20 30 40 50 60
700 800 900 1000 1100 1200)
   y*x
(10 20 30 40 50 60
700 800 900 1000 1100 1200)
</pre>
<pre>
q)x:(1 2 3 4 5 6;7 8 9 10 11 12)
q)y:10 100
q)x*y
10  20  30  40   50   60
700 800 900 1000 1100 1200
q)y*x
10  20  30  40   50   60
700 800 900 1000 1100 1200
</pre>
<p>517. deferred
</p><p>518. transpose matrix x on condition y
</p>
<pre>
   x:2 3#&#160;!6
   x
(0 1 2
3 4 5)
   y:1
   y +:/x
(0 3
1 4
2 5)
   y:0
   y +:/x
(0 1 2
3 4 5)
</pre>
<pre>
q)x:2 3#til 6
q)x
0 1 2
3 4 5
q)y:1
q)y +:/x
0 3
1 4
2 5
q)y:0
q)y+:/x
0 1 2
3 4 5
</pre>
<p>519. see 85
</p><p>520. see 86
</p><p>521. matrix with x columns y
</p>
<pre>
   x:4
   y:&quot;abc&quot;
   x#'y
(&quot;aaaa&quot;
&quot;bbbb&quot;
&quot;cccc&quot;)
</pre>
<pre>
q)x:4
q)y:&quot;abc&quot;
q)x#'y
&quot;aaaa&quot;
&quot;bbbb&quot;
&quot;cccc&quot;
</pre>
<p>522. see 80
</p><p>523. deferred
</p><p>524. deferred
</p><p>525. main diagonal
</p>
<pre>
   x:(1 2 3 4
5 6 7 8
9 10 11 12)
   y:2#'!#x
   y
(0 0
1 1
2 2)
   x ./: y
1 6 11
</pre>
<p>526. see 525
</p><p>527. transpose planes of three-dimensional x
</p>
<pre>
   x:2 2 2#&#160;!8
   x
((0 1
2 3)
(4 5
6 7))
   +:'x
((0 2
1 3)
(4 6
5 7))
</pre>
<p>528. vector (cross) product
</p>
<pre>
   x:2 8 5 6 3 1 7 7 10 4
   y:6 9 1 1 6 7 1 4 1 5
   ((1!x)*-1!y)-(-1!x)*1!y
4 28 46 -27 -41 39 45 3 -19 -58
</pre>
<pre>
q)x:2 8 5 6 3 1 7 7 10 4
q)y:6 9 1 1 6 7 1 4 1 5
q)((1 rotate x)*-1 rotate y)-(-1 rotate x)*1 rotate y
4 28 46 -27 -41 39 45 3 -19 -58
</pre>
<p>529. markers for x at y
</p>
<pre>
   x:&quot;abcdefghijklmn&quot;
   y:3 7 9
   @[&amp;#x;y;:;1]
0 0 0 1 0 0 0 1 0 1 0 0 0 0
</pre>
<pre>
q)x:&quot;abcdefghijklmn&quot;
q)y:3 7 9
q)@[(count x)#0;y;:;1]
0 0 0 1 0 0 0 1 0 1 0 0 0 0
</pre>
<p>530. index of last occurrence of y in x
</p>
<pre>
   x:10 _draw 5
   x
3 0 4 3 1 4 4 3 3 1
   y:4
   *|&amp;x=y
6
   y:3
   *|&amp;x=y
8
</pre>
<pre>
q)x:3 0 4 3 1 4 4 3 3 1
q)y:4
q)last  where x=y
6
q)y:3
q)last where x=y
8
</pre>
<p>531. replace each item of y with index of its last occurrence
</p>
<pre>
   x:&quot;aabbbcccc&quot;
   y:x,&quot;ddd&quot;
   x
&quot;aabbbcccc&quot;
   y
&quot;aabbbccccddd&quot;
   (|x)?/:y
7 7 4 4 4 0 0 0 0 9 9 9
   #x
9
   (#x)-(|x)?/:y
2 2 5 5 5 9 9 9 9 0 0 0
   0|-1+(#x)-(|x)?/:y
1 1 4 4 4 8 8 8 8 0 0 0
</pre>
<pre>
q)x:&quot;aabbbcccc&quot;
q)y:x,&quot;ddd&quot;
q)x
&quot;aabbbcccc&quot;
q)y
&quot;aabbbccccddd&quot;
q)(reverse x)?/:y
7 7 4 4 4 0 0 0 0 9 9 9
q)count x
9
q)(count x)-(reverse x)?/:y
2 2 5 5 5 9 9 9 9 0 0 0
q)0|-1+(count x)-(reverse x)?/:y
1 1 4 4 4 8 8 8 8 0 0 0
</pre>
<p>532. index of last occurrence of y in x, counted from the rear
</p>
<pre>
   x:8 4 9 1 5 7
   y:8 2 3 4 9 5 7 1 10 6 8 2
   (|x)?/:y
5 6 6 4 3 1 0 2 6 6 5 6
</pre>
<pre>
q)x:8 4 9 1 5 7
q)y:8 2 3 4 9 5 7 1 10 6 8 2
q)(reverse x)?/:y
5 6 6 4 3 1 0 2 6 6 5 6
</pre>
<p>533. reverse x on condition y
</p>
<pre>
   x:1 2 3 4 5
   y:0
   y |:/x
1 2 3 4 5
   y:1
   y |:/x
5 4 3 2 1
</pre>
<p>534. see 203
</p><p>535. avoiding parentheses using reverse
</p>
<pre>
   x:1 2 3 4 5
   (#x),1
5 1
   |1,#x
5 1
</pre>
<pre>
q)x:1 2 3 4 5
q)(count x),1
5 1
q)reverse 1,count x
5 1
</pre>
<p>536. rotate rows left
</p>
<pre>
   x:3 4#1+!12
   x
(1 2 3 4
5 6 7 8
9 10 11 12)
   1!'x
(2 3 4 1
6 7 8 5
10 11 12 9)
</pre>
<pre>
q)x:3 4#1+til 12
q)1 rotate 'x
2  3  4  1
6  7  8  5
10 11 12 9
</pre>
<p>537. rotate rows right
</p>
<pre>
   x:3 4#1+!12
   x
(1 2 3 4
5 6 7 8
9 10 11 12)
   -1!'x
(4 1 2 3
8 5 6 7
12 9 10 11)
</pre>
<pre>
q)x:3 4#1+til 12
q)-1 rotate 'x
4  1 2  3
8  5 6  7
12 9 10 11
</pre>
<p>538. insert 0 in list of ones x after indices y
</p>
<pre>
   x:1 1 1 1 1 1 1 1 1 1
   y
1 3 7
   +,x
(,1
,1
,1
,1
,1
,1
,1
,1
,1
,1)
   @[+,x;y;{x,0}]
(,1
1 0
,1
1 0
,1
,1
,1
1 0
,1
,1)
   ,/@[+,x;y;{x,0}]
1 1 0 1 1 0 1 1 1 1 0 1 1
</pre>
<pre>
q)x:1 1 1 1 1 1 1 1 1 1
q)y:1 3 7
q)flip enlist x
1
1
1
1
1
1
1
1
1
1
q)@[flip enlist x;y;{x,0}]
,1
1 0
,1
1 0
,1
,1
,1
1 0
,1
,1
q)raze @[flip enlist x;y;{x,0}]
1 1 0 1 1 0 1 1 1 1 0 1 1
</pre>
<p>539. Boolean vector of length y with zeros in locations x
</p>
<pre>
   x:2 3 4 8
   y:10
   method A
   ~(!y) _lin x
1 1 0 0 0 1 1 1 0 1
   method B
   ~@[&amp;y;x;:;1]
1 1 0 0 0 1 1 1 0 1
</pre>
<pre>
q)x:2 3 4 8
q)y:10
q)not @[y#0;x;:;1]
1100011101b
</pre>
<p>540. markers in Boolean vector of length x at indices y
</p>
<pre>
   x:10
   y:1 3 7
   method A
  (!x) _lin y
0 1 0 1 0 0 0 1 0 0
   method B
   @[&amp;x;y;:;1]
0 1 0 1 0 0 0 1 0 0
</pre>
<pre>
q)x:10
q)y:1 3 7
q)@[x#0;y;:;1]
0 1 0 1 0 0 0 1 0 0
</pre>
<p>541. omitted
</p><p>542. omitted
</p><p>543. see 540
</p><p>544. do x and y match
</p>
<pre>
   x~y
</pre>
<pre>
q)x~y
</pre>
<p>545. zero items of y not in x
</p>
<pre>
   y: 2 3 4 5 6 7 8 9 10 11
   x:2 3 5 7 11
   y _lin x
1 1 0 1 0 1 0 0 0 1
   y*y _lin x
2 3 0 5 0 7 0 0 0 11
</pre>
<pre>
q)y: 2 3 4 5 6 7 8 9 10 11
q)x:2 3 5 7 11
q)y in x
1101010001b
q)y*y in x
2 3 0 5 0 7 0 0 0 11
</pre>
<p>546. is count of atoms 1 (uses cs from 366)
</p>
<pre>
   cs:({#,//x}
   co:{1=cs[x]}
   co[35]
1
   co[,35]
1
   co[1 1#35]
1
   co[1 1 1#35]
1
   co[1 2]
0
   co[!0]
0
</pre>
<pre>
q)cs:{count raze over x}
q)co:{1=cs[x]}
q)co[35]
1b
q)co[enlist 35]
1b
q)co[1 1#35]
1b
q)co[1 2]
0b
q)co[til 0]
0b
</pre>
<p>547. is x vector
</p>
<pre>
   iv:{1=#^x}
   iv[0]
0
   iv[1 2]
1
   iv[(1;2)]
1
   iv[(1 2;3 4)]
0
   iv[2 3#!6]
0
   iv[!0]
1
</pre>
<p>548. test if empty
</p>
<pre>
   ie:{0 _in ^x}
   ie 7
0
   ie 8 9
0
   ie 2 3#6
0
   ie (1 0#5)
1
</pre>
<p>549. alphabetic comparison (depends on storage values)
</p>
<pre>
   &quot;a&quot;&lt;&quot;b&quot;
1
   &quot;a&quot;&gt;&quot;b&quot;
0
   _ic&quot;;&quot;
59
   _ic&quot;/&quot;
47
   &quot;;&quot;&lt;&quot;/&quot;
0
</pre>
<pre>
q)&quot;a&quot;&lt;&quot;b&quot;
1b
q)&quot;a&quot;&gt;&quot;b&quot;
0b
q)&quot;i&quot;$&quot;;&quot;
59
q)`int$&quot;/&quot;
47
q)&quot;;&quot;&lt;&quot;/&quot;
0b
</pre>
<p>550. see 37
</p><p>551. index of first differing item of x and y
</p>
<pre>
   x:3 1 4 1 6 0
   y:3 1 4 1 5 9
   (~x=y)?1
4
</pre>
<pre>
q)(not x=y)?1b
4
</pre>
<p>552. which items of x are not in y
</p>
<pre>
   x:2 3 4 5 6 7 8 9 10 11
   y:2 3 5 7 11
   ~x _lin y
0 0 1 0 1 0 1 1 1 0
</pre>
<pre>
q)x:2 3 4 5 6 7 8 9 10 11
q)y:2 3 5 7 11
q)not x in y
0010101110b
</pre>
<p>553. see 37
</p><p>554. select from g based on index of x in y
</p>
<pre>
   g:(&quot;William Shakespeare&quot;
&gt; &quot;John Milton&quot;
&gt; &quot;Jonathan Swift&quot;
&gt; &quot;Jane Austen&quot;
&gt; &quot;John Keats&quot;
&gt; &quot;Charles Dickens&quot;)
   y:1564 1608 1667 1775 1795 1812
   x:1775
   g[y?x]
&quot;Jane Austen&quot;
</pre>
<pre>
q)g:(&quot;William Shakespeare&quot;;&quot;John Milton&quot;;&quot;Jonathan Swift&quot;;&quot;Jane Austen&quot;;&quot;John Keats&quot;;&quot;Charles Dickens&quot;)
q)y:1564 1608 1667 1775 1795 1812
q)x:1775
q)g[y?x]
&quot;Jane Austen&quot;
</pre>
<p>555. all axes of rectangular array x
</p>
<pre>
   x:2 2 2 2#&#160;!16
  &#160;!#^x
0 1 2 3
</pre>
<p>556. all indices of vector x
</p>
<pre>
   x:2 2 2 2#&#160;!16
  &#160;!#^x
0 1 2 3
</pre>
<p>557. arithmetic progression of y numbers from x with step g
</p>
<pre>
   x:5
   y:8
   g:100
   x+g*!y
5 105 205 305 405 505 605 705
   ap:{[x;g;y]x+g*!y}
   ap[x;g;y]
5 105 205 305 405 505 605 705
</pre>
<pre>
q)x:5
q)y:8
q)g:100
q)x+g*til y
5 105 205 305 405 505 605 705
q)ap:{[x;g;y]x+g*til y}
q)ap[x;g;y]
5 105 205 305 405 505 605 705
</pre>
<p>558. consecutive integers from x to y
</p>
<pre>
   ci:{x+!1+y-x}
   ci[5;10]
5 6 7 8 9 10
</pre>
<pre>
q)ci:{x+til 1+y-x}
q)ci[5;10]
5 6 7 8 9 10
</pre>
<p>559. index of first marker in Boolean x
</p>
<pre>
   x:0 0 1 0 1 0 0 1 1 0
   x?1
2
</pre>
<pre>
q)x?1
2
</pre>
<p>560. omitted
</p><p>561. numeric code from character
</p>
<pre>
   x:&quot; aA0&quot;
   _ic[x]
32 97 65 48
</pre>
<pre>
q)x:&quot; aA0&quot;
q)&quot;i&quot;$x
32 97 65 48
</pre>
<p>562. index of y in x
</p>
<pre>
   x:&quot; abcdefgh&quot;
   y:&quot;faded head&quot;
   x?/:y
6 1 4 5 4 0 8 5 1 4
   y:&quot;deaf adder&quot;
   x?/:y
4 5 1 6 0 1 4 4 5 9
</pre>
<pre>
q)x:&quot; abcdefgh&quot;
q)y:&quot;faded head&quot;
q)x?/:y
6 1 4 5 4 0 8 5 1 4
q)y:&quot;deaf adder&quot;
q)x?/:y
4 5 1 6 0 1 4 4 5 9
</pre>
<p>563. empty vector
</p>
<pre>
!0
!0
!0
,0
&quot;&quot;
&quot;&quot;
&quot;&quot;
,0
</pre>
<p>564. is x within range ( y[0],y[1] )
</p>
<pre>
   ci:{(y[0]&lt;x)&amp;(x&lt;y[1])}
   y:3 8
   x:5
   ci[x;y]
1
   x:3
   ci[x;y]
0
   x:2
   ci[x;y]
0
   x:8
   ci[x;y]
0
   x:9
   ci[x;y]
0
</pre>
<pre>
q)ci:{(y[0]&lt;x)&amp;(x&lt;y[1])}
q)y:3 8
q)x:5
q)ci[x;y]
1b
q)x:3
q)ci[x;y]
0b
q)x:2
q)ci[x;y]
0b
q)x:8
q)ci[x;y]
0b
q)x:9
q)ci[x;y]
0b
</pre>
<p>565. is x within range [ y[0],y[1] ]
</p>
<pre>
   oi:{(~y[0]&gt;x)&amp;(~x&gt;y[1])}
   y:3 8
   x:5
   oi[x;y]
1
   x:3
   oi[x;y]
1
   x:2
   oi[x;y]
0
   x:8
   oi[x;y]
1
   x:9
   oi[x;y]
0
</pre>
<pre>
q)oi:{(not y[0]&gt;x)&amp;(not x&gt;y[1])}
q)y:3 8
q)x:5
q)oi[x;y]
1b
q)x:3
q)oi[x;y]
1b
q)x:2
q)oi[x;y]
0b
q)x:8
q)oi[x;y]
1b
q)x:9
q)oi[x;y]
0b
</pre>
<p>566. zero all items of Boolean x
</p>
<pre>
   x:0 1 0 1 1 0 0 1 1 1 0
0&amp;x
0 0 0 0 0 0 0 0 0 0 0
</pre>
<pre>
q)x:0 1 0 1 1 0 0 1 1 1 0
q)0&amp;x
0 0 0 0 0 0 0 0 0 0 0
</pre>
<p>567. select x or y depending on g
</p>
<pre>
   x:`hot `white `short `old
   y:`cold `black `tall `young
   g:1 0 0 1
   x,'y
(`hot `cold
`white `black
`short `tall
`old `young)
   (!#g),'g
(0 1
1 0
2 0
3 1)
   (x,'y) ./: (!#g),'g
`cold `white `short `young
</pre>
<pre>
q)x:`hot`white`short`old
/short is a reserved name (but it is not a problem here)
q)y:`cold`black`tall`young
q)g:1 0 0 1
q)x,'y
hot   cold
white black
short  tall
old   young
q)(key count g),'g
0 1
1 0
2 0
3 1
q)(x,'y)./:(key count g),'g
`cold`white`short`young
q)(x,'y)@'g /more simple
`cold`white`short`young
q)?[&quot;b&quot;$g;y;x] /or to use the builtin construct for it
`cold`white`short`young
</pre>
<p>568. omitted
</p><p>569. change y to one if x
</p>
<pre>
   y:10 5 7 12 20.0
   x:0 1 0 1 1
   y^~x
10 1 7 1 1.0
alternatively
   @[y;&amp;x;:;1]
10 1 7 1 1
</pre>
<pre>
q)y:10 5 7 12 20.0
q)x:0 1 0 1 1
q)@[y;where x;:;1.]
10 1 7 1 1f
/note that 1. --otherwise 'type as 9h=type y
</pre>
<p>570. x implies y
</p>
<pre>
   x:0 1 0 1
   y:0 0 1 1
   ~x&gt;y
1 0 1 1
</pre>
<pre>
q)x:0 1  0 1
q)y:0 0 1 1
q)not x&gt;y
1011b
</pre>
<p>571. x but not y
</p>
<pre>
   x:0 1 0 1
   y:0 0 1 1
   x&gt;y
0 1 0 0
</pre>
<pre>
q)x:0 1  0 1
q)y:0 0 1 1
q)x&gt;y
0100b
</pre>
<p>572. division by 0
</p>
<pre>
   dz:{(~0=x)*y%x+x=0}
   y:10 15 -20
   x:2 0 0
   y%x
5 0i -0i
   dz[x;y]
5 0 0.0
</pre>
<pre>
q)dz:{(not 0=x)*y%x+x=0}
q)y:10 15 -20
q)x:2 0 0
q)y%x
5 0w -0w
q)dz[x;y]
5 0 -0f
</pre>
<p>573. exclusive or
</p>
<pre>
   x:0 0 1 1
   y:0 1 0 1
   ~x=y
0 1 1 0
</pre>
<pre>
q)x:0 0 1 1
q)y:0 1 0 1
q)not x=y
0110b
</pre>
<p>574. y where x is 0
</p>
<pre>
   x:0 7 8 0 2
   y:10 4 6 7 3
   x+y*x=0
10 7 8 7 2
</pre>
<pre>
q)x:0 7 8 0 2
q)y:10 4 6 7 3
q)x+y*x=0
10 7 8 7 2
</pre>
<p>575. Kronecker delta of x and y
</p>
<pre>
   x:0 0 1 1
   y:0 1 0 1
   x=y
1 0 0 1
</pre>
<pre>
q)x:0 0 1 1
q)y:0 1 0 1
q)x=y
1001b
</pre>
<p>576. append y items g before each item of x
</p>
<pre>
   x:1 3 5
   y:2
   g:10
   y#g
10 10
   (y#g),/:x
(10 10 1
10 10 3
10 10 5)
   ,/(y#g),/:x
10 10 1 10 10 3 10 10 5
</pre>
<pre>
q)x:1 3 5
q)y:2
q)g:10
q)y#g
10 10
q)(y#g),/:x
10 10 1
10 10 3
10 10 5
q)raze (y#g),/:x
10 10 1 10 10 3 10 10 5
</pre>
<p>577. append y items g after each item of x
</p>
<pre>
   x:1 3 5
   y:2
   g:10
   ,/x,\:y#g
1 10 10 3 10 10 5 10 10
</pre>
<pre>
q)raze x,\:y#g
1 10 10 3 10 10 5 10 10
</pre>
<p>578. merge items from x and y alternately
</p>
<pre>
   x:1 3 5 7
   y:2 4 6 8
   ,/x,'y
1 2 3 4 5 6 7 8
</pre>
<pre>
q)raze x,'y
1 2 3 4 5 6 7 8
</pre>
<p>579. variable length lines
</p>
<pre>
   x:&quot;by and by&quot;
   y:&quot;God caught his eye&quot;
   ,(x;y)
,(&quot;by and by&quot;
&quot;God caught his eye&quot;)
</pre>
<pre>
q)(x;y)
&quot;by and by&quot;
&quot;God caught his eye&quot;
</pre>
<p>580. see 490
</p><p>581. insert y after each item of x
</p>
<pre>
   x:&quot;abc&quot;
   y:&quot;d&quot;
   ,/x,'y
&quot;adbdcd&quot;
</pre>
<pre>
q)x:&quot;abc&quot;
q)y:&quot;d&quot;
q)raze x,'y
&quot;adbdcd&quot;
</pre>
<p>582. see 197
</p><p>583. array and its negative
</p>
<pre>
   x:1 -3 5
   x,'-x
(1 -1
-3 3
5 -5)
</pre>
<pre>
q)x:1 -3 5
q)x,'neg x
1  -1
-3 3
5  -5
</pre>
<p>584. omitted
</p><p>585. omitted
</p><p>586. omitted
</p><p>587. first column as a matrix
</p>
<pre>
   x:(0 1 2 3
4 5 6 7
8 9 10 11)
   x[;,0]
(,0
,4
,8)
</pre>
<pre>
q)x[;enlist 0]
0
4
8
</pre>
<p>588. 2-row matrix from two vectors
</p>
<pre>
   x:&quot;abcd&quot;
   y:&quot;efgh&quot;
   (,x),(,y)
(&quot;abcd&quot;
&quot;efgh&quot;)
</pre>
<pre>
q)x:&quot;abcd&quot;
q)y:&quot;efgh&quot;
q)(enlist x),(enlist y)
&quot;abcd&quot;
&quot;efgh&quot;
</pre>
<p>589. 2-column matrix from two vectors
</p>
<pre>
   x:&quot;abcd&quot;
   y:&quot;efgh&quot;
   x,'y
(&quot;ae&quot;
&quot;bf&quot;
&quot;cg&quot;
&quot;dh&quot;)
</pre>
<pre>
q)x,'y
&quot;ae&quot;
&quot;bf&quot;
&quot;cg&quot;
&quot;dh&quot;
</pre>
<p>590. increasing rank of y to rank of x
</p>
<pre>
   x:(&quot;abcd&quot;
&gt; &quot;efgh&quot;)
   x
(&quot;abcd&quot;
&quot;efgh&quot;)
   y:&quot;ijkl&quot;
   #^x
2
   #^y
1
   #^,y
2
   ((#^x)-#^y),:/y
,&quot;ijkl&quot;
</pre>
<p>591. reshape vector x into 2-column matrix
</p>
<pre>
   x:&quot;abcdefgh&quot;
   ((_ 0.5*#x),2)#x
(&quot;ab&quot;
&quot;cd&quot;
&quot;ef&quot;
&quot;gh&quot;)
</pre>
<pre>
q)x:&quot;abcdefghi&quot;
q)((floor 0.5*count x),2)#x
&quot;ab&quot;
&quot;cd&quot;
&quot;ef&quot;
&quot;gh&quot;
q)((floor 0.5*count x),2)#x:&quot;ab&quot;
&quot;ab&quot;
q)((floor 0.5*count x),2)#x:&quot;abcd&quot;
&quot;ab&quot;
&quot;cd&quot;
q)((floor 0.5*count x),2)#x:&quot;abcde&quot;
&quot;ab&quot;
&quot;cd&quot;
q)((floor 0.5*count x),2)#x:&quot;abcdef&quot;
&quot;ab&quot;
&quot;cd&quot;
&quot;ef&quot;
q)((floor 0.5*count x),2)#x:&quot;abcdefgh&quot;
&quot;ab&quot;
&quot;cd&quot;
&quot;ef&quot;
&quot;gh&quot;
</pre>
<p>592. vector from array
</p>
<pre>
   x:2 1 2 1 2 1#&#160;!8
   x
2 1 2 1 2 1
   ,//x
0 1 2 3 4 5 6 7
   ,//x
,8
</pre>
<p>593. matrix of y rows, each x
</p>
<pre>
   x:&quot;abcd&quot;
   y:3
   y#,x
(&quot;abcd&quot;
&quot;abcd&quot;
&quot;abcd&quot;)
</pre>
<pre>
q)x:&quot;abcd&quot;
q)y:3
q)y#enlist x
&quot;abcd&quot;
&quot;abcd&quot;
&quot;abcd&quot;
</pre>
<p>594. see 203
</p><p>595. one-row matrix from vector
</p>
<pre>
   x:2 3 5 7 11
   x
2 3 5 7 11
   ^x
,5
   ,x
,2 3 5 7 11
   ^,x
1 5
</pre>
<p>596. see 366
</p><p>597. omitted
</p><p>598. omitted
</p><p>599. number of columns in array x
</p>
<pre>
   x:1 1 1 1 1 678#0
   ^x
1 1 1 1 1 678
   *|^x
678
</pre>
<p>600. number of columns in matrix x
</p>
<pre>
   x:3 19#0
   ^x
3 19
   (^x)[1]
19
</pre>
<p>601. number of rows in matrix x
</p>
<pre>
   x:17 2#0
   #x
17
</pre>
<pre>
q)count x
17
</pre>
<p>602. choosing according to sign
</p>
<pre>
   sg:{(x&gt;0)-(x&lt;0)}
   sg -4.5 0 6.78
-1 0 1
   y:&quot;-0+&quot;
   x:-54
   y[1+sg[x]]
&quot;-&quot;
   x:0
   y[1+sg[x]]
&quot;0&quot;
   x:1234.5
   y[1+sg[x]]
&quot;+&quot;
</pre>
<pre>
q)signum -4.5 0 6.8
q)y[1+signum[x]]
&quot;-&quot;
q)x:0
q)y[1+signum[x]]
&quot;0&quot;
q)x:1234.5
q)y[1+signum[x]]
&quot;+&quot;
</pre>
<p>603. conditional change of sign
</p>
<pre>
   y:1+!6
   y
1 2 3 4 5 6
   x:0 1 0 1 1 0
   y*1 -1[x]
1 -2 3 -4 -5 6
</pre>
<pre>
q)y:1+til 6
q)y
1 2 3 4 5 6
q)x:0 1 0 1 1 0
q)y*1 -1[x]
1 -2 3 -4 -5 6
</pre>
<p>604. omitted
</p><p>605. indexing plotting characters with Boolean index
</p>
<pre>
   x:~3 6 5 7 2&lt;\:1+!7
   x
(1 1 1 0 0 0 0
1 1 1 1 1 1 0
1 1 1 1 1 0 0
1 1 1 1 1 1 1
1 1 0 0 0 0 0)
   &quot; *&quot;[x]
(&quot;*** &quot;
&quot;****** &quot;
&quot;***** &quot;
&quot;*******&quot;
&quot;** &quot;)
</pre>
<pre>
q)x:not 3 6 5 7 2&lt;\:1+til 7
q)x
1110000b
1111110b
1111100b
1111111b
1100000b
q)&quot; *&quot;[x]
&quot;***    &quot;
&quot;****** &quot;
&quot;*****  &quot;
&quot;*******&quot;
&quot;**     &quot;
</pre>
<p>606. omitted
</p><p>607. vector from column of matrix
</p>
<pre>
   x:3 4#&#160;!12
   x
(0 1 2 3
4 5 6 7
8 9 10 11)
   x[;0]
0 4 8
</pre>
<pre>
q)x:3 4#til 12
q)x
0 1 2  3
4 5 6  7
8 9 10 11
q)x[;0]
0 4 8
</pre>
<p>608. zeroing an array
</p>
<pre>
   x:1 2 3 4
   x
1 2 3 4
   x[]:0
   x
0 0 0 0
   x:2 3#!6
   x
(0 1 2
3 4 5)
   x[;]:0
   x
(0 0 0
0 0 0)
   x:9
   x
9
   x:0
   x
0
</pre>
<pre>
q)x:3 4#til 12
q)x
0 1 2  3
4 5 6  7
8 9 10 11
q)x[;0]
0 4 8
q)x:1 2 3 4
q)x
1 2 3 4
q)x[]:0
q)x
0 0 0 0
q)x:2 3#til 6
q)x
0 1 2
3 4 5
q)x[;]:0
q)x
0 0 0
0 0 0
q)x:9
q)x
9
q)x:0
</pre>
<p>609. omitted
</p><p>610. y cyclic repetitions of vector x
</p>
<pre>
   x:&quot;abcd&quot;
   y:3
   (y*#x)#x
&quot;abcdabcdabcd&quot;
</pre>
<pre>
q)(y*count x)#x
&quot;abcdabcdabcd&quot;
</pre>
<p>611. multiply each row of x by vector y
</p>
<pre>
   x:3 4#1+!12
   x
(1 2 3 4
5 6 7 8
9 10 11 12)
   y:1 10 100 10000
   x*\:y
(1 20 300 40000
5 60 700 80000
9 100 1100 120000)
</pre>
<pre>
q)x*\:y
1 20  300  40000
5 60  700  80000
9 100 1100 120000
</pre>
<p>612. rank of array y (number of dimensions)
</p>
<pre>
   x:2 1 2 1 3 1 4#0
   #^x
7
   #^9
0
   #^7 8 9
1
   #^(1 2 3;4 5 6)
2
</pre>
<pre>
q)rank(1 2 3;4 5 6)
0 1
q)count rank(1 2 3;4 5 6)
2
</pre>
<p>613. see 441
</p><p>614. array with shape of y and x as its rows
</p>
<pre>
   y:3 4#&#160;!12
   y
(0 1 2 3
4 5 6 7
8 9 10 11)
   x:&quot;abcd&quot;
   (^y)#x
(&quot;abcd&quot;
&quot;abcd&quot;
&quot;abcd&quot;)
</pre>
<pre>
/not quite the same
q)y:3 4#til 12
q)x:&quot;abcd&quot;
q)3 4#x
&quot;abcd&quot;
&quot;abcd&quot;
&quot;abcd&quot;
</pre>
<p>615. first atom in x
</p>
<pre>
   x:2 2 2 2#&#160;!8
   x
(((0 1
2 3)
(4 5
6 7))
((0 1
2 3)
(4 5
6 7)))
   *//x
0
</pre>
<pre>
/not quite the same
q)x:4 2#(4 2#til 8)
q)x
0 1 2 3
4 5 6 7
0 1 2 3
4 5 6 7
q)x 0
0 1
2 3
q)x 1
4 5
6 7
q)x 2
0 1
2 3
q)x 3
4 5
6 7
q)prd/[x]
0
</pre>
<p>616. scalar from one-item vector
</p>
<pre>
   x:,8
   x
,8
   &quot;&quot;#x
8
   x[0]
8
*x
8
</pre>
<pre>
q)x 0
8
q)first x
8
</pre>
<p>617. omitted
</p><p>618. deferred
</p><p>619. deferred
</p><p>620. omitted
</p><p>621. see 583
</p><p>622. retain value of items marked by y, zero others
</p>
<pre>
   x:3 7 15 1 292
   y:1 0 1 1 0
   x*y
3 0 15 1 0
</pre>
<pre>
q)x:3 7 15 1 292
q)y:1 0 1 1 0
q)x*y
3 0 15 1 0
</pre>
<p>623. conditional change of sign
</p>
<pre>
   x:-9
   y:0
   x*-1^y
-9.0
   y:1
   x*-1^y
9.0
</pre>
<pre>
/^ is very different between old k2 k3 and k4/q?
q)x:-9
q)y:0
q)x*-1^y
0
q)y:1
q)x*-1^y
-9
</pre>
<p>624. zero numerical array
</p>
<pre>
   x:2 3#99
   x
(99 99 99
99 99 99)
   x*0
(0 0 0
0 0 0)
</pre>
<pre>
q)x*0
0 0 0
0 0 0
</pre>
<p>625. omitted
</p><p>626. omitted
</p><p>627. omitted
</p><p>628. omitted
</p><p>629. error to stop execution
</p>
<pre>
&amp;`
</pre>
<p>630. omitted
</p><p>631. omitted
</p><p>1001. payback
cumulative accumulation factors
(see Zark APL Tutor News 1998 Quarter 2)
</p>
<pre>
   caf:{[W;R]*\(#W)#1+R}
   pay:{[B;T;R;W]C*B-+\W%(#W)#T _ 1,C:caf[W;R]}
The version pay2 replaces T by END, and permits END to be any value between 0 and 1.
   pay2:{[B;END;R;W]CPA:*\A:1+R
   CPA*B-+\W%CPA%A*1-END}
B initial balance
T time of withdrawal: 0 start of period, 1 end
R interest rate per period
W withdrawal amount
   B:1000
   T:0
   R:0.05
   W:200 300 400 200
   pay[B;T;.R;W]
840 567 175.35 -25.8825
   T:1
   pay[B;T;.R;W]
850 592.5 222.125 33.23125
   R:0.05 0.04 0.06 0.05
   pay[B;T;R;W]
840 561.6 171.296 -30.1392
   T:1
   pay[B;T;R;W]
850 584 219.04 29.992
</pre>
<pre>
q)caf:{[W;R]prds(count W)#1+R}
q)pay:{[B;T;R;W]C*B-sums W%(count W)#T _ 1,C:caf[W;R]}
q)pay2:{[B;END;R;W]CPA:prds A:1+R;CPA*B-sums W%CPA%A*1-END}
q)B:1000
q)T:0
q)R:0.05
q)W:200 300 400 200
q)pay[B;T;R;W]
840 567 175.35 -25.8825
q)T:1
q)pay[B;T;R;W]
850 592.5 222.125 33.23125
q)R:0.05 0.04 0.06 0.05
q)T:0
q)pay[B;T;R;W]
840 561.6 171.296 -30.1392
q)T:1
q)pay[B;T;R;W]
850 584 219.04 29.992
</pre>
<p>1002. round summands
ensure sum of rounded summands matches round of sum
</p>
<pre>
   f:{y%:x
   i:_y
   x*@[i;{(_.5+/x)#&gt;x}[y-i];+;1]}
   y:42.35 38.45 19.20
_.5++/y
100
_.5+y
42 38 19
+/_.5+y
99
   x:1
   z:f[x;y]
   z
42 39 19
+/z
100
   y:42.65 37.60 19.75
_.5++/y
100
_.5+y
43 38 20
+/_.5+y
101
   z:f[x;y]
   z
43 37 20
+/z
100
</pre>
<p>1003. maximum sum of infixes
</p>
<pre>
   f:{|/0(0|+)\x}
   x:-100 2 3 4 -100 6 7 8 9 -100
f x
30
</pre>
<pre>
/need more study
q)f:{max 0 (0|+)\x}
q)x:-100 2 3 4 -100 6 7 8 9 -100
q)f x
30
</pre>
<p>1004. range union
</p>
<pre>
   i:(1 3;8 10;11 12;2 4)
/ given ordered (lefts;rights)
/ interval 0 and where left is greater than 1+ max previous right
   f:{(x i;1!y i:0,&amp;x&gt;1+y:-1!|\y)}
   +f .+{x@&lt;x}i /flip f apply flip sort i
(1 4;8 12)
</pre>
<p>1005. pointer chasing
For r a primitive root of prime p, the additive list formed by (r*!p)!p has an interesting property, first discussed by August Crelle in the early 19th century. For example, if we take such a list for the primitive root 3 of 7:
</p>
<pre>
a:(3*!7)!7
/ list of successive sums of 3, starting from 0, mod 7:
a
0 3 6 2 5 1 4
then if we treat the items of this list as pointers, and write
a\1
1 3 2 6 4 5
we find that the new list is the successive powers of 3, mod 7.
</pre>
<pre>
q)a:(3*til 7)mod 7
q)a
0 3 6 2 5 1 4
q)a\[1]
1 3 2 6 4 5
</pre>
<p>1006. partitions of y with no part less than x
</p>
<pre>
   part:{t:x _!1+_ y%2
(,/t,''t _f'y-t),y}
   part[3;10]
(3 3 4
3 7
4 6
5 5
10)
   part[1;6]
(1 1 1 1 1 1
1 1 1 1 2
1 1 1 3
1 1 2 2
1 1 4
1 2 3
1 5
2 2 2
2 4
3 3
6)
   #:'part[1]'1+!10
1 2 3 5 7 11 15 22 30 42
</pre>
<pre>
q)part:{t:x _ til 1+ floor y%2;(raze t,''t part'y-t),y}
q)part[3;10]
3 3 4
3 7
4 6
5 5
10
q)part[1;6]
1 1 1 1 1 1
1 1 1 1 2
1 1 1 3
1 1 2 2
1 1 4
1 2 3
1 5
2 2 2
2 4
3 3
6
q)count each part[1]'[1+til 10]
1 2 3 5 7 11 15 22 30 42
</pre>
<p>1007. Pascal's triangle
</p>
<pre>
   pt:{+':0,x,0}
   4 pt\1
(1
1 1
1 2 1
1 3 3 1
1 4 6 4 1)
   pt pt pt pt 1
1 4 6 4 1
   4 pt/1
1 4 6 4 1
</pre>
<pre>
/not quite the same
q)pt:{+':[0,x,0]}
q)pt pt pt pt 1
0 0 0 0 1 4 6 4 1
q)4 pt/1
0 0 0 0 1 4 6 4 1
q)4 pt\1
1
0 1 1
0 0 1 2 1
0 0 0 1 3 3 1
0 0 0 0 1 4 6 4 1
</pre>
<pre>
/ this version gives required output
q)pt:{0+':x,0}
q)4 pt\ 1
1
1 1
1 2 1
1 3 3 1
1 4 6 4 1
</pre>
<p>1008. Polygon area
</p>
<pre>
   area: 0.5*+/{-/y*|x}':
The dyad {-/y*|x} yields the determinant of a 2-by-2 matrix. The dyad area yields the area of a polygon whose x-y coordinates are, in order, the rows of a 2-column matrix, where the last row is the same as the first row.
   x:(7 2;10 5;6 8;3 6;4 3;7 2)
   area x
24.5
</pre>
<p>1009. Great circle distance
</p>
<pre>
   gcd:{_cos?(*/_sin x)+(*/_cos x)*_cos[-/y]}
</pre>
<p>The great circle distance in radians between two points on a sphere whose latitudes in radians are in x and longitudes in radians are in y.
</p><p>1010. Nautical miles from radians
</p>
<pre>
nmr:{x*180*60%3.141592653589798238}
</pre>
<pre>
q)nmr:{x*180*60%3.141592653589798238}
</pre>
<p>1011. Degrees from degrees and minutes
</p>
<pre>
   dfdm:{+/x%1 60}
</pre>
<pre>
q)dfdm:{sum x%1 60}
q)dfdm 60 0
60f
q)dfdm 60 3
60.05
q)dfdm 60 10
60.16667
q)dfdm 60 30
60.5
</pre>
<p>1012. Fibonacci numbers
</p>
<pre>
   fn:{x{x,+/-2#x}/0 1}
   fn:{x(|+\)\1 1.0}
</pre>
<pre>
q)fn:{x{x,sum -2#x}/0 1}
</pre>
<p>1013. Tree from depth;value
</p>
<pre>
tdv:{[d;v](1#v),(c _ d-1)_f'(c:&amp;1=d)_ v}
</pre>
<pre>
q)tdv:{[d;v](1#v),(c _ d-1)tdv'(c:where 1=d)_ v}
</pre>
<p>1014. Depth from tree
</p>
<pre>
   dt:{0,/1+_f'1_ x}
</pre>
<pre>
q)dt:{0,/1+dt'[1_ x]}
</pre>
<p>1015. Value from tree
</p>
<pre>
   vt:{(1#x),/_f'1_ x}
q)vt:{(1#x),/vt'[1_ x]}
   d:0 1 2 2 1 1
   v:0 1 2 3 4 5
   t:tdv[d;v]
   t
(0
(1
,2
,3)
,4
,5)
   dt t
0 1 2 2 1 1
   vt t
0 1 2 3 4 5
</pre>
<pre>
q)tdv[d;v]
(0;(1;,2;,3);,4;,5)
q)dt t
0 1 2 2 1 1
q)vt t
0 1 2 3 4 5
</pre>
<p>These 3 recursions stop when they run out of data
</p>
<!-- 
NewPP limit report
Preprocessor node count: 2840/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key my_wiki:pcache:idhash:444-0!*!0!!*!*!edit=0 and timestamp 20130405192911 -->
<div class="printfooter">
Retrieved from "<a href="Qidioms.html">http://code.kx.com/wiki/Qidioms</a>"</div>
				<!-- /bodytext -->
								<!-- catlinks -->
				<div id='catlinks' class='catlinks catlinks-allhidden'></div>				<!-- /catlinks -->
												<div class="visualClear"></div>
			</div>
			<!-- /bodyContent -->
		</div>
		<!-- /content -->
		<!-- header -->
		<div id="mw-head" class="noprint">
			
<!-- 0 -->
<div id="p-personal" class="">
	<h5>Personal tools</h5>
	<ul>
					<li  id="pt-login"><a href="http://code.kx.com/mediawiki/index.php?title=Special:UserLogin&amp;returnto=Qidioms" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
</div>

<!-- /0 -->
			<div id="left-navigation">
				
<!-- 0 -->
<div id="p-namespaces" class="vectorTabs">
	<h5>Namespaces</h5>
	<ul>
					<li  id="ca-nstab-main" class="selected"><span><a href="Qidioms.html"  title="View the content page [c]" accesskey="c">Page</a></span></li>
					<li  id="ca-talk" class="new"><span><a href="http://code.kx.com/mediawiki/index.php?title=Talk:Qidioms&amp;action=edit&amp;redlink=1"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-variants" class="vectorMenu emptyPortlet">
		<h5><span>Variants</span><a href="#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
			</div>
			<div id="right-navigation">
				
<!-- 0 -->
<div id="p-views" class="vectorTabs">
	<h5>Views</h5>
	<ul>
					<li id="ca-view" class="selected"><span><a href="Qidioms.html" >Read</a></span></li>
					<li id="ca-viewsource"><span><a href="http://code.kx.com/mediawiki/index.php?title=Qidioms&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
					<li id="ca-history" class="collapsible "><span><a href="http://code.kx.com/mediawiki/index.php?title=Qidioms&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div id="p-cactions" class="vectorMenu emptyPortlet">
	<h5><span>Actions</span><a href="#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->

<!-- 2 -->
<div id="p-search">
	<h5><label for="searchInput">Search</label></h5>
	<form action="http://code.kx.com/mediawiki/index.php" id="searchform">
		<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text"  title="Search Kx Wiki [f]" accesskey="f"  value="" />
		<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />
		<input type="submit" name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</form>
</div>

<!-- /2 -->
			</div>
		</div>
		<!-- /header -->
		<!-- panel -->
			<div id="mw-panel" class="noprint">
				<!-- logo -->
					<div id="p-logo"><a style="background-image: url(../mediawiki/skins/common/images/kxmedia.png);" href="Main_Page.html"  title="Visit the main page"></a></div>
				<!-- /logo -->
				
<!-- navigation -->
<div class="portal" id='p-navigation'>
	<h5>Navigation</h5>
	<div class="body">
				<ul>
					<li id="n-Reference"><a href="Reference.html">Reference</a></li>
					<li id="n-Cookbooks"><a href="Cookbook.html">Cookbooks</a></li>
					<li id="n-Articles"><a href="Articles.html">Articles</a></li>
					<li id="n-Tutorials"><a href="Tutorials.html">Tutorials</a></li>
					<li id="n-Contrib"><a href="Contrib.html">Contrib</a></li>
					<li id="n-Code-repository"><a href="http://code.kx.com/wsvn/code">Code repository</a></li>
					<li id="n-recentchanges"><a href="http://code.kx.com/wiki/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
					<li id="n-randompage"><a href="http://code.kx.com/wiki/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				</ul>
			</div>
</div>

<!-- /navigation -->

<!-- SEARCH -->

<!-- /SEARCH -->

<!-- TOOLBOX -->
<div class="portal" id="p-tb">
	<h5>Toolbox</h5>
	<div class="body">
		<ul>
					<li id="t-whatlinkshere"><a href="http://code.kx.com/wiki/Special:WhatLinksHere/Qidioms" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
						<li id="t-recentchangeslinked"><a href="http://code.kx.com/wiki/Special:RecentChangesLinked/Qidioms" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
																																										<li id="t-specialpages"><a href="http://code.kx.com/wiki/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-permalink"><a href="http://code.kx.com/mediawiki/index.php?title=Qidioms&amp;oldid=2735" title="Permanent link to this revision of the page">Permanent link</a></li>
						</ul>
	</div>
</div>

<!-- /TOOLBOX -->

<!-- coll-print_export -->
<div class="portal" id='p-coll-print_export'>
	<h5>Print/export</h5>
	<div class="body">
				<ul id="collectionPortletList"><li id="coll-create_a_book"><a href="http://code.kx.com/mediawiki/index.php?title=Special:Book&amp;bookcmd=book_creator&amp;referer=Qidioms" title="Create a book or page collection" rel="nofollow">Create a book</a></li><li id="coll-download-as-rl"><a href="http://code.kx.com/mediawiki/index.php?title=Special:Book&amp;bookcmd=render_article&amp;arttitle=Qidioms&amp;oldid=2735&amp;writer=rl" title="Download a PDF version of this wiki page" rel="nofollow">Download as PDF</a></li><li id="t-print"><a href="http://code.kx.com/mediawiki/index.php?title=Qidioms&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li></ul>			</div>
</div>

<!-- /coll-print_export -->

<!-- LANGUAGES -->

<!-- /LANGUAGES -->
			</div>
		<!-- /panel -->
		<!-- footer -->
		<div id="footer">
											<ul id="footer-info">
																	<li id="footer-info-lastmod"> This page was last modified on 8 January 2013, at 01:00.</li>
																							<li id="footer-info-copyright">Content is available under <a href="TermsAndConditions.html" title="TermsAndConditions">terms and conditions</a>.</li>
															</ul>
															<ul id="footer-places">
																	<li id="footer-places-privacy"><a href="TermsAndConditions.html" title="TermsAndConditions">Privacy policy</a></li>
																							<li id="footer-places-about"><a href="About.html" title="About">About Kx Wiki</a></li>
																							<li id="footer-places-disclaimer"><a href="TermsAndConditions.html" title="TermsAndConditions">Disclaimers</a></li>
															</ul>
											<ul id="footer-icons" class="noprint">
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="../mediawiki/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<!-- /footer -->
		
<script src="../mediawiki/load8478.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if ( window.mediaWiki ) {
	mediaWiki.config.set({"wgCanonicalNamespace": "", "wgCanonicalSpecialPageName": false, "wgNamespaceNumber": 0, "wgPageName": "Qidioms", "wgTitle": "Qidioms", "wgAction": "view", "wgArticleId": 444, "wgIsArticle": true, "wgUserName": null, "wgUserGroups": ["*"], "wgCurRevisionId": 2735, "wgCategories": [], "wgBreakFrames": false, "wgRestrictionEdit": [], "wgRestrictionMove": []});
}
</script>
<script>if ( window.mediaWiki ) {
	mediaWiki.loader.load(["mediawiki.util", "mediawiki.legacy.wikibits", "mediawiki.legacy.ajax"]);
	mediaWiki.loader.go();
}
</script>

<script src="../mediawiki/load55ad.php?debug=false&amp;lang=en&amp;modules=site&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if ( window.mediaWiki ) {
	mediaWiki.user.options.set({"ccmeonemails":0,"cols":80,"contextchars":50,"contextlines":5,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"externaldiff":0,"externaleditor":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"highlightbroken":1,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"quickbar":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"showjumplinks":1,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":0,"watchdefault":0,"watchdeletion":0,
	"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"variant":"en","language":"en","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"searchNs500":false,"searchNs501":false});;mediaWiki.loader.state({"user.options":"ready"});
}
</script>		<!-- fixalpha -->
		<script type="text/javascript"> if ( window.isMSIE55 ) fixalpha(); </script>
		<!-- /fixalpha -->
		<!-- Served in 1.182 secs. -->			</body>

<!-- Mirrored from code.kx.com/wiki/Qidioms by HTTrack Website Copier/3.x [XR&CO'2010], Fri, 05 Apr 2013 19:29:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>
